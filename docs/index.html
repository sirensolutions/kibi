<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.2">
<title>Kibi User Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove the comments around the @import statement below when using this as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
#map_canvas img,#map_canvas embed,#map_canvas object,.map_canvas img,.map_canvas embed,.map_canvas object{max-width:none!important}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
.antialiased,body{-webkit-font-smoothing:antialiased}
img{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{display:inline-block;color:rgba(0,0,0,.8);font-size:.75em;line-height:1.4;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:-.15em .15em 0 .15em;padding:.2em .6em .2em .5em;vertical-align:middle;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.05em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.spread{width:100%}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1{padding-right:.75em;font-weight:bold}
td.hdlist1,td.hdlist2{vertical-align:top}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none}
span.footnote,span.footnoteref{vertical-align:super;font-size:.875em}
span.footnote a,span.footnoteref a{text-decoration:none}
span.footnote a:active,span.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em;line-height:1.3;font-size:.875em;margin-left:1.2em;text-indent:-1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
h1,h2{letter-spacing:-.01em}
dt,th.tableblock,td.content{text-rendering:optimizeLegibility}
p,td.content{letter-spacing:-.01em}
p strong,td.content strong{letter-spacing:-.005em}
p,blockquote,dt,td.content{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img{page-break-inside:avoid}
thead{display:table-header-group}
img{max-width:100%!important}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body id="kibi-guide" class="article toc2 toc-right">
<div id="header">
<h1>Kibi User Guide</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_what_s_new_in_kibi_v0_3_2">What&#8217;s new in Kibi v0.3.2</a></li>
</ul>
</li>
<li><a href="#setup">Setup</a></li>
<li><a href="#getting-started">Getting Started</a></li>
<li><a href="#logstash">Loading data into Elasticsearch</a></li>
<li><a href="#kibana-plugins">Kibana Plugins added[4.2]</a></li>
<li><a href="#access">Accessing Kibi</a>
<ul class="sectlevel2">
<li><a href="#status">Checking Kibi Status</a></li>
</ul>
</li>
<li><a href="#discover">Discover</a></li>
<li><a href="#external-datasources">External datasources</a>
<ul class="sectlevel2">
<li><a href="#_configuration">Configuration</a></li>
<li><a href="#entity-selection">Datasource entity selection</a></li>
<li><a href="#datasource-templates">Query templates</a></li>
<li><a href="#datasource-queries">Queries</a></li>
<li><a href="#datasource-uses">Use cases</a></li>
</ul>
</li>
<li><a href="#visualize">Visualize</a>
<ul class="sectlevel2">
<li><a href="#enhanced-search-results">Enhanced search results</a></li>
<li><a href="#templated-query-viewer">Templated query viewer</a></li>
<li><a href="#area-chart">Area Charts</a></li>
<li><a href="#data-table">Data Table</a></li>
<li><a href="#line-chart">Line Charts</a></li>
<li><a href="#markdown-widget">Markdown Widget</a></li>
<li><a href="#metric-chart">Metric</a></li>
<li><a href="#pie-chart">Pie Charts</a></li>
<li><a href="#tilemap">Tile Maps</a></li>
<li><a href="#vertical-bar-chart">Vertical Bar Charts</a></li>
<li><a href="#wordcloud">Kibi Word Cloud</a></li>
<li><a href="#timeline">Kibi Timeline</a></li>
<li><a href="#radar-chart">Radar Chart</a></li>
<li><a href="#graph-browser">Kibi Graph Browser</a></li>
</ul>
</li>
<li><a href="#relational-browsing">Kibi Relational Browsing</a>
<ul class="sectlevel2">
<li><a href="#relational-panel">Relational Panel</a></li>
<li><a href="#relational-filter">Relational filter</a></li>
</ul>
</li>
<li><a href="#dashboard">Dashboard</a></li>
<li><a href="#settings">Settings</a>
<ul class="sectlevel2">
<li><a href="#kbn-settings-indices">Indices</a></li>
<li><a href="#kibi-settings-relations">Relations</a></li>
<li><a href="#kibi-settings-datasources">Datasources</a></li>
<li><a href="#kibi-settings-queries">Queries</a></li>
<li><a href="#kibi-settings-templates">Query Templates</a></li>
<li><a href="#kibi-settings-dashboards-groups">Dashboard Groups</a></li>
<li><a href="#advanced-settings">Advanced</a></li>
<li><a href="#Kibi-server-configuration">Kibi server configuration</a></li>
</ul>
</li>
<li><a href="#production">Using Kibi in a Production Environment</a></li>
<li><a href="#releasenotes">Kibi Release Notes</a>
<ul class="sectlevel2">
<li><a href="#_kibi_0_3_2_release_notes">Kibi 0.3.2 Release Notes</a></li>
<li><a href="#_kibi_0_3_1_and_kibana_4_4_1_release_notes">Kibi 0.3.1 and Kibana 4.4.1 Release Notes</a></li>
<li><a href="#_kibi_0_3_and_kibana_4_4_release_notes">Kibi 0.3 and Kibana 4.4 Release Notes</a></li>
</ul>
</li>
<li><a href="#acknowledgements">Acknowledgements</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kibi is an open source data intelligence platform built upon
<a href="https://www.elastic.co/blog/kibana-4-4-1-and-4-3-2-and-4-1-5">Kibana 4.4.1</a>.</p>
</div>
<div class="paragraph">
<p>Kibi allows to perform complex analytics on large volumes of data by providing
customizable visualizations (charts, maps, metrics and tables) on Elasticsearch
queries; visualizations can be organized into multiple dashboards, presented
in a tabbed user interface.</p>
</div>
<div class="paragraph">
<p>Elasticsearch results can be filtered and augmented by queries on multiple
external datasources such as SQL databases and triplestores; queries on
external datasources can also be used as aggregations in visualizations.</p>
</div>
<div class="paragraph">
<p>In addition to standard Kibana visualizations, Kibi provides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="#relational-filter">Relational Filter</a> visualization, which allows
to configure relations between fields in different indices and apply
cross-dashboard filters (pivoting).</p>
</li>
<li>
<p>The <a href="#relational-panel">Relational Panel</a>, which defines relations between indices by specifying on which fields to join. This enables to browse dashboards as a <strong>connected</strong> set, where filtering one dashboards updates results from the other dashboards.</p>
</li>
<li>
<p>The <a href="#wordcloud">Kibi Word Cloud</a> visualization, which displays a cloud of
high frequency terms from the documents returned by an Elasticsearch query.</p>
</li>
<li>
<p>The <a href="#timeline">Kibi Timeline</a> visualization, which displays a timeline
with multiple groups of data coming from different indices.</p>
</li>
<li>
<p>The <a href="#radar-chart">Radar Chart</a> visualization, which is a <a href="https://en.wikipedia.org/wiki/Radar_chart">graphical method</a> for displaying multivarate data.
with multiple groups of data coming from different indices.</p>
</li>
<li>
<p>The <a href="#enhanced-search-results">Enhanced search results</a> visualization, which
displays query results in a table.</p>
</li>
<li>
<p>The <a href="#templated-query-viewer">Templated Query Viewer</a>, which enables the
visualization of queries on external datasource through Jade or Handlebars
templates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Relational Filter visualization requires the <a href="https://github.com/sirensolutions/siren-join/">Siren Join plugin 2.2.0-1</a> for
Elasticsearch. The plugin is compatible with Elasticsearch 2.2.0-1.</p>
</div>
<h3 id="_how_does_kibi_compare_to_kibana" class="float">How does Kibi compare to Kibana?</h3>
<div class="paragraph">
<p>Kibi is currently developed as a fork of Kibana 4.4.1. The plugin API of <a href="https://www.elastic.co/blog/kibana-4-3-1-and-4-2-2-and-4-1-4">Kibana 4.2.x</a> allows us to keep the amount of forked code to a minimum, but as the API is currently in development, a fork is still needed.</p>
</div>
<div class="sect2">
<h3 id="_what_s_new_in_kibi_v0_3_2">What&#8217;s new in Kibi v0.3.2</h3>
<div class="paragraph">
<p>This new version of Kibi provides many improvements and new features, the main one are listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kibi is merged with <a href="https://www.elastic.co/blog/kibana-4-4-1-and-4-3-2-and-4-1-5">Kibana 4.4.1</a>.</p>
</li>
<li>
<p>Support for new version of elasticsearch v2.2.0.</p>
</li>
<li>
<p>Siren join plugin version upgraded to v2.2.0-1.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="setup">Setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Download and install Java 1.7 or greater from <a href="https://java.com/en/download/" class="bare">https://java.com/en/download/</a>; if
you&#8217;re on a GNU/Linux distribution, install Java through your package manager.</p>
</div>
<div class="paragraph">
<p>After Java has been installed, make sure that the <code>java</code> command is available
in the system path by opening a terminal window and running <code>java -version</code>;
the command should display the version of Java installed on your system.</p>
</div>
<div class="paragraph">
<p>Download the Kibi binary distribution from <a href="http://siren.solutions/kibi" class="bare">http://siren.solutions/kibi</a> and
extract it to a local directory.</p>
</div>
<div class="paragraph">
<p>To start the Elasticsearch cluster included in the distribution, open a
terminal window, change to the directory where you extracted Kibi and run
the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ cd elasticsearch/
$ ./bin/elasticsearch</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re on Windows, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ cd elasticsearch\
$ .\bin\elasticsearch.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>To start Kibi, open a second terminal window, change to the directory where you
extracted Kibi and run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ cd kibi/
$ ./bin/kibi</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you&#8217;re on Windows, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">$ cd kibi\
$ .\bin\kibi.bat</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upon first launch, the Windows firewall might display the following dialog
box; to allow the Kibi backend to connect to external datasources, please
check both check boxes (as shown below) and press the <strong>Allow access</strong> button.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/node-windows-firewall-warning.png" alt="Windows firewall warning">
</div>
</div>
<div class="paragraph">
<p>Kibi can be accessed by visiting <a href="http://localhost:5606/" class="bare">http://localhost:5606/</a>; an overview of the
included demo dataset is available in <a href="#getting-started">Getting started</a>
section.</p>
</div>
<div class="paragraph">
<p>If you want to connect Kibi to a different Elasticsearch cluster, open
the configuration file in <code>kibi/config/kibi.yml</code>, set the correct URL in
the <code>elasticsearch.url</code> parameter, then restart Kibi.</p>
</div>
<h3 id="kibi-dynamic-mapping" class="float">Kibi and Elasticsearch Dynamic Mapping</h3>
<div class="paragraph">
<p>By default, Elasticsearch enables  <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/mapping.html#_dynamic_mapping">dynamic mapping</a> for fields.
Kibi needs dynamic mapping to use fields in visualizations correctly, as well
as to manage the <code>.kibi</code> index where all its configuration is stored.</p>
</div>
<div class="paragraph">
<p>If your Elasticsearch use case requires you to disable dynamic mapping, you
need to manually provide mappings for fields that Kibi uses to create
visualizations.</p>
</div>
<div class="paragraph">
<p>You also need to manually enable dynamic mapping for the <code>.kibi</code> index.</p>
</div>
<div class="paragraph">
<p>The following procedure assumes that the <code>.kibi</code> index does not already exist
in Elasticsearch and that the <code>index.mapper.dynamic</code> setting in
<code>elasticsearch.yml</code> is set to <code>false</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start Elasticsearch.</p>
</li>
<li>
<p>Create the <code>.kibi</code> index with dynamic mapping enabled:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">curl -X PUT &lt;your Elasticsearch URL&gt;/.kibi -d '{ "index.mapper.dynamic": true }'</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Start Kibi, open the UI in your browser and verify that there are no
error messages related to dynamic mapping.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started">Getting Started</h2>
<div class="sectionbody">
<h3 id="_the_demo_distribution" class="float">The demo distribution</h3>
<div class="paragraph">
<p>The quickest way to get started with Kibi is to download the Kibi demo
distribution from <a href="http://siren.solutions/kibi" class="bare">http://siren.solutions/kibi</a> ; the page contains also
introductory screencast which we recommend to watch.</p>
</div>
<div class="paragraph">
<p>The Kibi demo distribution includes a ready to use Elasticsearch cluster in
the <code>elasticsearch</code> directory; the cluster contains five indices:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<code>company</code>
</td>
<td class="hdlist2">
<p>a collection of companies</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>article</code>
</td>
<td class="hdlist2">
<p>a collection of articles about companies</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>investment</code>
</td>
<td class="hdlist2">
<p>a collection of investments in companies</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>investor</code>
</td>
<td class="hdlist2">
<p>a collection of investors</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>.kibi</code>
</td>
<td class="hdlist2">
<p>Kibi configuration</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The indices have been populated through <a href="https://www.elastic.co/products/logstash">Logstash</a>
from the SQLite database in <code>kibi/crunchbase.db</code>; the Logstash configuration
used to populate the indices is described in the <a href="#logstash">Loading data into Elasticsearch</a> chapter.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The demo dataset has been built from a sample of articles gathered from
tech blogs in 2013 and from data about companies, investments and investors in
the CrunchBase 2013 Snapshot, which is copyright &#169; 2013 AOL Inc.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The current CrunchBase dataset is available at <a href="http://data.crunchbase.com/" class="bare">http://data.crunchbase.com/</a>.</p>
</div>
<h3 id="_search" class="float">Search</h3>
<div class="paragraph">
<p>After starting Elasticsearch and Kibi, as described in the <a href="#setup">Setup chapter</a>,
start your web browser and navigate to <a href="http://localhost:5606" class="bare">http://localhost:5606</a> .</p>
</div>
<div class="paragraph">
<p>By default, Kibi displays the <em>Articles</em> dashboard; <a href="#dashboard">dashboards</a>
can be configured to display multiple <a href="#visualize">visualizations</a> on the
documents stored in a specific index or returned by a <a href="#save-search">saved search</a> on an index.</p>
</div>
<div class="paragraph">
<p>Each dashboard is represented by a tab containing the dashboard title and
the number of documents available to visualizations.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-overview.png" alt="The articles dashboard">
</div>
</div>
<div class="paragraph">
<p>You can quickly search specific articles through the search input in the
navigation bar; for example, let&#8217;s find all the articles written about
<em>wireless</em> or <em>wifi</em>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-dashboard-search.png" alt="The dashboard search bar">
</div>
</div>
<div class="paragraph">
<p>We can immediately see that there are 11693 articles about those topics and
all the visualizations are refreshed to aggregate data for this subset of
articles.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
besides simple text, queries in the search bar can be written using the
Lucene <a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html">query
syntax</a>, or <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/query-dsl.html">Elasticsearch Query DSL</a>.
</td>
</tr>
</table>
</div>
<h3 id="_filters" class="float">Filters</h3>
<div class="paragraph">
<p>Visualizations can be used to create filters; for example, you can see all the
articles about <em>wireless</em> or <em>wifi</em> published by TechCrunch by clicking on
the <em>TechCrunch</em> slice inside the <em>Articles by Source</em> <a href="#pie-chart">pie chart</a>
visualization:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-pie-slice.png" alt="Clicking on a pie slice">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-pie-filter.png" alt="The dashboard with the filter on the slice applied">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
To disable a filter, just move the mouse over it and click on the
checkbox icon; you can disable all the filters applied to the dashboard by
clicking on <em>Actions</em> and then <em>Disable</em>; for more information about filtering,
please read the <a href="#visualize-filters">filters</a> chapter.
</td>
</tr>
</table>
</div>
<h3 id="_relational_filters" class="float">Relational filters</h3>
<div class="paragraph">
<p>The <a href="#relational-filter">Relational Filter</a> visualization allows to
create cross-dashboard filters; for example, by looking at the <em>Companies</em>
button in the dashboard, you can see that there are 96 companies mentioned in
the TechCrunch articles about <em>wireless</em> or <em>wifi</em>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-companies-relational-filter.png" alt="A relational filter button">
</div>
</div>
<div class="paragraph">
<p>By clicking on the button, you can switch to the <em>Companies</em> dashboard and
visualize the data about these 96 companies:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-companies-dashboard-overview.png" alt="Relational filter from Articles to Companies">
</div>
</div>
<div class="paragraph">
<p>The relational filter created by clicking on the button is displayed in the
filter bar, and can be disabled or deleted just like any other filter; moving
the mouse over the filter will display the list of joined indices and their
filters:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/relational-filter-explanation.png" alt="Relational filter in the filter bar">
</div>
</div>
<div class="paragraph">
<p>Relational filter can be accumulated; for example, if you click on the
<code>Investment rounds -&#8594;</code> button, you will see data about the 24 investment
rounds related to a subset of 96 companies mentioned in the TechCrunch articles
about <em>wireless</em> or <em>wifi</em>.</p>
</div>
<div class="paragraph">
<p>Click on the <em>Companies</em> tab to go back to the Companies dashboard.</p>
</div>
<div class="paragraph">
<p>To understand how to define a relational filter, click the pencil icon
inside the <em>Relational widget</em> visualization heading; this will open the
configuration editor:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/relational-filter-config.png" alt="Relational filter configuration" width="300">
</div>
</div>
<div class="paragraph">
<p>As you can see, it is possible to set two different values for label displayed
on the button and for the label displayed in the filter; it is also possible
to use a single configuration for all the dashboards, as the visualization will
display only buttons relevant to the currently displayed dashboard.</p>
</div>
<div class="paragraph">
<p>Click on the <em>Dashboard</em> tab to go back to the Companies dashboard.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for more informations about relational filters, please read the
<a href="#relational-filter">Relational filter</a> chapter.
</td>
</tr>
</table>
</div>
<h3 id="_query_based_aggregations" class="float">Query based aggregations</h3>
<div class="paragraph">
<p>It is possible to get additional information about companies by using the
results of queries on SQL databases (or any of the datasources supported by
Kibi) as aggregations on Elasticsearch documents.</p>
</div>
<div class="paragraph">
<p>For example, in the <em>Query on Companies</em> visualization you can see that 40 of
the 96 companies have competitors and 11 of them are in the top 500 companies
by number of employees:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/demo-query-companies.png" alt="SQL based aggregations">
</div>
</div>
<div class="paragraph">
<p><code>Companies "With competitors"</code> and <code>Top 500 companies (HR count)</code> are <a href="#datasource-queries">queries</a>
on the SQLite database; the records returned by the queries are used to filter
Elasticsearch documents, which can be then aggregated in a metric.</p>
</div>
<div class="paragraph">
<p>To better understand this feature, let&#8217;s have a look at the
<code>Top 500 companies (HR count)</code> query; to see the query, click on the <em>Settings</em>
tab, then on <em>Queries</em> and on the <em>Open</em> button:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/settings-queries.png" alt="The query editor">
</div>
</div>
<div class="paragraph">
<p>The query returns the <code>id</code>, <code>label</code> and <code>number_of_employees</code> columns
from the <code>company</code> table for the top 500 companies by number of employees:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">select id, label, number_of_employees
from company
where number_of_employees&gt;0
order by number_of_employees desc
limit 500</code></pre>
</div>
</div>
<div class="paragraph">
<p>Click on the Dashboard tab, then click on the pencil icon in the heading of
the <em>Query on Companies</em> visualization to customize its configuration:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/dashboard-edit-query-vis.png" alt="Editing the Query on Companies visualization">
</div>
</div>
<div class="paragraph">
<p>The <em>metrics</em> section defines the aggregations on Elasticsearch documents,
displayed as columns in the table; the <em>buckets</em> section defines the groups
of Elasticsearch documents aggregated by metrics, displayed as row headers
in the table.</p>
</div>
<div class="paragraph">
<p>By expanding the <em>Split Rows</em> section inside <em>buckets</em> you can see how the
queries are used to define groups of Elasticsearch documents:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/dashboard-edit-query-vis-agg.png" alt="Query on Companies configuration">
</div>
</div>
<div class="paragraph">
<p>Scroll down to see the configuration of the fourth filter:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/query-vis-filter-agg.png" alt="Configuration of an external query terms filter">
</div>
</div>
<div class="paragraph">
<p>The filter is configured to execute the query <code>Top 500 companies (HR count)</code>
on the SQLite database and return the group of Elasticsearch documents from
the current search whose <code>id</code> is equal to one of the id&#8217;s in the query
results; the documents are then processed by the <em>Count</em> metric.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add a new aggregation to show the average number of employees; click
on <em>Add metrics</em> inside the <em>metrics</em> section, then select <code>Metric</code> as the
metric type; select <code>Average</code> as the aggregation and <code>number_of_employees</code>
as the field, the click on the green button to apply changes.</p>
</div>
<div class="paragraph">
<p>Save the visualization by clicking on the <em>Save</em> button, confirm that you
want to overwrite the existing visualization, then click on the <em>Dashboard</em>
tab to see the updated visualization in the <em>Companies</em> dashboard:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/query-vis-avg.png" alt="Average aggregation">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
read the <a href="#aggregation-builder">Aggregation Builder</a> chapter for an in-depth explanation of
aggregations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Besides defining groups to aggregate, queries can be used as filters; click
on the <em>Dashboard</em> tab, then click on the <em>Top-500-companies-(HR-count)</em>
row to see only the 11 companies mentioned in the articles which are also in
the top 500 by number of employees:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/query-vis-filterbar.png" alt="Filter dashboard using a SQL query">
</div>
</div>
<h3 id="_datasource_entity_selection" class="float">Datasource entity selection</h3>
<div class="paragraph">
<p>It is possible to select a company entity (record) in the SQLite database (
and entities in <a href="#external-datasources">external datasources</a> in general) by
clicking on its label in the <em>Companies Table</em>.</p>
</div>
<div class="paragraph">
<p>The selected entity can be used as a parameter in <a href="#datasource-queries">queries</a>;
for example, click on <code>Baidu</code> in <em>Companies Table</em>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/entity-selection.png" alt="Entity selection" width="800">
</div>
</div>
<div class="paragraph">
<p>Selecting an entity enables additional queries on external datasources; for
example, in the <em>Query on Companies</em> visualization you can see that, amongst
the top 500 companies by number of employees mentioned in articles about
<code>wireless</code> or <code>wifi</code>, <code>Baidu</code> has one competitor and there are five companies
in the same domain.
All widgets affected by the selected entity are marked by a purple header.</p>
</div>
<div class="paragraph">
<p>Selecting an entity also enables the display of additional data in the
<em>Company Info</em> visualization; by clicking on the <em>(show)</em> links you can
toggle the list of companies in the same domain and competitors; the data in
the tables is fetched from queries on the SQLite database, using the selected
company ID as a parameter. The queries are rendered using
<a href="#templated-query-viewer">customizable templates</a>, which will be introduced
later.</p>
</div>
<div class="paragraph">
<p>The selected entity appears as a purple box on the right of the filter bar;
to deselect an entity, click on the bin icon displayed when moving the mouse
over the purple box.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for additional documentation about entity selection, please read the
<a href="#entity-selection">Datasource entity selection</a> section in the <a href="#external-datasources">External datasources</a> chapter.
</td>
</tr>
</table>
</div>
<h3 id="_enhanced_search_results" class="float">Enhanced search results</h3>
<div class="paragraph">
<p>The <a href="#enhanced-search-results">Enhanced search results</a> visualization displays the current set of
Elasticsearch documents as a table; for example, <em>Companies Table</em> is
configured to display the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Time (foundation date)</p>
</li>
<li>
<p>label (the company name)</p>
</li>
<li>
<p>description</p>
</li>
<li>
<p>category_code</p>
</li>
<li>
<p>founded_year</p>
</li>
<li>
<p>countrycode</p>
</li>
<li>
<p>Why Relevant? (a <a href="#relational-column">relational column</a>)</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/companies-table.png" alt="Companies table">
</div>
</div>
<div class="paragraph">
<p>By clicking on the pencil icon, you can choose which fields to display and
customize the order of the columns; if the index is time based, the <code>Time</code>
column will be always displayed.</p>
</div>
<div class="paragraph">
<p>For example, expand the first row by clicking on the right arrow, then scroll
down to the <code>homepage_url</code> field and click on the Toggle column icon:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/companies-table-preview.png" alt="Companies table preview">
</div>
</div>
<div class="paragraph">
<p>Click on the arrows to move the column to the desired position:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/companies-table-colmove.png" alt="Column positioning">
</div>
</div>
<h4 id="_click_handlers" class="float">Click handlers</h4>
<div class="paragraph">
<p>You can define click handlers on cells to perform several actions; let&#8217;s add a
click handler to open the company homepage when clicking on the cell displaying
the URL.</p>
</div>
<div class="paragraph">
<p>The table is pre-configured with a click handler on <code>label</code> that is used to
select an entity in the SQLite database.</p>
</div>
<div class="paragraph">
<p>To add a new click handler, scroll down <em>view options</em> and click on
<em>Add click handler</em>; select <code>homepage_url</code> in the <em>Column</em> dropdown, then
<code>Follow the URL</code> in the <em>On click I want to</em> dropdown. Select <code>homepage_url</code>
as the <em>URL field</em>, then click on the green button to apply changes.</p>
</div>
<div class="paragraph">
<p>You can test the click handler immediately by clicking on a cell displaying
an homepage URL in the preview displayed on the right:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/click-handler-url.png" alt="URL click handler">
</div>
</div>
<h4 id="_relational_column" class="float">Relational column</h4>
<div class="paragraph">
<p>The relational column can be enabled to display if an Elasticsearch document
is matched by a query on the SQLite database.</p>
</div>
<div class="paragraph">
<p>For example, in the <em>Companies Table</em>, you can see that <code>Verizon</code> is in the
top 50 companies by number of employees by looking at the Why Relevant? column
because the <code>label-not-analyzed</code> field of the corresponding Elasticsearch
document is matched by the <code>label</code> column in at least one of the records
returned by the <code>Top 50 companies (HR count)</code> query.</p>
</div>
<div class="paragraph">
<p>Queries set in the relational column configuration can also take the selected
entity as a parameter, so you can see that <code>Yahoo!</code> is both a competitor and
a company in the same domain as <code>Baidu</code>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/relational-column-example.png" alt="Relational column example">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/relational-column-config.png" alt="Relational column configuration">
</div>
</div>
<h4 id="_saving_the_visualization" class="float">Saving the visualization</h4>
<div class="paragraph">
<p>Click on the save button in the top right to save the visualization, then
click on the <em>Dashboard</em> tab to go back to the Companies dashboard.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for additional documentation about this visualization, please read the
<a href="#enhanced-search-results">Enhanced search results</a> chapter.
</td>
</tr>
</table>
</div>
<h3 id="_query_templates" class="float">Query templates</h3>
<div class="paragraph">
<p><em>Company Info</em>, which is an instance of a Templated query viewer visualization,
displays the results of three SQL queries by rendering their results through
templates; the queries take the selected entity ID as an input, thus the
associated templates will be displayed only when an entity is selected.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/templated-query-viewer.png" alt="Templated query viewer example">
</div>
</div>
<div class="paragraph">
<p>The association between query and templates can be set in the visualization
configuration:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/getting-started/templated-query-viewer-config.png" alt="Templated query viewer configuration">
</div>
</div>
<div class="paragraph">
<p>Query templates can be managed by clicking on the <em>Settings</em> tab, then on the
<em>Query templates</em> tab.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
you can find the documentation about templates in the
<a href="#external-datasources">External datasources</a> chapter; the visualization is documented in the
<a href="#templated-query-viewer">Templated query viewer</a> chapter.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="logstash">Loading data into Elasticsearch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter contains basic information on how to load data into Elasticsearch
for evaluation purposes.</p>
</div>
<h3 id="_from_a_sql_database_using_logstash" class="float">From a SQL database using Logstash</h3>
<div class="paragraph">
<p>The indices in the Kibi demo distribution have been populated by running
four <a href="https://www.elastic.co/products/logstash">Logstash</a> configurations over
the SQLite database in <code>kibi/crunchbase.db</code>.</p>
</div>
<div class="paragraph">
<p>The database has the following schema:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/logstash/crunchbase-schema.png" alt="SQLite database schema">
</div>
</div>
<h4 id="_index_setup" class="float">Index setup</h4>
<div class="paragraph">
<p>Before loading data, we need to setup indices and mappings; for
example, let&#8217;s create an index called <code>company-minimal</code> in the Elasticsearch
cluster at <code><a href="http://localhost:9220" class="bare">http://localhost:9220</a></code>.</p>
</div>
<div class="paragraph">
<p>Create the index by running the following command in a terminal window:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -X PUT http://localhost:9220/company-minimal</code></pre>
</div>
</div>
<div class="paragraph">
<p>If curl is not available on your system, please download it from
<a href="http://curl.haxx.se/download.html" class="bare">http://curl.haxx.se/download.html</a> .</p>
</div>
<div class="paragraph">
<p>If the index is created correctly, Elasticsearch will return the following
response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{"acknowledged":true}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to destroy the index and start from scratch, execute the following
command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -X DELETE http://localhost:9220/company-minimal</code></pre>
</div>
</div>
<h4 id="_mapping_definition" class="float">Mapping definition</h4>
<div class="paragraph">
<p>Mappings allow to configure how documents are stored in the index; for example,
they allow to define how fields are matched by the search engine and set their
type (string, dates, numbers, locations etc.).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for detailed documentation about indices and mappings we recommend
reading the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/index.html">Elasticsearch Reference</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s define a simple mapping to describe a company; the mapping will define
the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: the id of the company in the SQLite database</p>
</li>
<li>
<p><code>name</code>: the name of the company</p>
</li>
<li>
<p><code>description</code>: a description of the company</p>
</li>
<li>
<p><code>homepage</code>: the URL of the company homepage</p>
</li>
<li>
<p><code>number_of_employees</code>: the number of employees</p>
</li>
<li>
<p><code>location</code>: the geographical coordinates of the company</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Open a text editor and paste the following text:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "CompanyMinimal": {
        "properties": {
            "id": {
                "index": "not_analyzed",
                "type": "string"
            },
            "number_of_employees": {
                "type": "long"
            },
            "name": {
                "index": "analyzed",
                "type": "string"
            },
            "description": {
                "index": "analyzed",
                "type": "string"
            },
            "homepage": {
                "index": "not_analyzed",
                "type": "string"
            },
            "location": {
                "geohash": true,
                "type": "geo_point"
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>CompanyMinimal</code> is the name of the mapping; <code>properties</code> contains the
indexing options for each field.</p>
</div>
<div class="paragraph">
<p>The <code>type</code> attribute specifies the field type; the example mapping contains
four strings, a number and a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/mapping-geo-point-type.html">geo_point</a>,
which allows to perform geographically aware search queries.</p>
</div>
<div class="paragraph">
<p>The <code>index</code> attribute in each field definition is used to control how the
field will be handled by search engine; if set to <code>not_analyzed</code>, the search
engine will match a document only if its field value is equal to the value
set in the search query, if set to <code>analyzed</code> the field value will be processed
by an analyzer to allow full-text queries.</p>
</div>
<div class="paragraph">
<p>It is also possible to set the <code>index</code> attribute to <code>no</code> to make the search
engine ignore the field.</p>
</div>
<div class="paragraph">
<p>Save the file to <code>demo/sql/crunchbase/conf/logstash_sqlite/mappings/CompanyMinimal.mapping</code>
inside the directory where you extracted the demo distribution.</p>
</div>
<div class="paragraph">
<p>To apply the mapping, go to the <code>demo/sql/crunchbase/conf/logstash_sqlite</code>
directory and execute the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl -X PUT "http://localhost:9220/company-minimal/_mapping/CompanyMinimal" -d "@mappings/CompanyMinimal.mapping"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the mapping is created correctly, Elasticsearch will return the following
response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{"acknowledged":true}</code></pre>
</div>
</div>
<h4 id="_sql_query_definition" class="float">SQL query definition</h4>
<div class="paragraph">
<p>To extract the values that will be loaded to the index by Logstash, we need to
write a SQL query; open a text editor and paste the following one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">SELECT id,
  label AS name,
  description,
  homepage_url as homepage,
  number_of_employees,
  CASE WHEN lat IS NULL THEN
    NULL
  ELSE
    lat || ', ' || lng
  END AS location
  FROM company
  LEFT JOIN company_geolocation ON company.id = company_geolocation.companyid</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save the file to <code>demo/sql/crunchbase/conf/logstash_sqlite/company-minimal.sql</code>
inside the directory where you extracted the demo distribution.</p>
</div>
<h4 id="_logstash_configuration" class="float">Logstash configuration</h4>
<div class="paragraph">
<p>We now need to write a Logstash configuration to process the records returned
by the query and populate the <code>company-minimal</code> index.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
support for SQL databases is provided by the
<a href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-jdbc.html">Logstash jdbc input plugin</a>;
the plugin comes pre-installed in the Logstash binary bundled in the demo.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Open a text editor and paste the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">input {
  jdbc {
    jdbc_driver_library =&gt; "sqlitejdbc-v056.jar"
    jdbc_driver_class =&gt; "org.sqlite.JDBC"
    jdbc_connection_string =&gt; "jdbc:sqlite:crunchbase.db"
    jdbc_user =&gt; ""
    jdbc_password =&gt; ""
    statement_filepath =&gt; "company-minimal.sql"
    jdbc_paging_enabled =&gt; true
    jdbc_page_size =&gt; 10000
  }
}

filter {
  mutate {
    remove_field =&gt; ["@timestamp", "@version"]
  }
}

output {
  elasticsearch {
    host =&gt; "localhost"
    protocol =&gt; "http"
    port =&gt; 9220
    manage_template =&gt; false
    action =&gt; "index"
    index =&gt; "company-minimal"
    document_type =&gt; "CompanyMinimal"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>statement_filepath</code> parameter specifies the path to the file containing
the SQL query; the <code>jdbc_*</code> parameters set the database connection string and
authentication options.</p>
</div>
<div class="paragraph">
<p>The <code>mutate</code> filter is configured to remove default Logstash fields which
are not needed in the destination index.</p>
</div>
<div class="paragraph">
<p>The <code>output</code> section specifies the destination index; <code>manage_template</code> is
set to <code>false</code> as the index mapping has been explicitly defined in the
previous steps.</p>
</div>
<div class="paragraph">
<p>Save the file to <code>demo/sql/crunchbase/conf/logstash_sqlite/company-minimal.conf</code>
inside the directory where you extracted the demo distribution.</p>
</div>
<div class="paragraph">
<p>Copy the SQLite database to <code>demo/sql/crunchbase/conf/logstash_sqlite/crunchbase.db</code>,
then go to the <code>demo/sql/crunchbase/conf/logstash_sqlite</code> directory and run the
following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">../../../../../logstash/bin/logstash -f company-minimal.conf</code></pre>
</div>
</div>
<div class="paragraph">
<p>Logstash will execute the query and populate the index.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
for more information about Logstash, we recommend reading the
<a href="https://www.elastic.co/guide/en/logstash/current/index.html">Logstash reference</a>
and the <a href="https://www.elastic.co/guide/en/logstash/current/plugins-inputs-jdbc.html">jdbc input plugin</a>
documentation.
</td>
</tr>
</table>
</div>
<h4 id="_browsing_the_index_in_kibi" class="float">Browsing the index in Kibi</h4>
<div class="paragraph">
<p>Open <a href="http://localhost:5606" class="bare">http://localhost:5606</a> in your browser, click on the <em>Settings</em> tab then
on <em>Indices</em> .</p>
</div>
<div class="paragraph">
<p>Deselect <em>Index contains time-based events</em>, then write <code>company-minimal</code> in
the <em>Index name or pattern</em> field:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/logstash/company-minimal-index.png" alt="Adding the company-minimal index">
</div>
</div>
<div class="paragraph">
<p>Click on <em>Create</em> to create the the index reference, then click on the
<em>Discover</em> tab and select <em>company-minimal</em> in the dark grey dropdown:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/logstash/company-minimal-index.png" alt="Discovering the company-minimal index">
</div>
</div>
<div class="paragraph">
<p>Click on the right arrow at the beginning of each row to expand it and see all
the loaded fields:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/logstash/company-minimal-expand.png" alt="Viewing all the fields in a document">
</div>
</div>
<h4 id="_demo_distribution_data_loading_script" class="float">Demo distribution data loading script</h4>
<div class="paragraph">
<p>The complete demo data loading process can be repeatead by running the
<code>demo/sql/bin/index_crunchbase_sqlite.sh</code> script; the script performs the
following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creates a copy of the database in the directory containing Logstash
configurations</p>
</li>
<li>
<p>Creates the indices <code>article</code>, <code>company</code>, <code>investor</code> and <code>investment</code></p>
</li>
<li>
<p>Sets the mappings for each index</p>
</li>
<li>
<p>Runs the logstash configuration for each index</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Logstash configurations and Elasticsearch mappings are available in the
<code>demo/sql/crunchbase/conf/logstash_sqlite</code> directory.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="kibana-plugins">Kibana Plugins added[4.2]</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Add-on functionality for Kibana is implemented with plug-in modules. You can use the <code>bin/kibana plugin</code>
command to manage these modules. You can also install a plugin manually by moving the plugin file to the
<code>installedPlugins</code> directory and unpacking the plugin files into a new directory.</p>
</div>
<h3 id="_installing_plugins" class="float">Installing Plugins</h3>
<div class="paragraph">
<p>Use the following command to install a plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin --install &lt;org&gt;/&lt;package&gt;/&lt;version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use <code>-i</code> instead of <code>--install</code>, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin -i elasticsearch/marvel/latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the organization given is <code>elasticsearch</code>, the plugin management tool automatically downloads the
plugin from <code>download.elastic.co</code>.</p>
</div>
<h3 id="_installing_plugins_from_an_arbitrary_url" class="float">Installing Plugins from an Arbitrary URL</h3>
<div class="paragraph">
<p>You can specify a URL to a plugin with the <code>-u</code> or <code>--url</code> options after the <code>-i</code> or <code>--install</code> option, as in the
following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin -i sample-plugin -u https://some.sample.url/directory
Installing sample-plugin
Attempting to extract from https://some.sample.url/directory
Downloading &lt;some number&gt; bytes....................
Extraction complete
Optimizing and caching browser bundles...
Plugin installation complete</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify URLs that use the HTTP, HTTPS, or <code>file</code> protocols.</p>
</div>
<h3 id="_installing_plugins_to_an_arbitrary_directory" class="float">Installing Plugins to an Arbitrary Directory</h3>
<div class="paragraph">
<p>Use the <code>-d</code> or <code>--plugin-dir</code> option to specify a directory for plugins, as in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin -i elasticsearch/sample-plugin/latest -d &lt;path/to/directory&gt;
Installing sample-plugin
Attempting to extract from https://download.elastic.co/elasticsearch/sample-plugin/sample-plugin-latest.tar.gz
Downloading &lt;some number&gt; bytes....................
Extraction complete
Optimizing and caching browser bundles...
Plugin installation complete</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
This command creates the specified directory if it does not already exist.
</td>
</tr>
</table>
</div>
<h3 id="_removing_plugins" class="float">Removing Plugins</h3>
<div class="paragraph">
<p>Use the <code>--remove</code> or <code>-r</code> option to remove a plugin, including any configuration information, as in the following
example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin --remove marvel</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also remove a plugin manually by deleting the plugin&#8217;s subdirectory under the <code>installedPlugins</code> directory.</p>
</div>
<h3 id="_updating_plugins" class="float">Updating Plugins</h3>
<div class="paragraph">
<p>To update a plugin, remove the current version and reinstall the plugin.</p>
</div>
<h3 id="_configuring_the_plugin_manager" class="float">Configuring the Plugin Manager</h3>
<div class="paragraph">
<p>By default, the plugin manager provides you with feedback on the status of the activity you&#8217;ve asked the plugin manager
to perform. You can control the level of feedback with the <code>--quiet</code> and <code>--silent</code> options. Use the <code>--quiet</code> option to
suppress all non-error output. Use the <code>--silent</code> option to suppress all output.</p>
</div>
<div class="paragraph">
<p>By default, plugin manager requests do not time out. Use the <code>--timeout</code> option, followed by a time, to change this
behavior, as in the following examples:</p>
</div>
<div class="listingblock">
<div class="title">Waits for 30 seconds before failing</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin --install username/sample-plugin --timeout 30s</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Waits for 1 minute before failing</div>
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">bin/kibana plugin --install username/sample-plugin --timeout 1m</code></pre>
</div>
</div>
<h4 id="_plugins_and_custom_kibana_configurations" class="float">Plugins and Custom Kibana Configurations</h4>
<div class="paragraph">
<p>Use the <code>-c</code> or <code>--config</code> options to specify the path to the configuration file used to start Kibana. By default, Kibana
uses the configuration file <code>config/kibana.yml</code>. When you change your installed plugins, the <code>bin/kibana plugin</code> command
restarts the Kibana server. When you are using a customized configuration file, you must specify the
path to that configuration file each time you use the <code>bin/kibana plugin</code> command.</p>
</div>
<h3 id="_plugin_manager_exit_codes" class="float">Plugin Manager Exit Codes</h3>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
0
</td>
<td class="hdlist2">
<p>Success</p>
</td>
</tr>
<tr>
<td class="hdlist1">
64
</td>
<td class="hdlist2">
<p>Unknown command or incorrect option parameter</p>
</td>
</tr>
<tr>
<td class="hdlist1">
74
</td>
<td class="hdlist2">
<p>I/O error</p>
</td>
</tr>
<tr>
<td class="hdlist1">
70
</td>
<td class="hdlist2">
<p>Other error</p>
</td>
</tr>
</table>
</div>
<h2 id="plugin-switcher" class="float">Switching Plugin Functionality</h2>
<div class="paragraph">
<p>The Kibana UI serves as a framework that can contain several different plugins. You can switch between these
plugins by clicking the <span class="image"><img src="images/app-button.png" alt="Plugin Chooser"></span> <strong>Plugin chooser</strong> button to display icons for the
installed plugins:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/app-picker.png" alt="app picker">
</div>
</div>
<div class="paragraph">
<p>Click a plugin&#8217;s icon to switch to that plugin&#8217;s functionality.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="access">Accessing Kibi</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kibi is a web application that you access through port 5606. All you need to do is point your web browser at the
machine where Kibana is running and specify the port number. For example, <code>localhost:5606</code> or
<code><a href="http://YOURDOMAIN.com:5606" class="bare">http://YOURDOMAIN.com:5606</a></code>.</p>
</div>
<div class="paragraph">
<p>When you access Kibi, the <a href="#discover">Discover</a> page loads by default with the default index pattern selected. The
time filter is set to the last 15 minutes and the search query is set to match-all (\*).</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t see any documents, try setting the time filter to a wider time range.
If you still don&#8217;t see any results, it&#8217;s possible that you don&#8217;t <strong>have</strong> any documents.</p>
</div>
<div class="sect2">
<h3 id="status">Checking Kibi Status</h3>
<div class="paragraph">
<p>You can reach the Kibi server&#8217;s status page by navigating to <code>localhost:5606/status</code>. The status page displays
information about the server&#8217;s resource usage and lists the installed plugins.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/kibi-status-page.png" alt="kibi status page">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="discover">Discover</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can interactively explore your data from the Discover page. You have access to every document in every index that
matches the selected index pattern. You can submit search queries, filter the search results, and view document data.
You can also see the number of documents that match the search query and get field value statistics. If a time field is
configured for the selected index pattern, the distribution of documents over time is displayed in a histogram at the
top of the page.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As the discover functionality has not been modified by Kibi, we quote here the original Kibana documentation.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Discover-Start-Annotated.jpg" alt="Discover Page"></span></p>
</div>
<h3 id="set-time-filter" class="float">Setting the Time Filter</h3>
<div class="paragraph">
<p>The Time Filter restricts the search results to a specific time period. You can set a time filter if your index
contains time-based events and a time-field is configured for the selected index pattern.</p>
</div>
<div class="paragraph">
<p>By default the time filter is set to the last 15 minutes. You can use the Time Picker to change the time filter
or select a specific time interval or time range in the histogram at the top of the page.</p>
</div>
<div class="paragraph">
<p>To set a time filter with the Time Picker:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the Time Filter displayed in the upper right corner of the menu bar to open the Time Picker.</p>
</li>
<li>
<p>To set a quick filter, simply click one of the shortcut links.</p>
</li>
<li>
<p>To specify a relative Time Filter, click <strong>Relative</strong> and enter the relative start time. You can specify
the relative start time as any number of seconds, minutes, hours, days, months, or years ago.</p>
</li>
<li>
<p>To specify an absolute Time Filter, click <strong>Absolute</strong> and enter the start date in the <strong>From</strong> field and the end date in
the <strong>To</strong> field.</p>
</li>
<li>
<p>Click the caret at the bottom of the Time Picker to hide it.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To set a Time Filter from the histogram, do one of the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the bar that represents the time interval you want to zoom in on.</p>
</li>
<li>
<p>Click and drag to view a specific timespan. You must start the selection with the cursor over the background of the
chart&#8212;&#8203;the cursor changes to a plus sign when you hover over a valid start point.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the browser Back button to undo your changes.</p>
</div>
<div class="paragraph">
<p>The histogram lists the time range you&#8217;re currently exploring, as well as the intervals that range is currently using.
To change the intervals, click the link and select an interval from the drop-down. The default behavior automatically
sets an interval based on the time range.</p>
</div>
<h3 id="search" class="float">Searching Your Data</h3>
<div class="paragraph">
<p>You can search the indices that match the current index pattern by submitting a search from the Discover page.
You can enter simple query strings, use the Lucene <a href="https://lucene.apache.org/core/2_9_4/queryparsersyntax.html">query
syntax</a>, or use the full JSON-based <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2//query-dsl.html">Elasticsearch Query DSL</a>.</p>
</div>
<div class="paragraph">
<p>When you submit a search, the histogram, Documents table, and Fields list are updated to reflect
the search results. The total number of hits (matching documents) is shown in the upper right corner of the
histogram. The Documents table shows the first five hundred hits. By default, the hits are listed in reverse
chronological order, with the newest documents shown first. You can reverse the sort order by by clicking on the Time
column header. You can also sort the table using the values in any indexed field. For more information, see <a href="#sorting">Sorting the Documents Table</a>.</p>
</div>
<div class="paragraph">
<p>To search your data:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enter a query string in the Search field:</p>
<div class="ulist">
<ul>
<li>
<p>To perform a free text search, simply enter a text string. For example, if you&#8217;re searching web server logs, you
could enter <code>safari</code> to search all fields for the term <code>safari</code>.</p>
</li>
<li>
<p>To search for a value in a specific field, you prefix the value with the name of the field. For example, you could
enter <code>status:200</code> to limit the results to entries that contain the value <code>200</code> in the <code>status</code> field.</p>
</li>
<li>
<p>To search for a range of values, you can use the bracketed range syntax, <code>[START_VALUE TO END_VALUE]</code>. For example,
to find entries that have 4xx status codes, you could enter <code>status:[400 TO 499]</code>.</p>
</li>
<li>
<p>To specify more complex search criteria, you can use the Boolean operators <code>AND</code>, <code>OR</code>, and <code>NOT</code>. For example,
to find entries that have 4xx status codes and have an extension of <code>php</code> or <code>html</code>, you could enter <code>status:[400 TO
499] AND (extension:php OR extension:html)</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
These examples use the Lucene query syntax. You can also submit queries using the Elasticsearch Query DSL. For
examples, see <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2//query-dsl-query-string-query.html#query-string-syntax">query string syntax</a> in the Elasticsearch
Reference.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Press <strong>Enter</strong> or click the <strong>Search</strong> button to submit your search query.</p>
</li>
</ol>
</div>
<h4 id="new-search" class="float">Starting a New Search</h4>
<div class="paragraph">
<p>To clear the current search and start a new search, click the <strong>New Search</strong> button in the Discover toolbar.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Discover-New-Search.jpg" alt="New Search"></span></p>
</div>
<h4 id="save-search" class="float">Saving a Search</h4>
<div class="paragraph">
<p>You can reload saved searches on the Discover page and use them as the basis of <a href="#visualize">visualizations</a>.
Saving a search saves both the search query string and the currently selected index pattern.</p>
</div>
<div class="paragraph">
<p>To save the current search:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Save Search</strong> button <span class="image"><img src="images/SaveButton.jpg" alt="Save Search button"></span> in the Discover toolbar.</p>
</li>
<li>
<p>Enter a name for the search and click <strong>Save</strong>.</p>
</li>
</ol>
</div>
<h4 id="load-search" class="float">Loading a Saved Search</h4>
<div class="paragraph">
<p>To load a saved search:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Load Search</strong> button <span class="image"><img src="images/LoadButton.jpg" alt="Load Search button"></span> in the Discover toolbar.</p>
</li>
<li>
<p>Select the search you want to load.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If the saved search is associated with a different index pattern than is currently selected, loading the saved search
also changes the selected index pattern.</p>
</div>
<h4 id="select-pattern" class="float">Changing Which Indices You&#8217;re Searching</h4>
<div class="paragraph">
<p>When you submit a search request, the indices that match the currently-selected index pattern are searched. The current
index pattern is shown below the search field. To change which indices you are searching, click the name of the current
index pattern to display a list of the configured index patterns and select a different index pattern.</p>
</div>
<div class="paragraph">
<p>For more information about index patterns, see <a href="#settings-create-pattern">Creating an Index Pattern</a>.</p>
</div>
<h3 id="auto-refresh" class="float">Automatically Refreshing the Page</h3>
<div class="paragraph">
<p>You can configure a refresh interval to automatically refresh the page with the latest index data. This periodically
resubmits the search query.</p>
</div>
<div class="paragraph">
<p>When a refresh interval is set, it is displayed to the left of the Time Filter in the menu bar.</p>
</div>
<div class="paragraph">
<p>To set the refresh interval:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Time Filter</strong> <span class="image"><img src="images/TimeFilter.jpg" alt="Time Filter"></span> in the upper right corner of the menu bar.</p>
</li>
<li>
<p>Click the <strong>Refresh Interval</strong> tab.</p>
</li>
<li>
<p>Choose a refresh interval from the list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To automatically refresh the data, click the <span class="image"><img src="images/autorefresh.png" alt="autorefresh"></span> <strong>Auto-refresh</strong> button and select an
autorefresh interval:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/autorefresh-intervals.png" alt="autorefresh intervals">
</div>
</div>
<div class="paragraph">
<p>When auto-refresh is enabled, Kibi&#8217;s top bar displays a pause button and the auto-refresh interval:
<span class="image"><img src="images/autorefresh-pause.png" alt="autorefresh-pause"></span>. Click the <strong>Pause</strong> button to pause auto-refresh.</p>
</div>
<h3 id="field-filter" class="float">Filtering by Field</h3>
<div class="paragraph">
<p>You can filter the search results to display only those documents that contain a particular value in a field. You can
also create negative filters that exclude documents that contain the specified field value.</p>
</div>
<div class="paragraph">
<p>You can add filters from the Fields list or from the Documents table. When you add a filter, it is displayed in the
filter bar below the search query. From the filter bar, you can enable or disable a filter, invert the filter (change
it from a positive filter to a negative filter and vice-versa), toggle the filter on or off, or remove it entirely.
Click the small left-facing arrow to the right of the index pattern selection drop-down to collapse the Fields list.</p>
</div>
<div class="paragraph">
<p>To add a filter from the Fields list:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the name of the field you want to filter on. This displays the top five values for that field. To the right of
each value, there are two magnifying glass buttons&#8212;&#8203;one for adding a regular (positive) filter, and
one for adding a negative filter.</p>
</li>
<li>
<p>To add a positive filter, click the <strong>Positive Filter</strong> button <span class="image"><img src="images/PositiveFilter.jpg" alt="Positive Filter Button"></span>.
This filters out documents that don&#8217;t contain that value in the field.</p>
</li>
<li>
<p>To add a negative filter, click the <strong>Negative Filter</strong> button <span class="image"><img src="images/NegativeFilter.jpg" alt="Negative Filter Button"></span>.
This excludes documents that contain that value in the field.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To add a filter from the Documents table:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Expand a document in the Documents table by clicking the <strong>Expand</strong> button <span class="image"><img src="images/ExpandButton.jpg" alt="Expand Button"></span>
to the left of the document&#8217;s entry in the first column (the first column is usually Time). To the right of each field
name, there are two magnifying glass buttons&#8212;&#8203;one for adding a regular (positive) filter, and one for adding a negative
filter.</p>
</li>
<li>
<p>To add a positive filter  based on the document&#8217;s value in a field, click the
<strong>Positive Filter</strong> button <span class="image"><img src="images/PositiveFilter.jpg" alt="Positive Filter Button"></span>. This filters out documents that don&#8217;t
contain the specified value in that field.</p>
</li>
<li>
<p>To add a negative filter based on the document&#8217;s value in a field, click the
<strong>Negative Filter</strong> button <span class="image"><img src="images/NegativeFilter.jpg" alt="Negative Filter Button"></span>. This excludes documents that contain
the specified value in that field.</p>
</li>
</ol>
</div>
<h3 id="discover-filters" class="float">Working with Filters</h3>
<div class="paragraph">
<p>When you create a filter anywhere in Kibi, the filter conditions display in a green oval under the search text
entry box:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-sample.png" alt="filter sample">
</div>
</div>
<div class="paragraph">
<p>Hovering on the filter oval displays the following icons:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-allbuttons.png" alt="filter allbuttons">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Enable Filter <span class="image"><img src="images/filter-enable.png" alt="filter-enable"></span></dt>
<dd>
<p>Click this icon to disable the filter without removing it. You can
enable the filter again later by clicking the icon again. Disabled filters display a striped shaded color, green for
inclusion filters and red for exclusion filters.</p>
</dd>
<dt class="hdlist1">Pin Filter <span class="image"><img src="images/filter-pin.png" alt="filter-pin"></span></dt>
<dd>
<p>Click this icon to <em>pin</em> a filter. Pinned filters persist across Kibi tabs.
You can pin filters from the <em>Visualize</em> tab, click on the <em>Discover</em> or <em>Dashboard</em> tabs, and those filters remain in
place.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have a pinned filter and you&#8217;re not seeing any query results, check that your current tab&#8217;s index pattern is one
that the filter applies to. E.g. a filter "name:giovanni" will results in 0 results if pinned and therefore "dragged along" to a dashboard whose underlying index does not have a "name" field, let alone a "giovanni" value. For this reason a good pattern in Kibi is to use <em>Dashboard Groups</em> to group together dashboard which are based on the same underlying index. In this case the user can safely pin and "drag along" a filter across dashboards in the same group.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Toggle Filter <span class="image"><img src="images/filter-toggle.png" alt="filter-toggle"></span></dt>
<dd>
<p>Click this icon to <em>toggle</em> a filter. By default, filters are inclusion
filters, and display in green. Only elements that match the filter are displayed. To change this to an exclusion
filters, displaying only elements that <em>don&#8217;t</em> match, toggle the filter. Exclusion filters display in red.</p>
</dd>
<dt class="hdlist1">Remove Filter <span class="image"><img src="images/filter-delete.png" alt="filter-delete"></span></dt>
<dd>
<p>Click this icon to remove a filter entirely.</p>
</dd>
<dt class="hdlist1">Custom Filter <span class="image"><img src="images/filter-custom.png" alt="filter-custom"></span></dt>
<dd>
<p>Click this icon to display a text field where you can customize the JSON
representation of the filter and specify an alias to use for the filter name:</p>
<div class="imageblock">
<div class="content">
<img src="images/filter-custom-json.png" alt="filter custom json">
</div>
</div>
<div class="paragraph">
<p>You can use JSON filter representation to implement predicate logic, with <code>should</code> for OR, <code>must</code> for AND, and <code>must_not</code>
for NOT:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. OR Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "should": [
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "China"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 2. AND Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.city_name.raw": "New York"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 3. NOT Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must_not": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Click the <strong>Done</strong> button to update the filter with your changes.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To apply any of the filter actions to all the filters currently in place, click the <span class="image"><img src="images/filter-actions.png" alt="filter-actions"></span>
<strong>Global Filter Actions</strong> button and select an action.</p>
</div>
<h3 id="document-data" class="float">Viewing Document Data</h3>
<div class="paragraph">
<p>When you submit a search query, the 500 most recent documents that match the query are listed in the Documents table.
You can configure the number of documents shown in the table by setting the <code>discover:sampleSize</code> property in
<a href="#advanced-settings">Advanced Settings</a>. By default, the table shows the localized version of the time field specified
in the selected index pattern and the document <code>_source</code>. You can <a href="#adding-columns">add fields to the Documents table</a>
from the Fields list. You can <a href="#sorting">sort the listed documents</a> by any indexed field that&#8217;s included in the table.</p>
</div>
<div class="paragraph">
<p>To view a document&#8217;s field data, click the <strong>Expand</strong> button <span class="image"><img src="images/ExpandButton.jpg" alt="Expand Button"></span> to the left of
the document&#8217;s entry in the first column (the first column is usually Time). Kibi reads the document data from
Elasticsearch and displays the document fields in a table. The table contains a row for each field that contains the
name of the field, add filter buttons, and the field value.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Expanded-Document.png" alt="Expanded Document">
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>To view the original JSON document (pretty-printed), click the <strong>JSON</strong> tab.</p>
</li>
<li>
<p>To view the document data as a separate page, click the link. You can bookmark and share this link to provide direct
access to a particular document.</p>
</li>
<li>
<p>To collapse the document details, click the <strong>Collapse</strong> button <span class="image"><img src="images/CollapseButton.jpg" alt="Collapse Button"></span>.</p>
</li>
<li>
<p>To toggle a particular field&#8217;s column in the Documents table, click the
<span class="image"><img src="images/add-column-button.png" alt="Add Column"></span> <strong>Toggle column in table</strong> button.</p>
</li>
</ol>
</div>
<h4 id="sorting" class="float">Sorting the Document List</h4>
<div class="paragraph">
<p>You can sort the documents in the Documents table by the values in any indexed field. If a time field is configured for
the selected index pattern, by default the documents are sorted in reverse chronological order.</p>
</div>
<div class="paragraph">
<p>To change the sort order:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the name of the field you want to sort by. The fields you can use for sorting have a sort button to the right
of the field name. Clicking the field name a second time reverses the sort order.</p>
</li>
</ul>
</div>
<h4 id="adding-columns" class="float">Adding Field Columns to the Documents Table</h4>
<div class="paragraph">
<p>By default, the Documents table shows the localized version of the time field specified in the selected index pattern
and the document <code>_source</code>. You can add fields to the table from the Fields list or from a document&#8217;s expanded view.</p>
</div>
<div class="paragraph">
<p>To add field columns to the Documents table:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mouse over a field in the Fields list and click its  <strong>add</strong> button <span class="image"><img src="images/AddFieldButton.jpg" alt="Add Field Button"></span>.</p>
</li>
<li>
<p>Repeat until you&#8217;ve added all the fields you want to display in the Documents table.</p>
</li>
<li>
<p>Alternately, add a field column directly from a document&#8217;s expanded view by clicking the
<span class="image"><img src="images/add-column-button.png" alt="Add Column"></span> <strong>Toggle column in table</strong> button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The added field columns replace the <code>_source</code> column in the Documents table. The added fields are also
listed in the <strong>Selected Fields</strong> section at the top of the field list.</p>
</div>
<div class="paragraph">
<p>To rearrange the field columns in the table, mouse over the header of the column you want to move and click the <strong>Move</strong>
button.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Discover-MoveColumn.jpg" alt="Move Column"></span></p>
</div>
<h4 id="removing-columns" class="float">Removing Field Columns from the Documents Table</h4>
<div class="paragraph">
<p>To remove field columns from the Documents table:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Mouse over the field you want to remove in the <strong>Selected Fields</strong> section of the Fields list and click its <strong>remove</strong>
button <span class="image"><img src="images/RemoveFieldButton.jpg" alt="Remove Field Button"></span>.</p>
</li>
<li>
<p>Repeat until you&#8217;ve removed all the fields you want to drop from the Documents table.</p>
</li>
</ol>
</div>
<h3 id="viewing-field-stats" class="float">Viewing Field Data Statistics</h3>
<div class="paragraph">
<p>From the field list, you can see how many documents in the Documents table contain a particular field, what the top 5
values are, and what percentage of documents contain each value.</p>
</div>
<div class="paragraph">
<p>To view field data statistics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the name of a field in the Fields list. The field can be anywhere in the Fields list&#8212;&#8203;Selected Fields,  Popular
Fields, or the list of other fields.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/Discover-FieldStats.jpg" alt="Field Statistics"></span></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
To create a visualization based on the field, click the <strong>Visualize</strong> button below the field statistics.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="external-datasources">External datasources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kibi provides visualizations and aggregations to integrate data from external
datasources; this section explains how to setup datasources and configure
<a href="#datasource-queries">queries</a> and <a href="#datasource-templates">query templates</a>.</p>
</div>
<div class="sect2">
<h3 id="_configuration">Configuration</h3>
<div class="paragraph">
<p>To create a new external datasource navigate to "Setttings/Datasources"
First fill datasource title, name and pick the type
Kibi supports following datasource types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>REST</p>
</li>
<li>
<p>SQLite</p>
</li>
<li>
<p>MySQL</p>
</li>
<li>
<p>PostgreSQL</p>
</li>
<li>
<p>Sparql over http - any SPARQL HTTP endpoint (tested with Openlink Virtuoso and Joseki)</p>
</li>
<li>
<p>SQL JDBC - <strong>experimental</strong> JDBC support for SQL (tested with <a href="http://www.h2database.com/html/main.html">H2</a>).</p>
</li>
<li>
<p>SPARQL JDBC - <strong>experimental</strong> JDBC support for SPARQL</p>
</li>
<li>
<p>Kibi Tinkerpop3 - <strong>experimental</strong> support for Kibi Gremlin Server</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>After selecting the datasource type additional parameters will appear.
Below list of additional mandatory parameters for each datasource type:</p>
</div>
<div class="paragraph">
<p><strong>REST</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>url - an URL of rest API endpoint</p>
</li>
<li>
<p>response_type - API results format, currently Kibi supports only <strong>JSON</strong></p>
</li>
<li>
<p>username (optional) - username with access to the API</p>
</li>
<li>
<p>password (optional) - corresponding password</p>
</li>
<li>
<p>auth_token (optional) - token used in Token Authentication</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>SQLite</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>db_file_path - path to database file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>MySQL, PostgreSQL</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>host - hostname</p>
</li>
<li>
<p>dbname - database name</p>
</li>
<li>
<p>username - username with read access to the database</p>
</li>
<li>
<p>password - corresponding password</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Sparql over http</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>endpoint_url - url of the SPARQL http endpoint</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>SQL JDBC, SPARQL JDBC</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>drivername - e.g.: "org.postgresql.Driver"</p>
</li>
<li>
<p>libpath - absolute path to the driver jar file e.g.: "/otp/dbdrivers/postgresql-9.4-1201.jdbc41.jar"</p>
</li>
<li>
<p>connection_string - JDBC connection string without username and password e.g.: "jdbc:postgresql://localhost/mydatabase"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To enable query results caching, set the <code>datasource_enable_cache</code> parameter
to <code>true</code>; the cache size and max age (in milliseconds) can be set through the
<code>datasource_cache_size</code> and <code>datasource_cache_max_age</code> parameters.</p>
</div>
<div class="paragraph">
<p>A Kibi restart is required to apply configuration changes.</p>
</div>
<div class="paragraph">
<p><strong>Kibi Tinkerpop3</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>url - url of the Kibi Gremlin Server e.g.: <a href="http://localhost:8080/graph/query" class="bare">http://localhost:8080/graph/query</a></p>
</li>
<li>
<p>timeout - the server may take more than 1 seconds to load big graphs e.g.: 10000</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Sensitive datasource configuration elements like passwords are encrypted.
Make sure to change <strong>datasource_encryption_key</strong> in kibi.yml. To do it use scripts
provided in <em>bin/</em> folder.</p>
</div>
<div class="paragraph">
<p>Linux:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>bin/replace_encryption_key.sh OLD_KEY ALGORITHM NEW_KEY PATH_TO_KIBI_YML</code></pre>
</div>
</div>
<div class="paragraph">
<p>Windows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>bin\replace_encryption_key.bat OLD_KEY ALGORITHM NEW_KEY PATH_TO_KIBI_YML</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Make sure to set the configuration file as readable only to the user running
the Kibi process as it contains the <strong>datasource_encryption_key</strong>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="entity-selection">Datasource entity selection</h3>
<div class="paragraph">
<p>Selected Entities can be used to as source of parameters for queries
Each selected entity is uniquely identified by an URI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>INDEX/TYPE/ID</code> where INDEX is an index pattern, TYPE is a type of a document, and ID is document ID</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As explained in the following sections, queries on external datasources can
extract variables from the selected entity URI; in order to allow the user
to select an entity, you must add an <a href="#enhanced-search-results">Enhanced search results</a> visualization
to a dashboard and configure at least one <a href="#click-handlers">click handler</a>
to select an entity.</p>
</div>
<div class="paragraph">
<p>Once the visualization is configured, clicking on the cell will display
a purple box in the filter bar, and the variables stored in the entity URI
will be available to queries and query templates.</p>
</div>
<div class="paragraph">
<p>The screenshot below shows the effect of clicking on a cell configured with an
entity selection handler; after selecting an entity, the <em>Company Info</em>
template viewer shows the information about the company fetched by a query.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/entity-selection.png" alt="Entity selection">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/entity-selection-config-sample.png" alt="Entity selection configuration example">
</div>
</div>
<div class="paragraph">
<p>To disable or cancel the selection, click on the icons displayed inside the
entity selection widget when the mouse is over it, as displayed in the
screenshot below:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/entity-selection-hover.png" alt="Entity selection options">
</div>
</div>
</div>
<div class="sect2">
<h3 id="datasource-templates">Query templates</h3>
<div class="paragraph">
<p>You can define templates to format query results.</p>
</div>
<div class="paragraph">
<p>Kibi supports two template engines:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://jade-lang.com/">jade</a></p>
</li>
<li>
<p><a href="http://handlebarsjs.com/">handlebars</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There are three pre-defined templates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>kibi-json-jade</em>: this template presents the query results as a pretty-printed
JSON object using the <em>jade</em> engine. This is useful to test queries while
writing them.</p>
</li>
<li>
<p><em>kibi-table-jade</em>: this template displays the query results in a table,
using the <em>jade</em> engine.</p>
</li>
<li>
<p><em>kibi-table-handlebars</em>: like <em>kibi-table-jade</em>, using the <em>handlebars</em>
engine instead.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can define your own custom template by clicking on the <em>Settings / Templates</em>
tab.</p>
</div>
<div class="paragraph">
<p>Then, pick the engine you prefer and write the template; to see a preview,
click on the <em>save</em> button and select a query from the list;
depending on the query you selected, the <a href="#query-variables"><em>EntityURI</em></a> may
need to be set.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/templates-editor.png" alt="Query template editor">
</div>
</div>
</div>
<div class="sect2">
<h3 id="datasource-queries">Queries</h3>
<div class="paragraph">
<p>Queries can be used to provide data to <a href="#datasource-templates">Query templates</a>,
<a href="#relational-column">tag</a> and filter Elasticsearch documents.</p>
</div>
<div class="paragraph">
<p>To create a new query, click to the <em>"Settings/Queries"</em> tab.</p>
</div>
<div class="paragraph">
<p>You need then to set the following fields to define a query:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Title</em>: the title of the query.</p>
</li>
<li>
<p><em>Datasource</em>: the name of a configured datasource.</p>
</li>
<li>
<p><em>Results query</em>: the query declaration.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may also set a description for the query and one or more tags.</p>
</div>
<div class="paragraph">
<p>Below is an example configuration of a query on a SQL database
called <strong>Top 50 companies (HR count)</strong> that returns the Top 50 companies by
number of employees in a table called <code>company</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/queries-editor-sql1.png" alt="Configuration of a SQL endpoint">
</div>
</div>
<div class="paragraph">
<p>The preview section will display the results of the query as a table or as a
JSON object.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Template rendering is currently a blocking operation, therefore queries returning a large number of results might make the backend unresponsive for an indeterminate amount of time.
</td>
</tr>
</table>
</div>
<h4 id="query-variables" class="float">Query variables:</h4>
<div class="paragraph">
<p>One of the most useful features of queries is that it is possible to set some
of their parameters before execution by using datasource specific variables,
which can be set at runtime by configuring <a href="#click-handlers">click handlers</a>
in the <a href="#enhanced-search-results">Enhanced search results</a> visualization to select an entity.</p>
</div>
<div class="paragraph">
<p>Variable values are taken from elasticsearch document selected via selected entity URI.</p>
</div>
<div class="paragraph">
<p>All properties from selected document can be accessed using the following syntax:
<em>@doc[PATH_ELEMENT_1][PATH_ELEMENT_2]&#8230;&#8203;[PATH_ELEMENT_N]@</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p>to get the document id use:
<strong>@doc[_id]@</strong></p>
</li>
<li>
<p>to get the value of property called <strong>action</strong> use:
<strong>@doc[_source][action]@</strong></p>
</li>
<li>
<p>to get the value of nested property called <strong>person.age</strong> use:
<strong>@doc[_source][person][age]@</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to view the results of the query, you have to specify an entity URI
manually in the field on the top right;</p>
</div>
<div class="paragraph">
<p>Below is an example of configuration for a query named <strong>Company Info</strong> using
a variable to get the value of property called <strong>id</strong> of currently selected entity
In the example, <em>@doc[_source][id]@</em> is replaced with an id taken from selected company.
In the Selected Entity box we see that the selected company is
from index: <strong>company</strong>, has a type: <strong>Company</strong> and has the id <strong>AU9r0i2d0nSzQcsnt</strong></p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/query-table-var.png" alt="SQL query with variables">
</div>
</div>
<h4 id="activation-query" class="float">Activation Query</h4>
<div class="paragraph">
<p>An activation query can be specified to conditionally execute the results
query.</p>
</div>
<div class="paragraph">
<p>For example, if you have a table called <em>Vehicles</em> but some of the queries are
only relevant to "Motorcycles" and not to "Cars", the activation query could
be used to determine if the results query should be executed when an entity in
<em>Vehicles</em> by looking at its type.
If the query is not executed, any template or aggregator using the query
will be automatically disabled.</p>
</div>
<div class="paragraph">
<p>On SQL datasources, activation queries will trigger results query execution
when returning at least one record.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sql" data-lang="sql">SELECT id
FROM Vehicles
WHERE id='@doc[_source][id]@' AND vehicle_type='Motorcycle'</code></pre>
</div>
</div>
<div class="paragraph">
<p>On SPARQL datasources, activation queries must be written using the <em>ASK</em> form;
the corresponding results query will be executed only if the query has a
solution.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sparql" data-lang="sparql">PREFIX vehicle: &lt;http://ontologies.example.org/vehicle#&gt;

ASK {
    &lt;@doc[_source][uri]@&gt; a vehicle:Motorcycle
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="datasource-uses">Use cases</h3>
<div class="paragraph">
<p>Once you&#8217;ve configured query templates and queries, you can use them
in the following visualizations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="#enhanced-search-results">Enhanced search results</a> visualization</p>
</li>
<li>
<p>The <a href="#templated-query-viewer">Templated query viewer</a> visualization</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is also possible to use queries as aggregations as explained below.</p>
</div>
<div class="sect3">
<h4 id="external-query-terms-filter-aggregation">External query terms filters aggregation</h4>
<div class="paragraph">
<p>The query results from an external data source can be used as an aggregation
in visualizations.</p>
</div>
<div class="paragraph">
<p>This allows to compute metrics on Elasticsearch documents <em>joined</em> with query
results.</p>
</div>
<div class="paragraph">
<p>To use a query as an aggregation, select a bucket type and select
<em>External Query Terms Filter</em> in the <em>Aggregation</em> dropdown; then, click on
the <em>Add an external query terms filter</em> button.</p>
</div>
<div class="paragraph">
<p>You can then configure how to join the query results with the Elasticsearch
documents by setting the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Source query id</em>: the name of the query on the external datasource.</p>
</li>
<li>
<p><em>Source query variable</em>: the name of the variable in query results
which contains the first value used in the join.</p>
</li>
<li>
<p><em>Target field</em>: the name of the field in the target index which contains
the second value used in the join.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The aggregation will return only documents in the Elasticsearch index whose
target field value is equal to the source query variable value in at least
one of the results returned by the query; if <em>Negate the query</em> is checked,
the aggregation will return only documents in the Elasticsearch index whose
target field value is not equal to any of the values of the source query
variable in the results returned by the query.</p>
</div>
<div class="paragraph">
<p>For example, the screenshot below show the configuration of a Data table
visualization with three aggregations based on external queries:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A query that selects the labels of the competitors of the currently selected
company</p>
</li>
<li>
<p>A query that selects the labels of all the companies which have a competitor</p>
</li>
<li>
<p>A query that selects the id&#8217;s of the top 500 companies by number of employees</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a query requires a selected entity, and no entity is selected, the
computed aggregation will return 0, also the controls to select <strong>Selected entity</strong>
will indicate (red borders arround) that it is necessary to select one.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/relational-filter-config.png" alt="Configuration of an external query terms filter aggregation on a data table visualization">
</div>
</div>
<div class="paragraph">
<p>The screenshot below shows the configuration of two external query terms
filter aggregation on a pie chart visualization:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/external-sources/relational-filter-config-2.png" alt="Configuration of an external query terms filter aggregation on a pie chart visualization">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="visualize">Visualize</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Visualization management has not been modified by Kibi; we quote the
original Kibana documentation for all the standard data aggregations
integrated with Kibi specific features were applicable.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use the <em>Visualize</em> page to design data visualizations. You can save these visualizations, use
them individually, or combine visualizations into a <em>dashboard</em>. A visualization can be based on one of the following
data source types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A new interactive search</p>
</li>
<li>
<p>A saved search</p>
</li>
<li>
<p>An existing saved visualization</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Kibana visualizations are based on the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations.html">aggregation</a> feature introduced in Elasticsearch 1.x.</p>
</div>
<h3 id="createvis" class="float">Creating a New Visualization</h3>
<div class="paragraph">
<p>To start the New Visualization wizard, click on the <strong>Visualize</strong> tab at the top left of the page. If you are already
creating a visualization, you can click the <strong>New Visualization</strong> button <span class="image"><img src="images/K4NewDocument.png" alt="New Document button"></span> in the toolbar to the right of the search bar. The wizard guides you through the following steps:</p>
</div>
<h4 id="newvis01" class="float">Step 1: Choose the Visualization Type</h4>
<div class="paragraph">
<p>Choose a visualization type when you start the New Visualization wizard:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<a href="#enhanced-search-results">Enhanced search results</a>
</td>
<td class="hdlist2">
<p>Display an interactive
table of documents returned by an Elasticsearch query.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#templated-query-viewer">Templated Query Viewer</a>
</td>
<td class="hdlist2">
<p>Display the results of
queries on external datasources in Jade/Handlebards templates.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#relational-filter">Relational Filter</a>
</td>
<td class="hdlist2">
<p>Apply cross-dashboard filters
based on the relations between different indices.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#area-chart">Area chart</a>
</td>
<td class="hdlist2">
<p>Use area charts to visualize the total contribution of several different series.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#data-table">Data table</a>
</td>
<td class="hdlist2">
<p>Use data tables to display the raw data of a composed aggregation. You can display the data
table for several other visualizations by clicking at the bottom of the visualization.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#line-chart">Line chart</a>
</td>
<td class="hdlist2">
<p>Use line charts to compare different series.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#markdown-widget">Markdown widget</a>
</td>
<td class="hdlist2">
<p>Use the Markdown widget to display free-form information or instructions about your
dashboard.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#metric-chart">Metric</a>
</td>
<td class="hdlist2">
<p>Use the metric visualization to display a single number on your dashboard.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#pie-chart">Pie chart</a>
</td>
<td class="hdlist2">
<p>Use pie charts to display each source&#8217;s contribution to a total.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#tilemap">Tile map</a>
</td>
<td class="hdlist2">
<p>Use tile maps to associate the results of an aggregation with geographic points.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#vertical-bar-chart">Vertical bar chart</a>
</td>
<td class="hdlist2">
<p>Use vertical bar charts as a general-purpose chart.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#wordcloud">Kibi Word Cloud</a>
</td>
<td class="hdlist2">
<p>Display a cloud of high frequency terms in a document collection.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#timeline">Kibi Timeline</a>
</td>
<td class="hdlist2">
<p>Displays series of data coming from different
saved searches on a single timeline component.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<a href="#radar-chart">Radar Chart</a>
</td>
<td class="hdlist2">
<p>Display multivariate data with a two-dimensional chart.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also load a saved visualization that you created earlier. The saved visualization selector includes a text
field to filter by visualization name and a link to the Object Editor, accessible through <strong>Settings &gt; Edit Saved
Objects</strong>, to manage your saved visualizations.</p>
</div>
<div class="paragraph">
<p>If your new visualization is a Markdown widget, selecting that type takes you to a text entry field where you enter the
text to display in the widget. For all other types of visualization, selecting the type takes you to data source
selection.</p>
</div>
<h4 id="newvis02" class="float">Step 2: Choose a Data Source</h4>
<div class="paragraph">
<p>You can choose a new or saved search to serve as the data source for your visualization. Searches are associated with
an index or a set of indices. When you select <em>new search</em> on a system with multiple indices configured, select an
index pattern from the drop-down to bring up the visualization editor.</p>
</div>
<div class="paragraph">
<p>When you create a visualization from a saved search and save the visualization, the search is tied to the visualization.
When you make changes to the search that is linked to the visualization, the visualization updates automatically.</p>
</div>
<h4 id="visualization-editor" class="float">Step 3: The Visualization Editor</h4>
<div class="paragraph">
<p>The visualization editor enables you to configure and edit visualizations. The visualization editor has the following
main elements:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#toolbar-panel">Toolbar</a></p>
</li>
<li>
<p><a href="#aggregation-builder">Aggregation Builder</a></p>
</li>
<li>
<p><a href="#preview-canvas">Preview Canvas</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/VizEditor.jpg" alt="VizEditor"></span></p>
</div>
<h3 id="viz-autorefresh" class="float">Automatically Refreshing the Page</h3>
<div class="paragraph">
<p>You can configure a refresh interval to automatically refresh the page with the latest index data. This periodically
resubmits the search query.</p>
</div>
<div class="paragraph">
<p>When a refresh interval is set, it is displayed to the left of the Time Filter in the menu bar.</p>
</div>
<div class="paragraph">
<p>To set the refresh interval:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Time Filter</strong> <span class="image"><img src="images/TimeFilter.jpg" alt="Time Filter"></span> in the upper right corner of the menu bar.</p>
</li>
<li>
<p>Click the <strong>Refresh Interval</strong> tab.</p>
</li>
<li>
<p>Choose a refresh interval from the list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To automatically refresh the data, click the <span class="image"><img src="images/autorefresh.png" alt="autorefresh"></span> <strong>Auto-refresh</strong> button and select an
autorefresh interval:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/autorefresh-intervals.png" alt="autorefresh intervals">
</div>
</div>
<div class="paragraph">
<p>When auto-refresh is enabled, Kibi&#8217;s top bar displays a pause button and the auto-refresh interval:
<span class="image"><img src="images/autorefresh-pause.png" alt="autorefresh-pause"></span>. Click the <strong>Pause</strong> button to pause auto-refresh.</p>
</div>
<h5 id="toolbar-panel" class="float">Toolbar</h5>
<div class="paragraph">
<p>The toolbar has a search field for interactive data searches, as well as controls to manage saving and loading
visualizations. For visualizations based on saved searches, the search bar is grayed out. To edit the search, replacing
the saved search with the edited version, double-click the search field.</p>
</div>
<div class="paragraph">
<p>The toolbar at the right of the search box has buttons for creating new visualizations, saving the current
visualization, loading an existing visualization, sharing or embedding the visualization, and refreshing the data for
the current visualization.</p>
</div>
<h5 id="aggregation-builder" class="float">Aggregation Builder</h5>
<div class="paragraph">
<p>Use the aggregation builder on the left of the page to configure the
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics">metric</a> and <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket.html">bucket</a> aggregations used in your
visualization. Buckets are analogous to SQL <code>GROUP BY</code> statements. For more information on aggregations, see the main
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations.html">Elasticsearch aggregations reference</a>.</p>
</div>
<div class="paragraph">
<p>In addition to standard Elasticsearch aggregations, Kibi adds the
<em>External Query Terms Filter</em> aggregation, which is described in the <a href="#external-datasources">External datasources</a> chapter.</p>
</div>
<div class="paragraph">
<p>Bar, line, or area chart visualizations use <em>metrics</em> for the y-axis and <em>buckets</em> are used for the x-axis, segment bar
colors, and row/column splits. For pie charts, use the metric for the slice size and the bucket for the number of
slices.</p>
</div>
<div class="paragraph">
<p>Choose the metric aggregation for your visualization&#8217;s Y axis, such as
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html">count</a>,
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html">average</a>,
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html">sum</a>,
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html">min</a>,
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html">max</a>, or
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html">cardinality</a>
(unique count). Use bucket aggregations for the visualization&#8217;s X axis, color slices, and row/column splits. Common
bucket aggregations include date histogram, range, terms, filters, and significant terms.</p>
</div>
<div class="paragraph">
<p>You can set the order in which buckets execute. In Elasticsearch, the first aggregation determines the data set
for any subsequent aggregations. The following example involves a date bar chart of Web page hits for the top 5 file
extensions.</p>
</div>
<div class="paragraph">
<p>To use the same extension across all hits, set this order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Color:</strong> Terms aggregation of extensions</p>
</li>
<li>
<p><strong>X-Axis:</strong> Date bar chart of <code>@timestamp</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Elasticsearch collects the records for the top 5 extensions, then creates a date bar chart for each extension.</p>
</div>
<div class="paragraph">
<p>To chart the top 5 extensions for each hour, use the following order:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>X-Axis:</strong> Date bar chart of <code>@timestamp</code> (with 1 hour interval)</p>
</li>
<li>
<p><strong>Color:</strong> Terms aggregation of extensions</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For these requests, Elasticsearch creates a date bar chart from all the records, then groups the top five extensions
inside each bucket, which in this example is a one-hour interval.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Remember, each subsequent bucket slices the data from the previous bucket.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To render the visualization on the <em>preview canvas</em>, click the green <strong>Apply Changes</strong> button at the top right of the
Aggregation Builder.</p>
</div>
<div class="paragraph">
<p>You can learn more about aggregation and how altering the order of aggregations affects your visualizations
<a href="https://www.elastic.co/blog/kibana-aggregation-execution-order-and-you">here</a>.</p>
</div>
<h3 id="visualize-filters" class="float">Working with Filters</h3>
<div class="paragraph">
<p>When you create a filter anywhere in Kibi, the filter conditions display in a green oval under the search text
entry box:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-sample.png" alt="filter sample">
</div>
</div>
<div class="paragraph">
<p>Hovering on the filter oval displays the following icons:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-allbuttons.png" alt="filter allbuttons">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Enable Filter <span class="image"><img src="images/filter-enable.png" alt="filter-enable"></span></dt>
<dd>
<p>Click this icon to disable the filter without removing it. You can
enable the filter again later by clicking the icon again. Disabled filters display a striped shaded color, green for
inclusion filters and red for exclusion filters.</p>
</dd>
<dt class="hdlist1">Pin Filter <span class="image"><img src="images/filter-pin.png" alt="filter-pin"></span></dt>
<dd>
<p>Click this icon to <em>pin</em> a filter. Pinned filters persist across Kibi tabs.
You can pin filters from the <em>Visualize</em> tab, click on the <em>Discover</em> or <em>Dashboard</em> tabs, and those filters remain in
place.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have a pinned filter and you&#8217;re not seeing any query results, check that your current tab&#8217;s index pattern is one
that the filter applies to. E.g. a filter "name:giovanni" will results in 0 results if pinned and therefore "dragged along" to a dashboard whose underlying index does not have a "name" field, let alone a "giovanni" value. For this reason a good pattern in Kibi is to use <em>Dashboard Groups</em> to group together dashboard which are based on the same underlying index. In this case the user can safely pin and "drag along" a filter across dashboards in the same group.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Toggle Filter <span class="image"><img src="images/filter-toggle.png" alt="filter-toggle"></span></dt>
<dd>
<p>Click this icon to <em>toggle</em> a filter. By default, filters are inclusion
filters, and display in green. Only elements that match the filter are displayed. To change this to an exclusion
filters, displaying only elements that <em>don&#8217;t</em> match, toggle the filter. Exclusion filters display in red.</p>
</dd>
<dt class="hdlist1">Remove Filter <span class="image"><img src="images/filter-delete.png" alt="filter-delete"></span></dt>
<dd>
<p>Click this icon to remove a filter entirely.</p>
</dd>
<dt class="hdlist1">Custom Filter <span class="image"><img src="images/filter-custom.png" alt="filter-custom"></span></dt>
<dd>
<p>Click this icon to display a text field where you can customize the JSON
representation of the filter and specify an alias to use for the filter name:</p>
<div class="imageblock">
<div class="content">
<img src="images/filter-custom-json.png" alt="filter custom json">
</div>
</div>
<div class="paragraph">
<p>You can use JSON filter representation to implement predicate logic, with <code>should</code> for OR, <code>must</code> for AND, and <code>must_not</code>
for NOT:</p>
</div>
<div class="exampleblock">
<div class="title">Example 4. OR Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "should": [
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "China"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 5. AND Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.city_name.raw": "New York"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 6. NOT Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must_not": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Click the <strong>Done</strong> button to update the filter with your changes.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To apply any of the filter actions to all the filters currently in place, click the <span class="image"><img src="images/filter-actions.png" alt="filter-actions"></span>
<strong>Global Filter Actions</strong> button and select an action.</p>
</div>
<h5 id="preview-canvas" class="float">Preview Canvas</h5>
<div class="paragraph">
<p>The preview canvas displays a preview of the visualization you&#8217;ve defined in the aggregation builder. To refresh the
visualization preview, clicking the <strong>Refresh</strong> button <span class="image"><img src="images/K4Refresh.png" alt="Refresh button"></span> on the toolbar.</p>
</div>
<div class="sect2">
<h3 id="enhanced-search-results">Enhanced search results</h3>
<div class="paragraph">
<p>Enhanced search results is a visualisation that shows the documents matched by
a query on an Elasticsearch index, similar to the Kibana Discover table.</p>
</div>
<div class="paragraph">
<p>In addition to column configuration, the visualization provides the following
features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>it is possible to enable a column that indicates whether or not a search
result is matched by a query on an external datasource. This is described in
<a href="#relational-column">Relational Column</a>.</p>
</li>
<li>
<p>it is possible to define click handlers on the cells in a column, e.g.
to open the URL displayed in a cell. This is described in <a href="#click-handlers">Click handlers</a>.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/config.png" alt="Configuration view of the Enhanced search results table">
</div>
</div>
<h4 id="relational-column" class="float">Relational Column</h4>
<div class="paragraph">
<p>The relational column can be used to display if a search result is matched
by a query on an external datasource.</p>
</div>
<div class="paragraph">
<p>To enable the relational column, check the <em>Enable Relational Column</em> checkbox.</p>
</div>
<div class="paragraph">
<p>The screenshot below shows the configuration of a relational column named
<em>Why Relevant?</em> where the value of a cell depends on the query
<em>Top 50 companies (HR count)</em>: if the value of the <em>label</em> <strong>index field</strong> of a
document matches the value of the <em>label</em> variable in at least one record
returned by the query, the name of the query will be displayed inside the cell.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/relational-column-config.png" alt="Relational column configuration">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/relational-column-sample.png" alt="Relational column example">
</div>
</div>
<div class="paragraph">
<p>In order to configure the relational column, you must set the following
parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Column name</em>: the column name that will be displayed in the table header.</p>
</li>
<li>
<p><em>Source Field</em>: the name of the index field that will be compared to a
variable in the query results.</p>
</li>
<li>
<p><em>Target query</em>: the name of the query to execute.</p>
</li>
<li>
<p><em>Target query variable name</em>: the name of the query variable that will be
compared to the index field specified in <em>Source field</em>.</p>
</li>
</ul>
</div>
<h4 id="click-handlers" class="float">Click handlers</h4>
<div class="paragraph">
<p>It is possible to define two different actions when clicking on a cell;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Open an URL defined in the corresponding index field.</p>
</li>
<li>
<p>Select an entity in an external datasource matching the corresponding index
field.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="click-handlers-follow-url">Follow URL</h4>
<div class="paragraph">
<p>Select the <em>Follow URL</em> action to open a URL stored in an index field in a
new window.</p>
</div>
<div class="paragraph">
<p>For example, the following configuration defines an handler that opens the
URL stored in the field <em>homepage_url</em> when clicking on the cell
displaying the <em>label</em> field.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/click-follow-url.png" alt="Follow URL on click">
</div>
</div>
<div class="paragraph">
<p>To configure a click handler, you must set the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Column</em>&#8201;&#8212;&#8201;the name of the column to which the handler will be bound.</p>
</li>
<li>
<p><em>On click I want to</em>&#8201;&#8212;&#8201;the action to perform on click.</p>
</li>
<li>
<p><em>URL field</em>&#8201;&#8212;&#8201;the name of the field containing the URL.</p>
</li>
<li>
<p><em>URL format</em>&#8201;&#8212;&#8201;a custom format string to compose the URL, where <em>@URL@</em> is
replaced with the value of the field set in <em>URL field</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>URL format</em> can be used to create dynamic URL; the screenshot
below shows a configuration in which the value of the the <em>id</em> field is
used to define the path of an URL on example.org.</p>
</div>
<div class="paragraph">
<p>With this configuration, if the <em>id</em> field is set to 11 the resulting URL
will be <em><a href="http://example.org/11" class="bare">http://example.org/11</a></em> .</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/click-follow-url_custom-format.png" alt="Follow URL with a custom format on click">
</div>
</div>
</div>
<div class="sect3">
<h4 id="click-handlers-select-entity">Select an entity</h4>
<div class="paragraph">
<p>Select the <em>Select an entity</em> action if you want to select an entity stored
in an external datasource matching the selected Elasticsearch document;
for more information about entity selection, please read the <a href="#entity-selection">Datasource entity selection</a>
section.</p>
</div>
<div class="paragraph">
<p>To configure an entity selection action you must set the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Column</em>&#8201;&#8212;&#8201;the name of the column to which the handler will be bound.</p>
</li>
<li>
<p><em>Selected entity URI scheme</em>&#8201;&#8212;&#8201;the data source type.</p>
</li>
<li>
<p><em>URI format</em>&#8201;&#8212;&#8201;a format string used to compose the entity URI.</p>
</li>
<li>
<p><em>Redirect to dashboard</em>&#8201;&#8212;&#8201;if set, clicking on the cell will select the
entity and display the specified dashboard.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_sql">SQL</h5>
<div class="paragraph">
<p>When the data source is a SQL database, you must set two additional parameters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>Table name</em>&#8201;&#8212;&#8201;the name of the table in which the entity is stored; sets
the value of the <em>@TABLE@</em> variable in the query at runtime.</p>
</li>
<li>
<p><em>PKVALUE field</em>&#8201;&#8212;&#8201;the value of the field which identifies the entity;
sets the value of the <em>@PKVALUE@</em> variable in the query at runtime.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the screenshot below, the value of the field <em>id</em> in the clicked document
will set the value of the <em>@PKVALUE@</em> variable, while the value of the
<em>@TABLE@</em> variable will not bet set (because the query doesn&#8217;t make use of
the variable).</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/click-select-entity_sql.png" alt="Configuration of an entity selection handler on a SQL datasource">
</div>
</div>
</div>
<div class="sect4">
<h5 id="_sparql">SPARQL</h5>
<div class="paragraph">
<p>When the data source is a SPARQL endpoint, you must set which index field
stores the entity URI; it is possible to customize the URI by customizing the
<em>URI format</em> field.</p>
</div>
<div class="paragraph">
<p>In the screenshot below, <em>id</em> is chosen.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/enhanced-search-results/click-select-entity_sparql.png" alt="Configuration of an entity selection handler on a SPARQL datasource">
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="templated-query-viewer">Templated query viewer</h3>
<div class="paragraph">
<p>This visualization displays the results from multiple queries on external
data sources using query templates.</p>
</div>
<div class="paragraph">
<p>To add a query to the visualization, click on the <em>Add query</em> button, then
set the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Source query</em>: the query used by the template.</p>
</li>
<li>
<p><em>Template</em>: the template used to render results returned by <em>Source query</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If one of the source queries requires an entity to be selected, you can set
an entity URI for testing in the input field above the preview.</p>
</div>
<div class="paragraph">
<p>If a source query is not <a href="#activation-query">activated</a>, the corresponding
template will not be rendered.</p>
</div>
<div class="paragraph">
<p>The screenshots below show the configuration and output of a Templated query
viewer visualization for a selected company:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/templated-query-viewer/templated-query-viewer-config.png" alt="Configuration of a templated query viewer visualization">
</div>
</div>
<h4 id="templated-query-viewer-advanced" class="float">Advanced options</h4>
<div class="paragraph">
<p>By clicking on the <em>Advanced</em> link, you can set additional rendering options.</p>
</div>
<div class="paragraph">
<p>It is possible to set additional template variables by writing them as JSON
object properties in the <em>Template variables</em> textarea.</p>
</div>
<div class="paragraph">
<p>For example, to customize the heading of the <a href="#datasource-templates">generic table template</a>,
which is set by default to the id of the source query, you can customize the
<code>label</code> variable as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
    "label": "Info"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, template contents are hidden and can be displayed by clicking on
the <em>show</em> link in the heading; to make template contents visible by default,
check <em>Render opened</em> box.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/templated-query-viewer/templated-query-viewer-advanced.png" alt="Advanced options">
</div>
</div>
</div>
<div class="sect2">
<h3 id="area-chart">Area Charts</h3>
<div class="paragraph">
<p>This chart&#8217;s Y axis is the <em>metrics</em> axis. The following aggregations are available for this axis:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Percentiles</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-aggregation.html"><em>percentile</em></a> aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the <strong>Percentiles</strong> fields. Click the <strong>X</strong> to remove a percentile field. Click <strong>+ Add</strong> to add a
percentile field.</p>
</dd>
<dt class="hdlist1"><strong>Percentile Rank</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-rank-aggregation.html"><em>percentile ranks</em></a>
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the <strong>Values</strong> fields. Click the <strong>X</strong> to remove a
values field. Click <strong>+Add</strong> to add a values field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can add an aggregation by clicking the <strong>+ Add Aggregation</strong> button.</p>
</div>
<div class="paragraph">
<p>The X axis of this chart is the <em>buckets</em> axis. You can define buckets for the X axis, for a split area on the
chart, or for split charts.</p>
</div>
<div class="paragraph">
<p>This chart&#8217;s X axis supports the following aggregations. Click the linked name of each aggregation to visit the main
Elasticsearch documentation for that aggregation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/common-options.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter. Click the images:labelbutton.png[] <strong>label</strong> button to open the label field, where you can type in a
name to display on the visualization.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation.</p>
</dd>
<dt class="hdlist1"><strong>External source query filter</strong></dt>
<dd>
<p>a Kibi aggregator where one can define one or more buckets based on some record value (typically a primary key) matching the results of an external query. Multiple such buckets, corresponding to multiple queries, can be defined. For more information see the <em>query</em> menu in the configuration.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once you&#8217;ve specified an X axis aggregation, you can define sub-aggregations to refine the visualization. Click <strong>+ Add
Sub Aggregation</strong> to define a sub-aggregation, then choose <strong>Split Area</strong> or <strong>Split Chart</strong>, then select a sub-aggregation
from the list of types.</p>
</div>
<div class="paragraph">
<p>When multiple aggregations are defined on a chart&#8217;s axis, you can use the up or down arrows to the right of the
aggregation&#8217;s type to change the aggregation&#8217;s priority.
For example, a chart of dates with incident counts can display dates in chronological order, or you can raise the
priority of the incident-reporting aggregation to show the most active dates first. The chronological order might show
a time-dependent pattern in incident count, and sorting by active dates can reveal particular outliers in your data.</p>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> tab to change the following aspects of the chart:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Chart Mode</strong></dt>
<dd>
<p>When you have multiple Y-axis aggregations defined for your chart, you can use this drop-down to affect
how the aggregations display on the chart:</p>
</dd>
<dt class="hdlist1"><em>stacked</em></dt>
<dd>
<p>Stacks the aggregations on top of each other.</p>
</dd>
<dt class="hdlist1"><em>overlap</em></dt>
<dd>
<p>The aggregations overlap, with translucency indicating areas of overlap.</p>
</dd>
<dt class="hdlist1"><em>wiggle</em></dt>
<dd>
<p>Displays the aggregations as a <a href="https://en.wikipedia.org/wiki/Streamgraph">streamgraph</a>.</p>
</dd>
<dt class="hdlist1"><em>percentage</em></dt>
<dd>
<p>Displays each aggregation as a proportion of the total.</p>
</dd>
<dt class="hdlist1"><em>silhouette</em></dt>
<dd>
<p>Displays each aggregation as variance from a central line.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Checkboxes are available to enable and disable the following behaviors:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Smooth Lines</strong></dt>
<dd>
<p>Check this box to curve the top boundary of the area from point to point.</p>
</dd>
<dt class="hdlist1"><strong>Set Y-Axis Extents</strong></dt>
<dd>
<p>Check this box and enter values in the <strong>y-max</strong> and <strong>y-min</strong> fields to set the Y axis to specific
values.</p>
</dd>
<dt class="hdlist1"><strong>Scale Y-Axis to Data Bounds</strong></dt>
<dd>
<p>The default Y axis bounds are zero and the maximum value returned in the data. Check
this box to change both upper and lower bounds to match the values returned in the data.</p>
</dd>
<dt class="hdlist1"><strong>Show Tooltip</strong></dt>
<dd>
<p>Check this box to enable the display of tooltips.</p>
</dd>
<dt class="hdlist1"><strong>Show Legend</strong></dt>
<dd>
<p>Check this box to enable the display of a legend next to the chart.</p>
</dd>
</dl>
</div>
<h4 id="area-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="data-table">Data Table</h3>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Standard Deviation</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-extendedstats-aggregation.html"><em>extended stats</em></a>
aggregation returns the standard deviation of data in a numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Percentiles</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-aggregation.html"><em>percentile</em></a> aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the <strong>Percentiles</strong> fields. Click the <strong>X</strong> to remove a percentile field. Click <strong>+ Add</strong> to add a
percentile field.</p>
</dd>
<dt class="hdlist1"><strong>Percentile Rank</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-rank-aggregation.html"><em>percentile ranks</em></a>
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the <strong>Values</strong> fields. Click the <strong>X</strong> to remove a
values field. Click <strong>+Add</strong> to add a values field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can add an aggregation by clicking the <strong>+ Add Aggregation</strong> button.</p>
</div>
<div class="paragraph">
<p>The rows of the data table are called <em>buckets</em>. You can define buckets to split the table into rows or to split
the table into additional tables.</p>
</div>
<div class="paragraph">
<p>Each bucket type supports the following aggregations:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/mapping-date-format.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation. The value of the
<strong>Size</strong> parameter defines the number of entries this aggregation returns.</p>
</dd>
<dt class="hdlist1"><strong>Geohash</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-geohashgrid-aggregation.html"><em>geohash</em></a> aggregation displays points
based on the geohash coordinates.</p>
</dd>
<dt class="hdlist1"><strong>External query terms filter</strong></dt>
<dd>
<p>this aggregation matches terms of a specified field against the value returned by an external query (SQL/REST etc). Multiple queries can be specified thus creating multiple aggregation bins. Queries are configured under Settings/Queries.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once you&#8217;ve specified a bucket type aggregation, you can define sub-aggregations to refine the visualization. Click
<strong>+ Add Sub Aggregation</strong> to define a sub-aggregation, then choose <strong>Split Rows</strong> or <strong>Split Table</strong>, then select a
sub-aggregation from the list of types.</p>
</div>
<div class="paragraph">
<p>You can use the up or down arrows to the right of the aggregation&#8217;s type to change the aggregation&#8217;s priority.</p>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> tab to change the following aspects of the table:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Per Page</strong></dt>
<dd>
<p>This field controls the pagination of the table. The default value is ten rows per page.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Checkboxes are available to enable and disable the following behaviors:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Show metrics for every bucket/level</strong></dt>
<dd>
<p>Check this box to display the intermediate results for each bucket aggregation.</p>
</dd>
<dt class="hdlist1"><strong>Show partial rows</strong></dt>
<dd>
<p>Check this box to display a row even when there is no result.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Enabling these behaviors may have a substantial effect on performance.
</td>
</tr>
</table>
</div>
<h3 id="datatable-viewing-detailed-information" class="float">Viewing Detailed Information</h3>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="line-chart">Line Charts</h3>
<div class="paragraph">
<p>This chart&#8217;s Y axis is the <em>metrics</em> axis. The following aggregations are available for this axis:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Standard Deviation</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-extendedstats-aggregation.html"><em>extended stats</em></a>
aggregation returns the standard deviation of data in a numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Percentiles</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-aggregation.html"><em>percentile</em></a> aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the <strong>Percentiles</strong> fields. Click the <strong>X</strong> to remove a percentile field. Click <strong>+ Add</strong> to add a
percentile field.</p>
</dd>
<dt class="hdlist1"><strong>Percentile Rank</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-rank-aggregation.html"><em>percentile ranks</em></a>
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the <strong>Values</strong> fields. Click the <strong>X</strong> to remove a
values field. Click <strong>+Add</strong> to add a values field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can add an aggregation by clicking the <strong>+ Add Aggregation</strong> button.</p>
</div>
<div class="paragraph">
<p>Before you choose a buckets aggregation, specify if you are splitting slices within a single chart or splitting into
multiple charts. A multiple chart split must run before any other aggregations. When you split a chart, you can change
if the splits are displayed in a row or a column by clicking the <strong>Rows | Columns</strong> selector.</p>
</div>
<div class="paragraph">
<p>The X axis of this chart is the <em>buckets</em> axis. You can define buckets for the X axis, for a split area on the
chart, or for split charts.</p>
</div>
<div class="paragraph">
<p>This chart&#8217;s X axis supports the following aggregations. Click the linked name of each aggregation to visit the main
Elasticsearch documentation for that aggregation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/common-options.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter. Click the images:labelbutton.png[] <strong>label</strong> button to open the label field, where you can type in a
name to display on the visualization.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation.</p>
</dd>
<dt class="hdlist1"><strong>External source query filter</strong></dt>
<dd>
<p>a Kibi aggregator where one can define one or more buckets based on some record value (typically a primary key) matching the results of an external query. Multiple such buckets, corresponding to multiple queries, can be defined. For more information see the <em>query</em> menu in the configuration.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once you&#8217;ve specified an X axis aggregation, you can define sub-aggregations to refine the visualization. Click <strong>+ Add
Sub Aggregation</strong> to define a sub-aggregation, then choose <strong>Split Area</strong> or <strong>Split Chart</strong>, then select a sub-aggregation
from the list of types.</p>
</div>
<div class="paragraph">
<p>When multiple aggregations are defined on a chart&#8217;s axis, you can use the up or down arrows to the right of the
aggregation&#8217;s type to change the aggregation&#8217;s priority.</p>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> tab to change the following aspects of the chart:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Y-Axis Scale</strong></dt>
<dd>
<p>You can select <strong>linear</strong>, <strong>log</strong>, or <strong>square root</strong> scales for the chart&#8217;s Y axis. You can use a log
scale to display data that varies exponentially, such as a compounding interest chart, or a square root scale to
regularize the display of data sets with variabilities that are themselves highly variable. This kind of data, where
the variability is itself variable over the domain being examined, is known as <em>heteroscedastic</em> data. For example, if
a data set of height versus weight has a relatively narrow range of variability at the short end of height, but a wider
range at the taller end, the data set is heteroscedastic.</p>
</dd>
<dt class="hdlist1"><strong>Smooth Lines</strong></dt>
<dd>
<p>Check this box to curve the line from point to point. Bear in mind that smoothed lines necessarily
affect the representation of your data and create a potential for ambiguity.</p>
</dd>
<dt class="hdlist1"><strong>Show Connecting Lines</strong></dt>
<dd>
<p>Check this box to draw lines between the points on the chart.</p>
</dd>
<dt class="hdlist1"><strong>Show Circles</strong></dt>
<dd>
<p>Check this box to draw each data point on the chart as a small circle.</p>
</dd>
<dt class="hdlist1"><strong>Current time marker</strong></dt>
<dd>
<p>For charts of time-series data, check this box to draw a red line on the current time.</p>
</dd>
<dt class="hdlist1"><strong>Set Y-Axis Extents</strong></dt>
<dd>
<p>Check this box and enter values in the <strong>y-max</strong> and <strong>y-min</strong> fields to set the Y axis to specific
values.</p>
</dd>
<dt class="hdlist1"><strong>Show Tooltip</strong></dt>
<dd>
<p>Check this box to enable the display of tooltips.</p>
</dd>
<dt class="hdlist1"><strong>Show Legend</strong></dt>
<dd>
<p>Check this box to enable the display of a legend next to the chart.</p>
</dd>
<dt class="hdlist1"><strong>Scale Y-Axis to Data Bounds</strong></dt>
<dd>
<p>The default Y-axis bounds are zero and the maximum value returned in the data. Check
this box to change both upper and lower bounds to match the values returned in the data.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After changing options, click the green <strong>Apply changes</strong> button to update your visualization, or the grey <strong>Discard
changes</strong> button to keep your visualization in its current state.</p>
</div>
<h4 id="bubble-chart" class="float">Bubble Charts</h4>
<div class="paragraph">
<p>You can convert a line chart visualization to a bubble chart by performing the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Add Metrics</strong> for the visualization&#8217;s Y axis, then select <strong>Dot Size</strong>.</p>
</li>
<li>
<p>Select a metric aggregation from the drop-down list.</p>
</li>
<li>
<p>In the <strong>Options</strong> tab, uncheck the <strong>Show Connecting Lines</strong> box.</p>
</li>
<li>
<p>Click the <strong>Apply changes</strong> button.</p>
</li>
</ol>
</div>
<h4 id="line-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="markdown-widget">Markdown Widget</h3>
<div class="paragraph">
<p>The Markdown widget is a text entry field that accepts GitHub-flavored Markdown text. Kibi renders the text you enter
in this field and displays the results on the dashboard. You can click the <strong>Help</strong> link to go to the
<a href="https://help.github.com/articles/github-flavored-markdown/">help page</a> for GitHub flavored Markdown. Click <strong>Apply</strong> to
display the rendered text in the Preview pane or <strong>Discard</strong> to revert to a previous version.</p>
</div>
</div>
<div class="sect2">
<h3 id="metric-chart">Metric</h3>
<div class="paragraph">
<p>A metric visualization displays a single number for each aggregation you select:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Standard Deviation</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-extendedstats-aggregation.html"><em>extended stats</em></a>
aggregation returns the standard deviation of data in a numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Percentiles</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-aggregation.html"><em>percentile</em></a> aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the <strong>Percentiles</strong> fields. Click the <strong>X</strong> to remove a percentile field. Click <strong>+ Add</strong> to add a
percentile field.</p>
</dd>
<dt class="hdlist1"><strong>Percentile Rank</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-percentile-rank-aggregation.html"><em>percentile ranks</em></a>
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the <strong>Values</strong> fields. Click the <strong>X</strong> to remove a
values field. Click <strong>+Add</strong> to add a values field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can add an aggregation by clicking the <strong>+ Add Aggregation</strong> button.
You can click the <strong>Advanced</strong> link to display more customization options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Click the <strong>Options</strong> tab to change the font used to display the metrics.</p>
</div>
<h4 id="metric-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="pie-chart">Pie Charts</h3>
<div class="paragraph">
<p>The slice size of a pie chart is determined by the <em>metrics</em> aggregation. The following aggregations are available for
this axis:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <em>buckets</em> aggregations determine what information is being retrieved from your data set.</p>
</div>
<div class="paragraph">
<p>Before you choose a buckets aggregation, specify if you are splitting slices within a single chart or splitting into
multiple charts. A multiple chart split must run before any other aggregations. When you split a chart, you can change
if the splits are displayed in a row or a column by clicking the <strong>Rows | Columns</strong> selector.</p>
</div>
<div class="paragraph">
<p>You can specify any of the following bucket aggregations for your pie chart:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/common-options.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter. Click the <span class="image"><img src="images/labelbutton.png" alt="labelbutton"></span> <strong>label</strong> button to open the label field, where you can type
in a name to display on the visualization.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation. The value of the
<strong>Size</strong> parameter defines the number of entries this aggregation returns.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After defining an initial bucket aggregation, you can define sub-aggregations to refine the visualization. Click <strong>+ Add
Sub Aggregation</strong> to define a sub-aggregation, then choose <strong>Split Slices</strong> to select a sub-aggregation from the list of
types.</p>
</div>
<div class="paragraph">
<p>When multiple aggregations are defined on a chart&#8217;s axis, you can use the up or down arrows to the right of the
aggregation&#8217;s type to change the aggregation&#8217;s priority.</p>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> tab to change the following aspects of the table:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Donut</strong></dt>
<dd>
<p>Display the chart as a sliced ring instead of a sliced pie.</p>
</dd>
<dt class="hdlist1"><strong>Show Tooltip</strong></dt>
<dd>
<p>Check this box to enable the display of tooltips.</p>
</dd>
<dt class="hdlist1"><strong>Show Legend</strong></dt>
<dd>
<p>Check this box to enable the display of a legend next to the chart.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After changing options, click the green <strong>Apply changes</strong> button to update your visualization, or the grey <strong>Discard
changes</strong> button to keep your visualization in its current state.</p>
</div>
<h4 id="pie-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="tilemap">Tile Maps</h3>
<div class="paragraph">
<p>A tile map displays a geographic area overlaid with circles keyed to the data determined by the buckets you specify.</p>
</div>
<div class="paragraph">
<p>The default <em>metrics</em> aggregation for a tile map is the <strong>Count</strong> aggregation. You can select any of the following
aggregations as the metrics aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The <em>buckets</em> aggregations determine what information is being retrieved from your data set.</p>
</div>
<div class="paragraph">
<p>Before you choose a buckets aggregation, specify if you are splitting the chart or displaying the buckets as <strong>Geo
Coordinates</strong> on a single chart. A multiple chart split must run before any other aggregations.</p>
</div>
<div class="paragraph">
<p>Tile maps use the <strong>Geohash</strong> aggregation as their initial aggregation. Select a field, typically coordinates, from the
drop-down. The <strong>Precision</strong> slider determines the granularity of the results displayed on the map. See the documentation
for the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-geohashgrid-aggregation.html#_cell_dimensions_at_the_equator">geohash grid</a>
aggregation for details on the area specified by each precision level. As of the 4.1 release, Kibi supports a maximum
geohash length of 7.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Higher precisions increase memory usage for the browser displaying Kibi as well as for the underlying
Elasticsearch cluster.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you&#8217;ve specified a buckets aggregation, you can define sub-aggregations to refine the visualization. Tile maps
only support sub-aggregations as split charts. Click <strong>+ Add Sub Aggregation</strong>, then <strong>Split Chart</strong> to select a
sub-aggregation from the list of types:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.
After changing options, click the green <strong>Apply changes</strong> button to update your visualization, or the grey <strong>Discard
changes</strong> button to keep your visualization in its current state.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/common-options.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter. Click the <span class="image"><img src="images/labelbutton.png" alt="labelbutton"></span> <strong>label</strong> button to open the label field, where you can type
in a name to display on the visualization.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation. The value of the
<strong>Size</strong> parameter defines the number of entries this aggregation returns.</p>
</dd>
<dt class="hdlist1"><strong>Geohash</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-geohashgrid-aggregation.html"><em>geohash</em></a> aggregation displays points
based on the geohash coordinates.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
By default, the <strong>Change precision on map zoom</strong> box is checked. Uncheck the box to disable this behavior.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> tab to change the following aspects of the chart:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Map type</strong></dt>
<dd>
<p>Select one of the following options from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong><em>Scaled Circle Markers</em></strong></dt>
<dd>
<p>Scale the size of the markers based on the metric aggregation&#8217;s value.</p>
</dd>
<dt class="hdlist1"><strong><em>Shaded Circle Markers</em></strong></dt>
<dd>
<p>Displays the markers with different shades based on the metric aggregation&#8217;s value.</p>
</dd>
<dt class="hdlist1"><strong><em>Shaded Geohash Grid</em></strong></dt>
<dd>
<p>Displays the rectangular cells of the geohash grid instead of circular markers, with different
shades based on the metric aggregation&#8217;s value.</p>
</dd>
<dt class="hdlist1"><strong><em>Heatmap</em></strong></dt>
<dd>
<p>A heat map applies blurring to the circle markers and applies shading based on the amount of overlap.
Heatmaps have the following options:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Radius</strong>: Sets the size of the individual heatmap dots.</p>
</li>
<li>
<p><strong>Blur</strong>: Sets the amount of blurring for the heatmap dots.</p>
</li>
<li>
<p><strong>Maximum zoom</strong>: Tilemaps in Kibi support 18 zoom levels. This slider defines the maximum zoom level at which the
heatmap dots appear at full intensity.</p>
</li>
<li>
<p><strong>Minimum opacity</strong>: Sets the opacity cutoff for the dots.</p>
</li>
<li>
<p><strong>Show Tooltip</strong>: Check this box to have a tooltip with the values for a given dot when the cursor is on that dot.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1"><strong>Desaturate map tiles</strong></dt>
<dd>
<p>Desaturate the map&#8217;s color in order to make the markers stand out more clearly.</p>
</dd>
<dt class="hdlist1"><strong>WMS compliant map server</strong></dt>
<dd>
<p>Check this box to enable the use of a third-party mapping service that complies with the Web
Map Service (WMS) standard. Specify the following elements:</p>
<div class="ulist">
<ul>
<li>
<p><strong>WMS url</strong>: The URL for the WMS map service.</p>
</li>
<li>
<p><strong>WMS layers</strong>: A comma-separated list of the layers to use in this visualization. Each map server provides its own list of
layers.</p>
</li>
<li>
<p><strong>WMS version</strong>: The WMS version used by this map service.</p>
</li>
<li>
<p><strong>WMS format</strong>: The image format used by this map service. The two most common formats are <code>image/png</code> and <code>image/jpeg</code>.</p>
</li>
<li>
<p><strong>WMS attribution</strong>: An optional, user-defined string that identifies the map source. Maps display the attribution string
in the lower right corner.</p>
</li>
<li>
<p><strong>WMS styles</strong>: A comma-separated list of the styles to use in this visualization. Each map server provides its own styling
options.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>After changing options, click the green <strong>Apply changes</strong> button to update your visualization, or the grey <strong>Discard
changes</strong> button to keep your visualization in its current state.</p>
</div>
<h4 id="navigating-map" class="float">Navigating the Map</h4>
<div class="paragraph">
<p>Once your tilemap visualization is ready, you can explore the map in several ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click and hold anywhere on the map and move the cursor to move the map center. Hold Shift and drag a bounding box
across the map to zoom in on the selection.</p>
</li>
<li>
<p>Click the <strong>Zoom In/Out</strong> <span class="image"><img src="images/viz-zoom.png" alt="viz-zoom"></span> buttons to change the zoom level manually.</p>
</li>
<li>
<p>Click the <strong>Fit Data Bounds</strong> <span class="image"><img src="images/viz-fit-bounds.png" alt="viz-fit-bounds"></span> button to automatically crop the map boundaries to the
geohash buckets that have at least one result.</p>
</li>
<li>
<p>Click the <strong>Latitude/Longitude Filter</strong> <span class="image"><img src="images/viz-lat-long-filter.png" alt="viz-lat-long-filter"></span> button, then drag a bounding box across the
map, to create a filter for the box coordinates.</p>
</li>
</ul>
</div>
<h4 id="tilemap-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="vertical-bar-chart">Vertical Bar Charts</h3>
<div class="paragraph">
<p>This chart&#8217;s Y axis is the <em>metrics</em> axis. The following aggregations are available for this axis:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Count</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-valuecount-aggregation.html"><em>count</em></a> aggregation returns a raw count of
the elements in the selected index pattern.</p>
</dd>
<dt class="hdlist1"><strong>Average</strong></dt>
<dd>
<p>This aggregation returns the <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-avg-aggregation.html"><em>average</em></a> of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Sum</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-sum-aggregation.html"><em>sum</em></a> aggregation returns the total sum of a numeric
field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Min</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-min-aggregation.html"><em>min</em></a> aggregation returns the minimum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Max</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-max-aggregation.html"><em>max</em></a> aggregation returns the maximum value of a
numeric field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Unique Count</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-cardinality-aggregation.html"><em>cardinality</em></a> aggregation returns
the number of unique values in a field. Select a field from the drop-down.</p>
</dd>
<dt class="hdlist1"><strong>Percentiles</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-percentile-aggregation.html"><em>percentile</em></a> aggregation divides the
values in a numeric field into percentile bands that you specify. Select a field from the drop-down, then specify one
or more ranges in the <strong>Percentiles</strong> fields. Click the <strong>X</strong> to remove a percentile field. Click <strong>+ Add</strong> to add a
percentile field.</p>
</dd>
<dt class="hdlist1"><strong>Percentile Rank</strong></dt>
<dd>
<p>The <a href="http://siren.solutions/kibi/docs/current//search-aggregations-metrics-percentile-rank-aggregation.html"><em>percentile ranks</em></a>
aggregation returns the percentile rankings for the values in the numeric field you specify. Select a numeric field
from the drop-down, then specify one or more percentile rank values in the <strong>Values</strong> fields. Click the <strong>X</strong> to remove a
values field. Click <strong>+Add</strong> to add a values field.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can add an aggregation by clicking the <strong>+ Add Aggregation</strong> button.</p>
</div>
<div class="paragraph">
<p>The <em>buckets</em> aggregations determine what information is being retrieved from your data set.</p>
</div>
<div class="paragraph">
<p>Before you choose a buckets aggregation, specify if you are splitting slices within a single chart or splitting into
multiple charts. A multiple chart split must run before any other aggregations. When you split a chart, you can change
if the splits are displayed in a row or a column by clicking the <strong>Rows | Columns</strong> selector.</p>
</div>
<div class="paragraph">
<p>The X axis of this chart is the <em>buckets</em> axis. You can define buckets for the X axis, for a split area on the
chart, or for split charts.</p>
</div>
<div class="paragraph">
<p>This chart&#8217;s X axis supports the following aggregations. Click the linked name of each aggregation to visit the main
Elasticsearch documentation for that aggregation.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Date Histogram</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-datehistogram-aggregation.html"><em>date histogram</em></a> is built from a
numeric field and organized by date. You can specify a time frame for the intervals in seconds, minutes, hours, days,
weeks, months, or years. You can also specify a custom interval frame by selecting <strong>Custom</strong> as the interval and
specifying a number and a time unit in the text field. Custom interval time units are <strong>s</strong> for seconds, <strong>m</strong> for minutes,
<strong>h</strong> for hours, <strong>d</strong> for days, <strong>w</strong> for weeks, and <strong>y</strong> for years. Different units support different levels of precision,
down to one second.</p>
</dd>
<dt class="hdlist1"><strong>Histogram</strong></dt>
<dd>
<p>A standard <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-histogram-aggregation.html"><em>histogram</em></a> is built from a
numeric field. Specify an integer interval for this field. Select the <strong>Show empty buckets</strong> checkbox to include empty
intervals in the histogram.</p>
</dd>
<dt class="hdlist1"><strong>Range</strong></dt>
<dd>
<p>With a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-range-aggregation.html"><em>range</em></a> aggregation, you can specify ranges
of values for a numeric field. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(x)</strong> symbol to remove
a range.</p>
</dd>
<dt class="hdlist1"><strong>Date Range</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-daterange-aggregation.html"><em>date range</em></a> aggregation reports values
that are within a range of dates that you specify. You can specify the ranges for the dates using
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/common-options.html#date-math"><em>date math</em></a> expressions. Click <strong>Add Range</strong> to add a set of range endpoints.
Click the red <strong>(/)</strong> symbol to remove a range.</p>
</dd>
<dt class="hdlist1"><strong>IPv4 Range</strong></dt>
<dd>
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-iprange-aggregation.html"><em>IPv4 range</em></a> aggregation enables you to
specify ranges of IPv4 addresses. Click <strong>Add Range</strong> to add a set of range endpoints. Click the red <strong>(/)</strong> symbol to
remove a range.</p>
</dd>
<dt class="hdlist1"><strong>Terms</strong></dt>
<dd>
<p>A <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html"><em>terms</em></a> aggregation enables you to specify the top
or bottom <em>n</em> elements of a  given field to display, ordered by count or a custom metric.</p>
</dd>
<dt class="hdlist1"><strong>Filters</strong></dt>
<dd>
<p>You can specify a set of <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-filters-aggregation.html"><em>filters</em></a> for the data.
You can specify a filter as a query string or in JSON format, just as in the Discover search bar. Click <strong>Add Filter</strong> to
add another filter. Click the images:labelbutton.png[] <strong>label</strong> button to open the label field, where you can type in a
name to display on the visualization.</p>
</dd>
<dt class="hdlist1"><strong>Significant Terms</strong></dt>
<dd>
<p>Displays the results of the experimental
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html"><em>significant terms</em></a> aggregation.</p>
</dd>
<dt class="hdlist1"><strong>External source query filter</strong></dt>
<dd>
<p>a Kibi aggregator where one can define one or more buckets based on some record value (typically a primary key) matching the results of an external query. Multiple such buckets, corresponding to multiple queries, can be defined. For more information see the <em>query</em> menu in the configuration.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once you&#8217;ve specified an X axis aggregation, you can define sub-aggregations to refine the visualization. Click <strong>+ Add
Sub Aggregation</strong> to define a sub-aggregation, then choose <strong>Split Area</strong> or <strong>Split Chart</strong>, then select a sub-aggregation
from the list of types.</p>
</div>
<div class="paragraph">
<p>When multiple aggregations are defined on a chart&#8217;s axis, you can use the up or down arrows to the right of the
aggregation&#8217;s type to change the aggregation&#8217;s priority.</p>
</div>
<div class="paragraph">
<p>You can click the <strong>Advanced</strong> link to display more customization options for your metrics or bucket aggregation:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Exclude Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to exclude from the results.</p>
</dd>
<dt class="hdlist1"><strong>Exclude Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the exclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern</strong></dt>
<dd>
<p>Specify a pattern in this field to include in the results.</p>
</dd>
<dt class="hdlist1"><strong>Include Pattern Flags</strong></dt>
<dd>
<p>A standard set of Java flags for the inclusion pattern.</p>
</dd>
<dt class="hdlist1"><strong>JSON Input</strong></dt>
<dd>
<p>A text field where you can add specific JSON-formatted properties to merge with the aggregation
definition, as in the following example:</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">{ "script" : "doc['grade'].value * 1.2" }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The availability of these options varies depending on the aggregation you choose.</p>
</div>
<div class="paragraph">
<p>Select the <strong>Options</strong> to change the following aspects of the table:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Bar Mode</strong></dt>
<dd>
<p>When you have multiple Y-axis aggregations defined for your chart, you can use this drop-down to affect
how the aggregations display on the chart:</p>
</dd>
<dt class="hdlist1"><em>stacked</em></dt>
<dd>
<p>Stacks the aggregations on top of each other.</p>
</dd>
<dt class="hdlist1"><em>percentage</em></dt>
<dd>
<p>Displays each aggregation as a proportion of the total.</p>
</dd>
<dt class="hdlist1"><em>grouped</em></dt>
<dd>
<p>Groups the results horizontally by the lowest-priority sub-aggregation.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Checkboxes are available to enable and disable the following behaviors:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Show Tooltip</strong></dt>
<dd>
<p>Check this box to enable the display of tooltips.</p>
</dd>
<dt class="hdlist1"><strong>Show Legend</strong></dt>
<dd>
<p>Check this box to enable the display of a legend next to the chart.</p>
</dd>
<dt class="hdlist1"><strong>Scale Y-Axis to Data Bounds</strong></dt>
<dd>
<p>The default Y axis bounds are zero and the maximum value returned in the data. Check
this box to change both upper and lower bounds to match the values returned in the data.</p>
</dd>
</dl>
</div>
<h4 id="vertbar-viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.</p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.</p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.</p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana
<a href="#managing-fields">field formatters</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="wordcloud">Kibi Word Cloud</h3>
<div class="paragraph">
<p>The Kibi Wordcloud visualization displays the most frequent terms in the
current set of Elasticsearch documents at a glance.</p>
</div>
<div class="paragraph">
<p>To configure the visualization, select <strong>Count</strong> as the aggregation for the
metric, then add a <strong>Split Rows</strong> bucket configuration; you can choose to process
terms using either the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-terms-aggregation.html">Terms</a>
aggregation or the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-aggregations-bucket-significantterms-aggregation.html">Significant Terms</a>
aggregation.</p>
</div>
<h4 id="_using_the_terms_aggregation" class="float">Using the terms aggregation</h4>
<div class="paragraph">
<p>If the bucket aggregation is set to <strong>Terms</strong>, you need to specify the following
parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Field</strong>: the field which will provide terms to be aggregated.</p>
</li>
<li>
<p><strong>Order</strong> and <strong>Size</strong>: the subset and number of terms to be
aggregated.</p>
</li>
<li>
<p><strong>Order By</strong>: the metric used to sort the terms.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, to display the Top 30 terms by count in the <code>snippet</code> field
of an index containing articles, set the following configuration:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/word-cloud/terms-config.png" alt="Terms aggregation configuration">
</div>
</div>
<div class="paragraph">
<p>To exclude common words or any unwanted term, click on <strong>Advanced</strong> and
and write a regular expression in the <strong>Exclude pattern</strong> field:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/word-cloud/terms-config-advanced.png" alt="Terms aggregation advanced configuration">
</div>
</div>
<h4 id="_using_the_significant_terms_aggregation" class="float">Using the significant terms aggregation</h4>
<div class="paragraph">
<p>If the bucket aggregation is set to <strong>Significant Terms</strong>, you need to specify
the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Field</strong>: the field which will provide terms to be aggregated.</p>
</li>
<li>
<p><strong>Size</strong>: the number of significant terms to be aggregated.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/word-cloud/sig-terms-config-advanced.png" alt="Significant Terms aggregation advanced configuration">
</div>
</div>
</div>
<div class="sect2">
<h3 id="timeline">Kibi Timeline</h3>
<div class="paragraph">
<p>The Kibi Timeline visualization displays series of data coming from different
saved searches on a single timeline component. Events are color coded
to distinguish between different groups.</p>
</div>
<div class="paragraph">
<p>Each event on a timeline become a clickable term filter which
allow to quickly filter the related data based on what is shown on the timeline.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/timeline/timeline-mixed-mode.png" alt="Timeline">
</div>
</div>
<h4 id="_configuration_2" class="float">Configuration</h4>
<div class="paragraph">
<p>To configure the visualization, add a new <strong>Group</strong> and select:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Saved search id</strong> - date for this group will be taken from corresponding index.</p>
</li>
<li>
<p><strong>Group label</strong> - a label for the group.</p>
</li>
<li>
<p><strong>Event label field</strong> - field value will be used as individual event label.</p>
</li>
<li>
<p><strong>Event start date</strong> - date from this field will be used to position start of the event.</p>
</li>
<li>
<p><strong>Event end date</strong> - (optional) date from this field will be used to position end of the event.</p>
</li>
<li>
<p><strong>Events number limit</strong> - (optional) limit number of events in this group.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/timeline/timeline-config.png" alt="Timeline configuration">
</div>
</div>
<h4 id="_advanced_option" class="float">Advanced option</h4>
<div class="paragraph">
<p>By default events from multiple groups are rendered all mixed together.
It is possible to show different groups on different levels by enabling the advanced option</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Groups rendered on separate levels</strong></p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/timeline/timeline-advanced-config.png" alt="Timeline advanced configuration">
</div>
</div>
<div class="paragraph">
<p>Below timeline where each group is rendered on separate level</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/timeline/timeline-levels-mode.png" alt="Timeline">
</div>
</div>
</div>
<div class="sect2">
<h3 id="radar-chart">Radar Chart</h3>
<div class="paragraph">
<p>A radar chart <a href="http://siren.solutions/radar-or-spider-chart-for-kibana-4-3-and-kibi-0-3/">introduced in kibi-0.3.0</a>
is a graphical method of displaying multivariate data
in the form of a two-dimensional chart of three or more quantitative variables
represented on axes starting from the same point.
The relative position and angle of the axes is typically uninformative.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/radar_visualization.png" alt="Radar chart visualization">
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/radar_settings.png" alt="Radar chart settings">
</div>
</div>
<div class="paragraph">
<p>The radar chart is also known as web chart, spider chart, star chart.
It is developed as a <a href="https://github.com/sirensolutions/kibi_radar_vis">standalone plugin</a>
suitable to install in both Kibi 0.3+ and Kibana 4.3+.</p>
</div>
</div>
<div class="sect2">
<h3 id="graph-browser">Kibi Graph Browser</h3>
<div class="paragraph">
<p>The Kibi Graph Browser <a href="http://todo">introduced in TODO</a> displays the currently selected Elasticsearch documents as a node of a graph.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-browser-example.png" alt="Graph Browser Visualization">
</div>
</div>
<h4 id="_pre_requisites" class="float">Pre-Requisites</h4>
<div class="paragraph">
<p>To use the Kibi Graph Browser you first need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set up a Kibi Tinkerpop3 datasource</p>
</li>
<li>
<p>Set up a query using the Kibi Tinkerpop3 datasource</p>
</li>
</ul>
</div>
<h4 id="_configuration_3" class="float">Configuration</h4>
<div class="paragraph">
<p>To configure the visualization, add a new <strong>Script</strong> and select:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Query</strong> - the query that will fetch the first node.</p>
</li>
<li>
<p><strong>Datasource</strong> - the Kibi Tinkerpop3 datasource to be used.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-browser-config-script.png" alt="Graph Browser Script configuration">
</div>
</div>
<div class="paragraph">
<p>By default every node is assigned with an icon and a label. It is possible to customize the style of both of them.</p>
</div>
<h5 id="_custom_icon" class="float">Custom Icon</h5>
<div class="paragraph">
<p>To configure an icon, add a new <strong>Icon</strong> and select:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Index Pattern</strong> - the index pattern containing the type of documents you want to configure</p>
</li>
<li>
<p><strong>Icon Type</strong> - the type of icon you want to use</p>
<div class="ulist">
<ul>
<li>
<p><strong>Font awesome</strong> - the icon will be selected using the vector icons from <a href="https://fortawesome.github.io/Font-Awesome/">Font Awesome</a></p>
</li>
<li>
<p><strong>Parameterized Relative Path</strong> - the icon will be selected from the configured relative path. The relative path points to <code>&lt;kibi_root&gt;/installedPlugins/kibi_graph_browser_vis-0.1.0/public/icons/</code>. You can create subfolders to better organize your custom icons. If the icon filename is stored inside your document, you can use a parameterized relative path. Eg: <code>/set1/@[_doc][iconType]@.png</code> will be evaluated using the iconType field of the document.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-browser-config-icon.png" alt="Node Icon configuration">
</div>
</div>
<h5 id="_custom_label" class="float">Custom Label</h5>
<div class="paragraph">
<p>To configure a label, add a new <strong>Label</strong> and select:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Index Pattern</strong> - the index pattern containing the documents you want to configure</p>
</li>
<li>
<p><strong>Document type</strong> - the type of documents you want to configure</p>
</li>
<li>
<p><strong>Label type</strong> - the type of label you want to use</p>
<div class="ulist">
<ul>
<li>
<p><strong>Document Field</strong> - the label will be a document field. You can select one of the available fields from the dropdown</p>
</li>
<li>
<p><strong>Parameterized Field</strong> - the label will be the evaluation of this parameterized field. e.g.: <code>Company: @doc[_source][companyName]@</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-browser-config-label.png" alt="Node Label configuration">
</div>
</div>
<h4 id="_navigating_the_graph" class="float">Navigating the Graph</h4>
<div class="paragraph">
<p>Once your Kibi Graph Browser visualization is ready, you can start exploring the graph. You have several operations available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Select Nodes</strong> - you can select nodes by clicking and dragging a selection rectangle or by ctrl+click on elements to add them to the selection</p>
</li>
<li>
<p><strong>Add Filter</strong> - a new filter will be added to Kibi representing the currently selected nodes</p>
</li>
<li>
<p><strong>Expand</strong> - fetches new nodes and relations of the selected nodes</p>
</li>
<li>
<p><strong>Crop</strong> - crops only the selected nodes, by removing all the other nodes</p>
</li>
<li>
<p><strong>Remove</strong> - removes only the selected nodes, leaving all the others</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make a filter available to other dashboards, you can pin it and it will remain active during your dashboard navigation</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-filter-pin.gif" alt="Graph Filter Pin">
</div>
</div>
<div class="paragraph">
<p>You can choose two different layouts for your graph:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Standard</strong> - This is the standard visualization. The Kibi Graph Browser will choose automatically the position of elements</p>
</li>
<li>
<p><strong>Hierarchy</strong> - The graph will be displayed using a hierarchical structure, starting from the selected nodes</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/graph-browser/graph-layouts.gif" alt="Graph Layouts Example">
</div>
</div>
<div class="paragraph">
<p>At any time you can reset your Kibi Graph Browser to the initial state by pressing the reload button</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="relational-browsing">Kibi Relational Browsing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kibi adds a relational dimension to Kibana when browsing indices,
allowing to <em>filter</em> documents on a dashboard by showing only those that have
a relation with documents displayed in a different dashboard, possibly stored
in different indices.</p>
</div>
<div class="paragraph">
<p>There are two paradigms a user can follow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>through the <a href="#relational-panel">Relational Panel</a>, a user picks a set of dashboards to join: filtering documents within a dashboard <strong>automatically</strong> updates the other related dashboards; and</p>
</li>
<li>
<p>through the <a href="#relational-filter">Relational filter</a>, a user <em>builds</em> interactivelly the sequence of dashboards to join.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="relational-panel">Relational Panel</h3>
<div class="paragraph">
<p>With the relational panel browsing paradigm, all the dashboards of interest are join together. Effectivelly, documents that can be viewed in each dashboard are those that are connected with the rest.</p>
</div>
<div class="paragraph">
<p>For example, consider two dashboards Articles and Companies which documents are related to one another; if one filters articles by their publishing date to a certain range, then only the companies that are mentioned in articles published within that range are displayed.</p>
</div>
<div class="sect3">
<h4 id="_configuration_4">Configuration</h4>
<div class="paragraph">
<p>In order to use this browsing paradigm, it is necessary to configure the <a href="#kibi-settings-relations">relationships</a>.</p>
</div>
<div class="paragraph">
<p>Once this is done, you can view which dashboards are connected to each other using the relational panel by clicking on the icon <span class="image"><img src="images/relations-settings/relational-panel-icon.png" alt="Relational panel icon"></span> in the Dashboard tab.
In the image below, the dashboards Articles, Companies, and Investments are connected together.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-panel/panel.png" alt="Relational panel">
</div>
</div>
</div>
<div class="sect3">
<h4 id="relational-panel-browsing">Browsing</h4>
<div class="paragraph">
<p>Since a <a href="#saving-dashboards">saved search</a> is now associated with a dashboard, a count indicating the current number of documents in that dashboard is displayed on each tab. For example on the previous image, there are 3558 articles, 840 companies, and 840 investments rounds that are inter-connected. These numbers coupled with the relational panel allows to get a feeling of the current state of the joined dashboards.
The current set of connected dashboards are displayed in the label of the blue filter <span class="image"><img src="images/relational-panel/filter.png" alt="relational panel filter"></span>.</p>
</div>
<div class="paragraph">
<p>Since all the dashboards in the set are connected to each other, adding a filter to a dashboard will also update the connected dashboards. If you select <strong>TechCrunch</strong> as the source for articles, there are now in total 653 articles. Being automatically updated, we observe that only 311 companies and investments out of 840 are actually connected to those articles from TechCrunch.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-panel/with-filter.png" alt="Relational panel with a filter">
</div>
</div>
<div class="paragraph">
<p>You can see the current filters that are applied with the relational panel by hovering the mouse over the blue filter.
The explanation tooltip shown below indicates that the current 311 companies are connected with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>articles coming from TechCrunch published within a specific time range; and</p>
</li>
<li>
<p>investments funded within another time range.</p>
</li>
</ul>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-panel/explanation.png" alt="Explanation of the relational filter">
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="relational-filter">Relational filter</h3>
<div class="paragraph">
<p>The Relational Filter visualization allows to "pivot" from a dashboard
to another by creating a join between multiple indices based on their
relations. This allows to interactivelly build the sequence of dashboards to join.</p>
</div>
<div class="paragraph">
<p>Relations are defined between index fields; for example, let&#8217;s take the
following indices:</p>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<em>Articles</em>
</td>
<td class="hdlist2">
<p>an index containing articles; each document in the index has
a field called <code>companyid</code> that contains the ID of the company mentioned in the
article. The index is displayed on dashboard named <code>Articles</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<em>Companies</em>
</td>
<td class="hdlist2">
<p>an index containing information about companies; each document
in the index has a field called <code>id</code> that contains the ID of the company.
The index is displayed on a dashboard named <code>Companies</code>.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Using the Relational filter visualization, it is possible to configure a
relation between <code>Articles.companyid</code> and <code>Companies.id</code> and use it as a
filter on the Companies index.</p>
</div>
<div class="paragraph">
<p>The result is that it becomes possible to search specific articles in the
<em>Articles</em> dashboard, then switch to the <em>Companies</em> dashboard and see only
companies mentioned in <em>Articles'</em> search results.</p>
</div>
<div class="paragraph">
<p>In the <em>Articles</em> dashboard, the relation is displayed as a button which,
if configured properly, will display the number of documents in the <em>Companies</em>
dashboard related to the documents displayed in the <em>Articles</em> dashboard.</p>
</div>
<div class="paragraph">
<p>The screenshot below shows the button for the relation described in the
example; there are 48 companies mentioned in the 234 articles currently
displayed:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-filter/relational-filter-companies-source.png" alt="Relational filter button in source dashboard" width="400">
</div>
</div>
<div class="paragraph">
<p>Clicking on the button will switch to the <em>Companies</em> dashboard and display
the 48 companies; the relational filter is displayed in the filter bar, as
displayed below:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-filter/relational-filter-companies-target.png" alt="Relational filter in target dashboard" width="400">
</div>
</div>
<div class="paragraph">
<p>The Relational Filter visualization requires the <a href="https://github.com/sirensolutions/siren-join/">Siren Join plugin 2.2.0-1</a> for
Elasticsearch. The plugin is compatible with Elasticsearch 2.2.0-1.</p>
</div>
<div class="paragraph">
<p>For more information about the Siren Join plugin visit our website at
<a href="http://siren.solutions" class="bare">http://siren.solutions</a> .</p>
</div>
<h4 id="relational-filter-config" class="float">Configuration</h4>
<div class="paragraph">
<p>Click on the <em>Add filter</em> button to create a new filter in the visualization;
the filter is defined by the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Button label</em>: the label of the button that will be displayed inside the
visualization, e.g. <code>Companies -&#8594;</code>.</p>
</li>
<li>
<p><em>Custom filter label</em>: the label of the filter that will be displayed in the
filter bar, Default is <code>&#8230;&#8203; related to ($COUNT) from $DASHBOARD.</code>,
where:
$COUNT is a number of items on source dashboard,
$DASHBOARD is a source dashboard name.
User can use these two variable placeholders when writing custom filter label.</p>
</li>
<li>
<p><em>Source index</em>: the source index in the relation.</p>
</li>
<li>
<p><em>Source index type</em>: the source index document type.</p>
</li>
<li>
<p><em>Source field</em>: the source index field in the relation.</p>
</li>
<li>
<p><em>Target index</em>: the index to be joined with <em>Source index</em>.</p>
</li>
<li>
<p><em>Target field</em>: the field in the target index related to <em>Source field</em>.</p>
</li>
<li>
<p><em>Target index type</em>: the target index document type.</p>
</li>
<li>
<p><em>Target dashboard</em>: the dashboard on which the join filter will be applied
when clicking on the button.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The screenshot below shows the configuration of a relation between
<code>Articles</code> and <code>Companies</code>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-filter/relational-filter-config.png" alt="Relational filter configuration">
</div>
</div>
<div class="paragraph">
<p>It is possible to define multiple relations in a single Kibi relational
filter visualization; the visualization will display only buttons applicable
to the currently displayed dashboard.</p>
</div>
<h4 id="relational-filter-usage" class="float">Usage</h4>
<div class="paragraph">
<p>When clicking on a button in the Relational Filter visualization,
the current state of the source dashboard is added to relational filter
and applied on the target dashboard.
To see the explanation of a relational filter, just move the mouse over it.</p>
</div>
<div class="paragraph">
<p>Below we started on <strong>Articles</strong> dashboard, searched for pizza and clicked
on the relational button to rotate to <strong>Companies</strong>.
As we see on the explanation there is only one step which shows
what queries and filters were applied on <strong>Articles</strong>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>1 article.companyid -&gt; company.id
  query pizza
  time filter on pdate</code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-filter/relational-filter-explanation1.png" alt="Relational filter explanation">
</div>
</div>
<div class="paragraph">
<p>Next we added a regular filter country to USA (<code>countrycode: USA</code>) and clicked
on a relational filter button to go to <strong>Investments</strong>.
Now the explanation shows two steps.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>2 company.id -&gt; investment.companyid
  filter countrycode
  time filter on funded_date

1 article.companyid -&gt; company.id
  query pizza
  time filter on pdate</code></pre>
</div>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relational-filter/relational-filter-explanation2.png" alt="Relational filter explanation">
</div>
</div>
<div class="paragraph">
<p>Explanation steps are always shown in reverse - last one on the top.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard">Dashboard</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Kibi <em>dashboard</em> displays a set of saved visualizations in a customizable
grid layout. You can save a dashboard to share or reload at a later time.</p>
</div>
<div class="paragraph">
<p>In Kibi, dashboards are displayed as tabs and can be organized as <a href="#dashboard-groups">dashboard groups</a>.</p>
</div>
<h3 id="dashboard-getting-started" class="float">Getting Started</h3>
<div class="paragraph">
<p>You need at least one saved <a href="#visualize">visualization</a> to use a dashboard.</p>
</div>
<h4 id="creating-a-new-dashboard" class="float">Building a New Dashboard</h4>
<div class="paragraph">
<p>The first time you click the <strong>Dashboard</strong> tab, Kibi displays the first available
dashboard or, if no dashboards have been defined, the dashboard creation screen.</p>
</div>
<div class="paragraph">
<p>To create a new dashboard, click on the <em>New Dashboard</em> button:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="images/NewDashboard.jpg" alt="NewDashboard"></span></p>
</div>
<h4 id="saving-dashboards" class="float">Saving Dashboards</h4>
<div class="paragraph">
<p>To save the dashboard, click the <strong>Save Dashboard</strong> <span class="image"><img src="images/SaveVis.png" alt="Save"></span>
button:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dashboard/save-dashboard.png" alt="Saving a dashboard">
</div>
</div>
<div class="paragraph">
<p>The name of the dashboard can be set in the <strong>Save As</strong> field.</p>
</div>
<div class="paragraph">
<p>If <strong>Store time with dashboard</strong> is checked, the time filter currently set will
be restored when the dashboard is opened.</p>
</div>
<div class="paragraph">
<p>To display the number of Elasticsearch documents displayed by the dashboard
in the corresponding tab, select a <strong>Saved Search</strong>:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dashboard/save-dashboard-opts.png" alt="Dashboard settings">
</div>
</div>
<h4 id="sharing-dashboards" class="float">Sharing Dashboards</h4>
<div class="paragraph">
<p>You can share dashboards with other users by sending a link or by embedding
them into HTML pages; make sure that your Kibi installation is properly secured
when sharing a dashboard on a public facing server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
to view shared dashboards users must be able to access Kibi; keep
this in mind if your Kibi instance is protected by an authentication proxy.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To share a dashboard, click the <strong>Share</strong> <span class="image"><img src="images/ShareVis.png" alt="Share"></span>
button:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dashboard/share-dashboard.png" alt="Dashboard sharing options">
</div>
</div>
<div class="paragraph">
<p>Click on the button next to a sharing option to copy the corresponding
code to your clipboard.</p>
</div>
<h4 id="embedding-dashboards" class="float">Embedding Dashboards</h4>
<div class="paragraph">
<p>To embed a dashboard, copy the embed code from the <em>Share</em> display into your external web application.</p>
</div>
<h4 id="adding-visualizations-to-a-dashboard" class="float">Adding Visualizations to a Dashboard</h4>
<div class="paragraph">
<p>To add a visualization to the dashboard, click the <strong>Add Visualization</strong> <span class="image"><img src="images/AddVis.png" alt="Plus"></span>
button in the toolbar panel, then select a previously created visualization
from the list:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dashboard/add-vis.png" alt="Adding a visualization to the dashboard">
</div>
</div>
<div class="paragraph">
<p>You can filter the list of visualizations by typing a filter string into the
<strong>Visualization Filter</strong> field.</p>
</div>
<div class="paragraph">
<p>The visualization you select appears in a <em>container</em> on your dashboard.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you see a message about the container&#8217;s height or width being too
small, <a href="#resizing-containers">resize the container</a>.
</td>
</tr>
</table>
</div>
<h4 id="_removing_filters_and_queries_on_all_dashboards" class="float">Removing filters and queries on all dashboards</h4>
<div class="paragraph">
<p>To remove filters and queries on <strong>all</strong> dashboards, click the <strong>Remove filters and queries from all dashboards</strong> <span class="image"><img src="images/remove-all-filters.png" alt="Minus"></span> button in the toolbar panel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the <a href="#relational-panel">relational panel</a> is <a href="#relations-settings-enable">enabled</a>, clicking this button does not remove the <a href="#relational-panel-browsing">filter</a>. If you want to do so, you need to disable the relational panel in the <a href="#kibi-settings-relations">Relations settings</a>.
</td>
</tr>
</table>
</div>
<h3 id="customizing-your-dashboard" class="float">Customizing Dashboard Elements</h3>
<div class="paragraph">
<p>The visualizations in your dashboard are stored in resizable <em>containers</em> that
you can arrange on the dashboard. This section discusses customizing these
containers.</p>
</div>
<h4 id="moving-containers" class="float">Moving Containers</h4>
<div class="paragraph">
<p>Click and hold a container&#8217;s header to move the container around the dashboard. Other containers will shift as needed
to make room for the moving container. Release the mouse button to confirm the container&#8217;s new location.</p>
</div>
<h4 id="resizing-containers" class="float">Resizing Containers</h4>
<div class="paragraph">
<p>Move the cursor to the bottom right corner of the container until the cursor changes to point at the corner. After the
cursor changes, click and drag the corner of the container to change the container&#8217;s size. Release the mouse button to
confirm the new container size.</p>
</div>
<h4 id="removing-containers" class="float">Removing Containers</h4>
<div class="paragraph">
<p>Click the <strong>x</strong> icon at the top right corner of a container to remove that container from the dashboard. Removing a
container from a dashboard does not delete the saved visualization in that container.</p>
</div>
<h4 id="viewing-detailed-information" class="float">Viewing Detailed Information</h4>
<div class="paragraph">
<p>To display the raw data behind the visualization, click the bar at the bottom of the container. Tabs with detailed
information about the raw data replace the visualization, as in this example:</p>
</div>
<div class="paragraph">
<div class="title">Table</div>
<p>A representation of the underlying data, presented as a paginated data grid. You can sort the items
in the table by clicking on the table headers at the top of each column.
<span class="image"><img src="images/NYCTA-Table.jpg" alt="NYCTA-Table"></span></p>
</div>
<div class="paragraph">
<div class="title">Request</div>
<p>The raw request used to query the server, presented in JSON format.
<span class="image"><img src="images/NYCTA-Request.jpg" alt="NYCTA-Request"></span></p>
</div>
<div class="paragraph">
<div class="title">Response</div>
<p>The raw response from the server, presented in JSON format.
<span class="image"><img src="images/NYCTA-Response.jpg" alt="NYCTA-Response"></span></p>
</div>
<div class="paragraph">
<div class="title">Statistics</div>
<p>A summary of the statistics related to the request and the response, presented as a data grid. The data
grid includes the query duration, the request duration, the total number of records found on the server, and the
index pattern used to make the query.
<span class="image"><img src="images/NYCTA-Statistics.jpg" alt="NYCTA-Statistics"></span></p>
</div>
<div class="paragraph">
<p>To export the raw data behind the visualization as a comma-separated-values (CSV) file, click on either the
<strong>Raw</strong> or <strong>Formatted</strong> links at the bottom of any of the detailed information tabs. A raw export contains the data as it
is stored in Elasticsearch. A formatted export contains the results of any applicable Kibana [field formatters].</p>
</div>
<h3 id="changing-the-visualization" class="float">Changing the Visualization</h3>
<div class="paragraph">
<p>Click the <em>Edit</em> button <span class="image"><img src="images/EditVis.png" alt="Pencil button"></span> at the top right of a container to open the
visualization in the <a href="#visualize">Visualize</a> page.</p>
</div>
<h3 id="dashboard-filters" class="float">Working with Filters</h3>
<div class="paragraph">
<p>When you create a filter anywhere in Kibi, the filter conditions display in a green oval under the search text
entry box:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-sample.png" alt="filter sample">
</div>
</div>
<div class="paragraph">
<p>Hovering on the filter oval displays the following icons:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/filter-allbuttons.png" alt="filter allbuttons">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Enable Filter <span class="image"><img src="images/filter-enable.png" alt="filter-enable"></span></dt>
<dd>
<p>Click this icon to disable the filter without removing it. You can
enable the filter again later by clicking the icon again. Disabled filters display a striped shaded color, green for
inclusion filters and red for exclusion filters.</p>
</dd>
<dt class="hdlist1">Pin Filter <span class="image"><img src="images/filter-pin.png" alt="filter-pin"></span></dt>
<dd>
<p>Click this icon to <em>pin</em> a filter. Pinned filters persist across Kibi tabs.
You can pin filters from the <em>Visualize</em> tab, click on the <em>Discover</em> or <em>Dashboard</em> tabs, and those filters remain in
place.</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If you have a pinned filter and you&#8217;re not seeing any query results, check that your current tab&#8217;s index pattern is one
that the filter applies to. E.g. a filter "name:giovanni" will results in 0 results if pinned and therefore "dragged along" to a dashboard whose underlying index does not have a "name" field, let alone a "giovanni" value. For this reason a good pattern in Kibi is to use <em>Dashboard Groups</em> to group together dashboard which are based on the same underlying index. In this case the user can safely pin and "drag along" a filter across dashboards in the same group.
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Toggle Filter <span class="image"><img src="images/filter-toggle.png" alt="filter-toggle"></span></dt>
<dd>
<p>Click this icon to <em>toggle</em> a filter. By default, filters are inclusion
filters, and display in green. Only elements that match the filter are displayed. To change this to an exclusion
filters, displaying only elements that <em>don&#8217;t</em> match, toggle the filter. Exclusion filters display in red.</p>
</dd>
<dt class="hdlist1">Remove Filter <span class="image"><img src="images/filter-delete.png" alt="filter-delete"></span></dt>
<dd>
<p>Click this icon to remove a filter entirely.</p>
</dd>
<dt class="hdlist1">Custom Filter <span class="image"><img src="images/filter-custom.png" alt="filter-custom"></span></dt>
<dd>
<p>Click this icon to display a text field where you can customize the JSON
representation of the filter and specify an alias to use for the filter name:</p>
<div class="imageblock">
<div class="content">
<img src="images/filter-custom-json.png" alt="filter custom json">
</div>
</div>
<div class="paragraph">
<p>You can use JSON filter representation to implement predicate logic, with <code>should</code> for OR, <code>must</code> for AND, and <code>must_not</code>
for NOT:</p>
</div>
<div class="exampleblock">
<div class="title">Example 7. OR Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "should": [
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "China"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 8. AND Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.city_name.raw": "New York"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="exampleblock">
<div class="title">Example 9. NOT Example</div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  "bool": {
    "must_not": [
      {
        "term": {
          "geoip.country_name.raw": "United States"
        }
      },
      {
        "term": {
          "geoip.country_name.raw": "Canada"
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Click the <strong>Done</strong> button to update the filter with your changes.</p>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To apply any of the filter actions to all the filters currently in place, click the <span class="image"><img src="images/filter-actions.png" alt="filter-actions"></span>
<strong>Global Filter Actions</strong> button and select an action.</p>
</div>
<h3 id="dashboard-groups" class="float">Dashboard Groups</h3>
<div class="paragraph">
<p>Dashboards can be organized in dashboard groups; dashboard groups are displayed
as tabs just like dashboards.</p>
</div>
<div class="paragraph">
<p>Clicking on a dashboard group will display the first dashboard in the group
by default; the other dashboards in the group can be selected through the
dropdown menu embedded in the tab:</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/dashboard/dashboardgroup-tab.png" alt="A dashboard group tab">
</div>
</div>
<div class="paragraph">
<p>Dashboard groups can be managed by clicking on the
<a href="#kibi-settings-dashboards-groups">Dashboard Groups Settings</a> tab.</p>
</div>
<h3 id="dash-autorefresh" class="float">Automatically Refreshing the Page</h3>
<div class="paragraph">
<p>You can configure a refresh interval to automatically refresh the page with the latest index data. This periodically
resubmits the search query.</p>
</div>
<div class="paragraph">
<p>When a refresh interval is set, it is displayed to the left of the Time Filter in the menu bar.</p>
</div>
<div class="paragraph">
<p>To set the refresh interval:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click the <strong>Time Filter</strong> <span class="image"><img src="images/TimeFilter.jpg" alt="Time Filter"></span> in the upper right corner of the menu bar.</p>
</li>
<li>
<p>Click the <strong>Refresh Interval</strong> tab.</p>
</li>
<li>
<p>Choose a refresh interval from the list.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To automatically refresh the data, click the <span class="image"><img src="images/autorefresh.png" alt="autorefresh"></span> <strong>Auto-refresh</strong> button and select an
autorefresh interval:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/autorefresh-intervals.png" alt="autorefresh intervals">
</div>
</div>
<div class="paragraph">
<p>When auto-refresh is enabled, Kibi&#8217;s top bar displays a pause button and the auto-refresh interval:
<span class="image"><img src="images/autorefresh-pause.png" alt="autorefresh-pause"></span>. Click the <strong>Pause</strong> button to pause auto-refresh.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="settings">Settings</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="kbn-settings-indices">Indices</h3>
<div class="paragraph">
<p>To use Kibi, you have to tell it about the Elasticsearch indices that you
want to explore by configuring one or more index patterns. You can also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create scripted fields that are computed on the fly from your data. You can
browse and visualize scripted fields, but you cannot search them.</p>
</li>
<li>
<p>Set advanced options such as the number of rows to show in a table and
how many of the most popular fields to show. Use caution when modifying advanced options,
as it&#8217;s possible to set values that are incompatible with one another.</p>
</li>
<li>
<p>Configure Kibi for a production environment</p>
</li>
</ul>
</div>
<h3 id="settings-create-pattern" class="float">Creating an Index Pattern to Connect to Elasticsearch</h3>
<div class="paragraph">
<p>An <em>index pattern</em> identifies one or more Elasticsearch indices that you want to explore with Kibi. Kibi looks for
index names that match the specified pattern.
An asterisk (*) in the pattern matches zero or more characters. For example, the pattern <code>myindex-*</code> matches all
indices whose names start with <code>myindex-</code>, such as <code>myindex-1</code> and <code>myindex-2</code>.</p>
</div>
<div class="paragraph">
<p>An index pattern can also simply be the name of a single index.</p>
</div>
<div class="paragraph">
<p>To create an index pattern to connect to Elasticsearch:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Settings &gt; Indices</strong> tab.</p>
</li>
<li>
<p>Specify an index pattern that matches the name of one or more of your Elasticsearch
indices. By default, Kibi guesses that you&#8217;re you&#8217;re working with log data being
fed into Elasticsearch by Logstash.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When you switch between top-level tabs, Kibi remembers where you were.
For example, if you view a particular index pattern from the Settings tab, switch
to the Discover tab, and then go back to the Settings tab, Kibi displays the
index pattern you last looked at. To get to the create pattern form, click
the <strong>Add</strong> button in the Index Patterns list.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>If your index contains a timestamp field that you want to use to perform time-based comparisons, select the <strong>Index
contains time-based events</strong> option and select the index field that contains the timestamp. Kibi reads the index
mapping to list all of the fields that contain a timestamp.</p>
</li>
<li>
<p>Click <strong>Create</strong> to add the index pattern.</p>
</li>
<li>
<p>To designate the new pattern as the default pattern to load when you view the Discover tab, click the <strong>favorite</strong>
button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To use an event time in an index name, enclose the static text in the pattern and specify the date format using the
tokens described in the following table.</p>
</div>
<div class="paragraph">
<p>For example, <code>[logstash-]YYYY.MM.DD</code> matches all indices whose names have a timestamp of the form <code>YYYY.MM.DD</code> appended
to the prefix <code>logstash-</code>, such as <code>logstash-2015.01.31</code> and <code>logstash-2015-02-01</code>.</p>
</div>
<div id="date-format-tokens" class="hdlist">
<div class="title">Date Format Tokens</div>
<table>
<tr>
<td class="hdlist1">
<code>M</code>
</td>
<td class="hdlist2">
<p>Month - cardinal: 1 2 3 &#8230;&#8203; 12</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Mo</code>
</td>
<td class="hdlist2">
<p>Month - ordinal:	1st 2nd 3rd &#8230;&#8203; 12th</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MM</code>
</td>
<td class="hdlist2">
<p>Month - two digit: 	01 02 03 &#8230;&#8203; 12</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MMM</code>
</td>
<td class="hdlist2">
<p>Month - abbreviation: Jan Feb Mar &#8230;&#8203; Dec</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>MMMM</code>
</td>
<td class="hdlist2">
<p>Month - full: January February March &#8230;&#8203; December</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Q</code>
</td>
<td class="hdlist2">
<p>Quarter: 1 2 3 4</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>D</code>
</td>
<td class="hdlist2">
<p>Day of Month - cardinal: 1 2 3 &#8230;&#8203; 31</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Do</code>
</td>
<td class="hdlist2">
<p>Day of Month - ordinal: 1st 2nd 3rd &#8230;&#8203; 31st</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DD</code>
</td>
<td class="hdlist2">
<p>Day of Month - two digit:	01 02 03 &#8230;&#8203; 31</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DDD</code>
</td>
<td class="hdlist2">
<p>Day of Year - cardinal: 1 2 3 &#8230;&#8203; 365</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DDDo</code>
</td>
<td class="hdlist2">
<p>Day of Year - ordinal:	1st 2nd 3rd &#8230;&#8203; 365th</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>DDDD</code>
</td>
<td class="hdlist2">
<p>Day of Year - three digit: 001 002 &#8230;&#8203; 364 365</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>d</code>
</td>
<td class="hdlist2">
<p>Day of Week - cardinal: 0 1 3 &#8230;&#8203; 6</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>do</code>
</td>
<td class="hdlist2">
<p>Day of Week - ordinal:	0th 1st 2nd &#8230;&#8203; 6th</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>dd</code>
</td>
<td class="hdlist2">
<p>Day of Week - 2-letter abbreviation:	Su Mo Tu &#8230;&#8203; Sa</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ddd</code>
</td>
<td class="hdlist2">
<p>Day of Week - 3-letter abbreviation: Sun Mon Tue &#8230;&#8203; Sat</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>dddd</code>
</td>
<td class="hdlist2">
<p>Day of Week - full: Sunday Monday Tuesday &#8230;&#8203; Saturday</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>e</code>
</td>
<td class="hdlist2">
<p>Day of Week (locale): 0 1 2 &#8230;&#8203; 6</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>E</code>
</td>
<td class="hdlist2">
<p>Day of Week (ISO): 1 2 3 &#8230;&#8203; 7</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>w</code>
</td>
<td class="hdlist2">
<p>Week of Year - cardinal (locale): 1 2 3 &#8230;&#8203; 53</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>wo</code>
</td>
<td class="hdlist2">
<p>Week of Year - ordinal (locale): 1st 2nd 3rd &#8230;&#8203; 53rd</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ww</code>
</td>
<td class="hdlist2">
<p>Week of Year - 2-digit (locale): 01 02 03 &#8230;&#8203; 53</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>W</code>
</td>
<td class="hdlist2">
<p>Week of Year - cardinal (ISO): 1 2 3 &#8230;&#8203; 53</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Wo</code>
</td>
<td class="hdlist2">
<p>Week of Year - ordinal (ISO): 1st 2nd 3rd &#8230;&#8203; 53rd</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>WW</code>
</td>
<td class="hdlist2">
<p>Week of Year - two-digit (ISO): 01 02 03 &#8230;&#8203; 53</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YY</code>
</td>
<td class="hdlist2">
<p>Year - two digit:	70 71 72 &#8230;&#8203; 30</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>YYYY</code>
</td>
<td class="hdlist2">
<p>Year - four digit: 1970 1971 1972 &#8230;&#8203; 2030</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>gg</code>
</td>
<td class="hdlist2">
<p>Week Year - two digit (locale):	70 71 72 &#8230;&#8203; 30</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>gggg</code>
</td>
<td class="hdlist2">
<p>Week Year - four digit (locale):	1970 1971 1972 &#8230;&#8203; 2030</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>GG</code>
</td>
<td class="hdlist2">
<p>Week Year - two digit (ISO):	70 71 72 &#8230;&#8203; 30</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>GGGG</code>
</td>
<td class="hdlist2">
<p>Week Year - four digit (ISO): 1970 1971 1972 &#8230;&#8203; 2030</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>A</code>
</td>
<td class="hdlist2">
<p>AM/PM: AM PM</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>a</code>
</td>
<td class="hdlist2">
<p>am/pm: am pm</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>H</code>
</td>
<td class="hdlist2">
<p>Hour: 0 1 2 &#8230;&#8203; 23</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>HH</code>
</td>
<td class="hdlist2">
<p>Hour - two digit: 00 01 02 &#8230;&#8203; 23</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>h</code>
</td>
<td class="hdlist2">
<p>Hour - 12-hour clock: 1 2 3 &#8230;&#8203; 12</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>hh</code>
</td>
<td class="hdlist2">
<p>Hour - 12-hour clock, 2 digit:	01 02 03 &#8230;&#8203; 12</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>m</code>
</td>
<td class="hdlist2">
<p>Minute: 0 1 2 &#8230;&#8203; 59</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>mm</code>
</td>
<td class="hdlist2">
<p>Minute - two-digit:	00 01 02 &#8230;&#8203; 59</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>s</code>
</td>
<td class="hdlist2">
<p>Second: 0 1 2 &#8230;&#8203;  59</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ss</code>
</td>
<td class="hdlist2">
<p>Second - two-digit: 00 01 02 &#8230;&#8203; 59</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>S</code>
</td>
<td class="hdlist2">
<p>Fractional Second - 10ths: 0 1 2 &#8230;&#8203; 9</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>SS</code>
</td>
<td class="hdlist2">
<p>Fractional Second - 100ths: 	0 1 &#8230;&#8203; 98 99</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>SSS</code>
</td>
<td class="hdlist2">
<p>Fractional Seconds - 1000ths:	0 1 &#8230;&#8203; 998 999</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>Z</code>
</td>
<td class="hdlist2">
<p>Timezone - zero UTC offset (hh:mm format): -07:00 -06:00 -05:00 .. +07:00</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>ZZ</code>
</td>
<td class="hdlist2">
<p>Timezone - zero UTC offset (hhmm format):	-0700 -0600 -0500 &#8230;&#8203; +0700</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>X</code>
</td>
<td class="hdlist2">
<p>Unix Timestamp:	1360013296</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>x</code>
</td>
<td class="hdlist2">
<p>Unix Millisecond Timestamp: 1360013296123</p>
</td>
</tr>
</table>
</div>
<h3 id="set-default-pattern" class="float">Setting the Default Index Pattern</h3>
<div class="paragraph">
<p>The default index pattern is loaded by automatically when you view the <strong>Discover</strong> tab.
Kibi displays a star to the left of the name of the default pattern in the Index Patterns list
on the <strong>Settings &gt; Indices</strong> tab. The first pattern you create is automatically
designated as the default pattern.</p>
</div>
<div class="paragraph">
<p>To set a different pattern as the default index pattern:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Settings &gt; Indices</strong> tab.</p>
</li>
<li>
<p>Select the pattern you want to set as the default in the Index Patterns list.</p>
</li>
<li>
<p>Click the pattern&#8217;s <strong>Favorite</strong> button.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can also manually set the default index pattern in <a href="#advanced-settings">advanced settings</a>.
</td>
</tr>
</table>
</div>
<h3 id="reload-fields" class="float">Reloading the Index Fields List</h3>
<div class="paragraph">
<p>When you add an index mapping, Kibi automatically scans the indices that
match the pattern to display a list of the index fields. You can reload the
index fields list to pick up any newly-added fields.</p>
</div>
<div class="paragraph">
<p>Reloading the index fields list also resets Kibi&#8217;s popularity counters for the fields.
The popularity counters keep track of the fields you&#8217;ve used most often within Kibi
and are used to sort fields within lists.</p>
</div>
<div class="paragraph">
<p>To reload the index fields list:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Settings &gt; Indices</strong> tab.</p>
</li>
<li>
<p>Select an index pattern from the Index Patterns list.</p>
</li>
<li>
<p>Click the pattern&#8217;s <strong>Reload</strong> button.</p>
</li>
</ol>
</div>
<h3 id="delete-pattern" class="float">Deleting an Index Pattern</h3>
<div class="paragraph">
<p>To delete an index pattern:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to the <strong>Settings &gt; Indices</strong> tab.</p>
</li>
<li>
<p>Select the pattern you want to remove in the Index Patterns list.</p>
</li>
<li>
<p>Click the pattern&#8217;s <strong>Delete</strong> button.</p>
</li>
<li>
<p>Confirm that you want to remove the index pattern.</p>
</li>
</ol>
</div>
<h3 id="managing-fields" class="float">Managing Fields</h3>
<div class="paragraph">
<p>The fields for the index pattern are listed in a table. Click a column header to sort the table by that column. Click
the <strong>Controls</strong> button in the rightmost column for a given field to edit the field&#8217;s properties. You can manually set
the field&#8217;s format from the <strong>Format</strong> drop-down. Format options vary based on the field&#8217;s type.</p>
</div>
<div class="paragraph">
<p>You can also set the field&#8217;s popularity value in the <strong>Popularity</strong> text entry box to any desired value. Click the
<strong>Update Field</strong> button to confirm your changes or <strong>Cancel</strong> to return to the list of fields.</p>
</div>
<div class="paragraph">
<p>Kibi has <a href="https://www.elastic.co/blog/kibana-4-1-field-formatters">field formatters</a> for the following field types:</p>
</div>
<div class="sect3">
<h4 id="_string_field_formatters">String Field Formatters</h4>
<div class="paragraph">
<p>String fields support the <code>String</code> and <code>Url</code> formatters.</p>
</div>
<div class="paragraph">
<p>The <code>String</code> field formatter can apply the following transformations to the field&#8217;s contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert to lowercase</p>
</li>
<li>
<p>Convert to uppercase</p>
</li>
<li>
<p>Apply the short dots transformation, which replaces the content before a <code>.</code> character with the first character of
that content, as in the following example:</p>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>Original</strong>
</td>
<td class="hdlist2">
<p><strong>Becomes</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>com.organizations.project.ClassName</code>
</td>
<td class="hdlist2">
<p><code>c.o.p.ClassName</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>Url</code> field formatter can take on the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Link</strong> type turn the contents of the field into an URL.</p>
</li>
<li>
<p>The <strong>Image</strong> type can be used to specify an image directory where a specified image is located.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can customize either type of URL field formats with templates. A <em>URL template</em> enables you to add specific values
to a partial URL. Use the string <code>{{value}}</code> to add the contents of the field to a fixed URL.</p>
</div>
<div class="paragraph">
<p>For example, when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A field contains a user ID</p>
</li>
<li>
<p>That field uses the <code>Url</code> field formatter</p>
</li>
<li>
<p>The URI template is <code><a href="http://company.net/profiles?user_id={{value}}" class="bare">http://company.net/profiles?user_id={{value}}</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting URL replaces <code>{{value}}</code> with the user ID from the field.</p>
</div>
<div class="paragraph">
<p>The <code>{{value}}</code> template string URL-encodes the contents of the field. When a field encoded into a URL contains
non-ASCII characters, these characters are replaced with a <code>%</code> character and the appropriate hexadecimal code. For
example, field contents <code>users/admin</code> result in the URL template adding <code>users%2Fadmin</code>.</p>
</div>
<div class="paragraph">
<p>When the formatter type is set to <strong>Image</strong>, the <code>{{value}}</code> template string specifies the name of an image at the
specified URI.</p>
</div>
<div class="paragraph">
<p>In order to pass unescaped values directly to the URL, use the <code>{{rawValue}}</code> string.</p>
</div>
<div class="paragraph">
<p>A <em>Label Template</em> enables you to specify a text string that displays instead of the raw URL. You can use the
<code>{{value}}</code> template string normally in label templates. You can also use the <code>{{url}}</code> template string to display
the formatted URL.</p>
</div>
</div>
<div class="sect3">
<h4 id="_date_field_formatters">Date Field Formatters</h4>
<div class="paragraph">
<p>Date fields support the <code>Date</code>, <code>Url</code>, and <code>String</code> formatters.</p>
</div>
<div class="paragraph">
<p>The <code>Date</code> formatter enables you to choose the display format of date stamps using the <a href="http://moment.js">moment.js</a>
standard format definitions.</p>
</div>
<div class="paragraph">
<p>The <code>String</code> field formatter can apply the following transformations to the field&#8217;s contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert to lowercase</p>
</li>
<li>
<p>Convert to uppercase</p>
</li>
<li>
<p>Apply the short dots transformation, which replaces the content before a <code>.</code> character with the first character of
that content, as in the following example:</p>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>Original</strong>
</td>
<td class="hdlist2">
<p><strong>Becomes</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>com.organizations.project.ClassName</code>
</td>
<td class="hdlist2">
<p><code>c.o.p.ClassName</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>Url</code> field formatter can take on the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Link</strong> type turn the contents of the field into an URL.</p>
</li>
<li>
<p>The <strong>Image</strong> type can be used to specify an image directory where a specified image is located.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can customize either type of URL field formats with templates. A <em>URL template</em> enables you to add specific values
to a partial URL. Use the string <code>{{value}}</code> to add the contents of the field to a fixed URL.</p>
</div>
<div class="paragraph">
<p>For example, when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A field contains a user ID</p>
</li>
<li>
<p>That field uses the <code>Url</code> field formatter</p>
</li>
<li>
<p>The URI template is <code><a href="http://company.net/profiles?user_id={{value}}" class="bare">http://company.net/profiles?user_id={{value}}</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting URL replaces <code>{{value}}</code> with the user ID from the field.</p>
</div>
<div class="paragraph">
<p>The <code>{{value}}</code> template string URL-encodes the contents of the field. When a field encoded into a URL contains
non-ASCII characters, these characters are replaced with a <code>%</code> character and the appropriate hexadecimal code. For
example, field contents <code>users/admin</code> result in the URL template adding <code>users%2Fadmin</code>.</p>
</div>
<div class="paragraph">
<p>When the formatter type is set to <strong>Image</strong>, the <code>{{value}}</code> template string specifies the name of an image at the
specified URI.</p>
</div>
<div class="paragraph">
<p>In order to pass unescaped values directly to the URL, use the <code>{{rawValue}}</code> string.</p>
</div>
<div class="paragraph">
<p>A <em>Label Template</em> enables you to specify a text string that displays instead of the raw URL. You can use the
<code>{{value}}</code> template string normally in label templates. You can also use the <code>{{url}}</code> template string to display
the formatted URL.</p>
</div>
</div>
<div class="sect3">
<h4 id="_geographic_point_field_formatters">Geographic Point Field Formatters</h4>
<div class="paragraph">
<p>Geographic point fields support the <code>String</code> formatter.</p>
</div>
<div class="paragraph">
<p>The <code>String</code> field formatter can apply the following transformations to the field&#8217;s contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert to lowercase</p>
</li>
<li>
<p>Convert to uppercase</p>
</li>
<li>
<p>Apply the short dots transformation, which replaces the content before a <code>.</code> character with the first character of
that content, as in the following example:</p>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>Original</strong>
</td>
<td class="hdlist2">
<p><strong>Becomes</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>com.organizations.project.ClassName</code>
</td>
<td class="hdlist2">
<p><code>c.o.p.ClassName</code></p>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_numeric_field_formatters">Numeric Field Formatters</h4>
<div class="paragraph">
<p>Numeric fields support the <code>Url</code>, <code>String</code>, <code>Bytes</code>, <code>Number</code>, <code>Percentage</code>, and <code>Color</code> formatters.</p>
</div>
<div class="paragraph">
<p>The <code>String</code> field formatter can apply the following transformations to the field&#8217;s contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Convert to lowercase</p>
</li>
<li>
<p>Convert to uppercase</p>
</li>
<li>
<p>Apply the short dots transformation, which replaces the content before a <code>.</code> character with the first character of
that content, as in the following example:</p>
</li>
</ul>
</div>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
<strong>Original</strong>
</td>
<td class="hdlist2">
<p><strong>Becomes</strong></p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>com.organizations.project.ClassName</code>
</td>
<td class="hdlist2">
<p><code>c.o.p.ClassName</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>Url</code> field formatter can take on the following types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>Link</strong> type turn the contents of the field into an URL.</p>
</li>
<li>
<p>The <strong>Image</strong> type can be used to specify an image directory where a specified image is located.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can customize either type of URL field formats with templates. A <em>URL template</em> enables you to add specific values
to a partial URL. Use the string <code>{{value}}</code> to add the contents of the field to a fixed URL.</p>
</div>
<div class="paragraph">
<p>For example, when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A field contains a user ID</p>
</li>
<li>
<p>That field uses the <code>Url</code> field formatter</p>
</li>
<li>
<p>The URI template is <code><a href="http://company.net/profiles?user_id={{value}}" class="bare">http://company.net/profiles?user_id={{value}}</a></code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The resulting URL replaces <code>{{value}}</code> with the user ID from the field.</p>
</div>
<div class="paragraph">
<p>The <code>{{value}}</code> template string URL-encodes the contents of the field. When a field encoded into a URL contains
non-ASCII characters, these characters are replaced with a <code>%</code> character and the appropriate hexadecimal code. For
example, field contents <code>users/admin</code> result in the URL template adding <code>users%2Fadmin</code>.</p>
</div>
<div class="paragraph">
<p>When the formatter type is set to <strong>Image</strong>, the <code>{{value}}</code> template string specifies the name of an image at the
specified URI.</p>
</div>
<div class="paragraph">
<p>In order to pass unescaped values directly to the URL, use the <code>{{rawValue}}</code> string.</p>
</div>
<div class="paragraph">
<p>A <em>Label Template</em> enables you to specify a text string that displays instead of the raw URL. You can use the
<code>{{value}}</code> template string normally in label templates. You can also use the <code>{{url}}</code> template string to display
the formatted URL.</p>
</div>
<div class="paragraph">
<p>The <code>Color</code> field formatter enables you to specify colors with specific ranges of values for a numeric field.</p>
</div>
<div class="paragraph">
<p>When you select the <code>Color</code> field formatter, Kibana displays the <strong>Range</strong>, <strong>Font Color</strong>, <strong>Background Color</strong>, and <strong>Example</strong> fields.</p>
</div>
<div class="paragraph">
<p>Click the <strong>Add Color</strong> button to add a range of values to associate with a particular color. You can click in the <strong>Font Color</strong> and <strong>Background Color</strong> fields to display a color picker. You can also enter a specific hex code value in the field. The effect of your current color choices are displayed in the <strong>Example</strong> field.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/colorformatter.png" alt="colorformatter">
</div>
</div>
<div class="paragraph">
<p>The <code>Bytes</code>, <code>Number</code>, and <code>Percentage</code> formatters enable you to choose the display formats of numbers in this field using
the <a href="https://adamwdraper.github.io/Numeral-js/">numeral.js</a> standard format definitions.</p>
</div>
<h3 id="create-scripted-field" class="float">Creating a Scripted Field</h3>
<div class="paragraph">
<p>Scripted fields compute data on the fly from the data in your
Elasticsearch indices. Scripted field data is shown on the Discover tab as
part of the document data, and you can use scripted fields in your visualizations.
Scripted field values are computed at query time so they aren&#8217;t indexed and
cannot be searched.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Computing data on the fly with scripted fields can be very resource
intensive and can have a direct impact on Kibi&#8217;s performance. Keep in mind
that there&#8217;s no built-in validation of a scripted field. If your scripts are
buggy, you&#8217;ll get exceptions whenever you try to view the dynamically generated
data.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Scripted fields use the Lucene expression syntax. For more information,
see <a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html#_lucene_expressions_scripts">Lucene Expressions Scripts</a>.</p>
</div>
<div class="paragraph">
<p>You can reference any single value numeric field in your expressions, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>doc['field_name'].value</pre>
</div>
</div>
<div class="paragraph">
<p>To create a scripted field:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Indices</strong></p>
</li>
<li>
<p>Select the index pattern you want to add a scripted field to.</p>
</li>
<li>
<p>Go to the pattern&#8217;s <strong>Scripted Fields</strong> tab.</p>
</li>
<li>
<p>Click <strong>Add Scripted Field</strong>.</p>
</li>
<li>
<p>Enter a name for the scripted field.</p>
</li>
<li>
<p>Enter the expression that you want to use to compute a value on the fly
from your index data.</p>
</li>
<li>
<p>Click <strong>Save Scripted Field</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For more information about scripted fields in Elasticsearch, see
<a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html">Scripting</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In Elasticsearch releases 1.4.3 and later, this functionality requires you to enable
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/modules-scripting.html">dynamic Groovy scripting</a>.
</td>
</tr>
</table>
</div>
<h3 id="update-scripted-field" class="float">Updating a Scripted Field</h3>
<div class="paragraph">
<p>To modify a scripted field:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Indices</strong></p>
</li>
<li>
<p>Click the <strong>Edit</strong> button for the scripted field you want to change.</p>
</li>
<li>
<p>Make your changes and then click <strong>Save Scripted Field</strong> to update the field.</p>
</li>
</ol>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Keep in mind
that there&#8217;s no built-in validation of a scripted field. If your scripts are
buggy, you&#8217;ll get exceptions whenever you try to view the dynamically generated
data.
</td>
</tr>
</table>
</div>
<h3 id="delete-scripted-field" class="float">Deleting a Scripted Field</h3>
<div class="paragraph">
<p>To delete a scripted field:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Indices</strong></p>
</li>
<li>
<p>Click the <strong>Delete</strong> button for the scripted field you want to remove.</p>
</li>
<li>
<p>Confirm that you really want to delete the field.</p>
</li>
</ol>
</div>
<h3 id="kibi-source-filtering" class="float">Source Filtering</h3>
<div class="paragraph">
<p>Some index fields are useful for filtering or aggregation purposes,
but are not used in visualizations like the <a href="#enhanced-search-results">Enhanced search results</a>.</p>
</div>
<div class="paragraph">
<p>In addition, they can negatively impact on the performance of the application
if they contain large amounts of data, creating additional network traffic.</p>
</div>
<div class="paragraph">
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/search-request-source-filtering.html">Source filtering API</a> of Elasticsearch
allows to control which fields are included in the response.</p>
</div>
<div class="paragraph">
<p>Source filtering can be configured in the index pattern page by clicking on
the <em>Retrieved fields</em> tab.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/source-filtering/index-view.png" alt="Index view">
</div>
</div>
<div class="paragraph">
<p>Any visualisation based on the index pattern will receive a filtered response.</p>
</div>
<div class="paragraph">
<p>Filtering rules can be configured by writing a JSON object to the
configuration form.</p>
</div>
<div class="paragraph">
<p>The JSON object can contain two attributes, <code>exclude</code> and <code>include</code>, as
explained in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/master/search-request-source-filtering.html">Source filtering API</a>.</p>
</div>
<div class="paragraph">
<p>The screenshot below displays a filtering configuration that excludes the
<code><em>snippet</em></code> field from the <code>_source</code>.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/source-filtering/config.png" alt="Source filtering configuration">
</div>
</div>
<div class="paragraph">
<p>The column <em>retrieved</em> in the <em>Fields</em> tab specifies if the values associated
with a field should be retrieved or not according to the filtering rules.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kibi-settings-relations">Relations</h3>
<div class="paragraph">
<p>In this panel, you can define relationships between index patterns. These relationships ultimately form a <strong>graph</strong> of index patterns. This graph is used in conjunction with the Siren 2.0 plugin; this allows to perform join operations between <strong>dashboards</strong>, i.e., filtering a dashboard&#8217;s documents with regards to an other.</p>
</div>
<div class="sect3">
<h4 id="_graph_of_index_patterns">Graph of Index Patterns</h4>
<div class="paragraph">
<p>A relationship is defined as a <strong>join</strong> operation between two indices with the following fields:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Left Index Pattern</em>: the left index of the join;</p>
</li>
<li>
<p><em>Left Field</em>: the field of the left index to join on;</p>
</li>
<li>
<p><em>Right Index Pattern</em>: the right index of the join;</p>
</li>
<li>
<p><em>Right Field</em>: the field of the right index to join with; and</p>
</li>
<li>
<p><em>Label</em>: the label of the relation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The image below displays a graph of four index patterns, where three relationships have defined. You can add a new relationship by clicking on the "<em>Add relation</em>" button.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relations-settings/indices-settings.png" alt="Graph of Index Patterns">
</div>
</div>
<div class="paragraph">
<p>A relation is also indicated on the <a href="#kbn-settings-indices">Indices</a> tab thanks to the icon <span class="image"><img src="images/relations-settings/index-relation-icon.png" alt="Index relation icon"></span>.
If you hover the mouse over it, a tooltip message is displayed indicating the index pattern and field that field is joined with.</p>
</div>
<div class="paragraph">
<p>For example, in the image below, that icon is displayed next to the field "id" of the "investor" index, which is join with the field "investorid" of the "investment" index.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relations-settings/investor-index.png" alt="Investor Index">
</div>
</div>
<div class="sect4">
<h5 id="_advanced_settings_for_index_relations_enterprise_edition_only">Advanced settings for index relations [Enterprise Edition only]</h5>
<div class="paragraph">
<p>In most cases the default index relation settings are sufficient.
However, for scenarios involving very large joins or when precision is critical,
it is necessary to manually specify the settings.
One can do it by clicking on the button marked below.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relations-settings/indices-settings-advanced-switch.png" alt="Advanced index relation settings switch">
</div>
</div>
<div class="paragraph">
<p>An additional settings panel will open</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relations-settings/indices-settings-advanced.png" alt="Advanced index relation settings switch">
</div>
</div>
<div class="paragraph">
<p>On this panel, the user can manually configure the following parameters for each relation:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Order By - the ordering to use to lookup the maximum number of terms</p>
</li>
<li>
<p>Number of Terms per Shard - the maximum number of terms per shard to lookup</p>
</li>
<li>
<p>Terms Encoding - the encoding to use when transferring terms across the network</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By setting the above parameters, one can optimise the precision and the performance of the join operation.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Free Kibi version always use the default values for all advanced parameters.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_graph_of_dashboards">Graph of Dashboards</h4>
<div class="paragraph">
<p>Based on the graph of index patterns, one can define relationships between dashboards, since a dashboard may be associated with a <a href="#saving-dashboards">saved search</a>.</p>
</div>
<div class="paragraph">
<p>A relationship between dashboards is defined with the following parameters</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Left Dashboard</em> and <em>Right Dashboard</em>: the dashboards to be linked; and</p>
</li>
<li>
<p><em>Relation</em>: the relation that connects the two dashboards; it is the label of a relation previously defined.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the image below shows a graph of five dashboards:</p>
</div>
<div class="paragraph">
<p>
<style>
.small-circle{
  border-radius: 50%;
  width: 20px;
  height: 20px;
  display: inline-block;
}
</style>
</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>the dashboard "Articles" with a saved search associated to the index "article" depicted with the circle <span class="small-circle" style="background-color: #57c17b;"></span>;</p>
</li>
<li>
<p>the dashboard "Articles detailed per source" with a saved search associated to the index "article" depicted with the circle <span class="small-circle" style="background-color: #57c17b;"></span>;</p>
</li>
<li>
<p>the dashboard "Companies" with a saved search associated to the index "company" depicted with the circle <span class="small-circle" style="background-color: #006e8a;"></span>;</p>
</li>
<li>
<p>the dashboard "Investments" with a saved search associated to the index "investment" depicted with the circle <span class="small-circle" style="background-color: #6f87d8;"></span>; and</p>
</li>
<li>
<p>the dashboard "Investors" with a saved search associated to the index "investor" depicted with the circle <span class="small-circle" style="background-color: #663db8;"></span>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Such relationships between dashboards are defined on the right side of the panel, as shown in the image below.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="images/relations-settings/dashboards-settings.png" alt="Graph of Dashboards">
</div>
</div>
<div class="sect4">
<h5 id="_enabling_relations">Enabling Relations</h5>
<div class="paragraph">
<p>A relation between two dashboard can be enabled or disabled. If it is enabled, the documents are filtered based on that relation.
You can disable/enable a relation by checking the box on an edge of the graph.</p>
</div>
<div class="paragraph">
<p>In the previous image, the AC and CI relations between the dashboards Articles, Companies, and Investments are enabled. This means that filtering documents from the Articles will retain only the Companies, and Investments, that are connected to those articles.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="relations-settings-enable">Enabling Relational Panel</h4>
<div class="paragraph">
<p>By checking the "Enable relational panel" checkbox, the relationships that you defined between dashboards will be made effective while browsing.
The relational panel can be opened by clicking on the icon <span class="image"><img src="images/relations-settings/relational-panel-icon.png" alt="Relational panel icon"></span> in the Dashboard tab.</p>
</div>
<div class="paragraph">
<p>With relations between dashboards enabled in the previous example, you will see the "relational" filter <span class="image"><img src="images/relations-settings/relational-filter.png" alt="Relational filter"></span> displayed on the dashboards Articles, Companies, and Investments.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kibi-settings-datasources">Datasources</h3>
<div class="paragraph">
<p>For an overview of datasources, please read the <a href="#external-datasources">External datasources</a>
chapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="kibi-settings-queries">Queries</h3>
<div class="paragraph">
<p>For an overview of queries, please read the <a href="#external-datasources">External datasources</a>
chapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="kibi-settings-templates">Query Templates</h3>
<div class="paragraph">
<p>For an overview of query templates, please read the <a href="#external-datasources">External datasources</a>
chapter.</p>
</div>
</div>
<div class="sect2">
<h3 id="kibi-settings-dashboards-groups">Dashboard Groups</h3>
<div class="paragraph">
<p>Dashboard groups can be managed through the <strong>Dashboard Groups</strong> tab.</p>
</div>
<div class="paragraph">
<p>You can create a new group by clicking on the <strong>New Dashboard Group</strong> <span class="image"><img src="images/NewVis.png" alt="New"></span>
button, save it with the <strong>Save Dashboard Group</strong> <span class="image"><img src="images/SaveVis.png" alt="Save"></span> button,
or load an existing one with the <strong>Load Dashboard Group</strong> <span class="image"><img src="images/LoadVis.png" alt="Load"></span> button.</p>
</div>
<div class="paragraph">
<p>You can set the following parameters for a dashboard group:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>Title</em>: the title of the group, displayed on the tab.</p>
</li>
<li>
<p><em>Description</em>: an optional description of the group.</p>
</li>
<li>
<p><em>Priority</em>: a number that determines the position of the tab.</p>
</li>
<li>
<p><em>Icon URL</em>/<em>Icon CSS class</em>: allows to set the icon displayed in the tab
either as a PNG image or a CSS font class; Kibi includes the
<a href="https://fortawesome.github.io/Font-Awesome/">Font Awesome</a> toolkit.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="advanced-settings">Advanced</h3>
<div class="paragraph">
<p>The Advanced Settings page enables you to directly edit settings that control
the behavior of the Kibi application. For example, you can change the format
used to display dates, specify the default index pattern, and set the precision
for displayed decimal values.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Changing advanced settings can have unintended consequences. If you aren&#8217;t
sure what you&#8217;re doing, it&#8217;s best to leave these settings as-is.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To set advanced settings:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Advanced</strong>.</p>
</li>
<li>
<p>Click the <strong>Edit</strong> button for the option you want to modify.</p>
</li>
<li>
<p>Enter a new value for the option.</p>
</li>
<li>
<p>Click the <strong>Save</strong> button.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_query_string_options">Query string options</h4>
<div class="paragraph">
<p>You can set the default options used when performing a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.2/query-dsl-query-string-query.html">query_string</a> query thanks to the advanced option <em>query:queryString:options</em>.</p>
</div>
<h2 id="managing-saved-objects" class="float">Managing Saved Searches, Visualizations, and Dashboards</h2>
<div class="paragraph">
<p>You can view, edit, and delete saved searches, visualizations, and dashboards from <strong>Settings &gt; Objects</strong>. You can also
export or import sets of searches, visualizations, and dashboards.</p>
</div>
<div class="paragraph">
<p>Viewing a saved object displays the selected item in the <strong>Discover</strong>, <strong>Visualize</strong>,
or <strong>Dashboard</strong> page. To view a saved object:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Objects</strong>.</p>
</li>
<li>
<p>Select the object you want to view.</p>
</li>
<li>
<p>Click the <strong>View</strong> button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Editing a saved object enables you to directly modify the object definition.
You can change the name of the object, add a description, and modify the
JSON that defines the object&#8217;s properties.</p>
</div>
<div class="paragraph">
<p>If you attempt to access an object whose index has been deleted, Kibi displays
its Edit Object page. You can:
* Recreate the index so you can continue using the object.
* Delete the object and recreate it using a different index.
* Change the index name referenced in the object&#8217;s <code>kibanaSavedObjectMeta.searchSourceJSON</code>
to point to an existing index pattern. This is useful if the index you were working
with has been renamed.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
No validation is performed for object properties. Submitting invalid
changes will render the object unusable. Generally, you should use the
<strong>Discover</strong>, <strong>Visualize</strong>, or <strong>Dashboard</strong> pages to create new objects instead of
directly editing existing ones.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To edit a saved object:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Objects</strong>.</p>
</li>
<li>
<p>Select the object you want to edit.</p>
</li>
<li>
<p>Click the <strong>Edit</strong> button.</p>
</li>
<li>
<p>Make your changes to the object definition.</p>
</li>
<li>
<p>Click the <strong>Save Object</strong> button.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To delete a saved object:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Objects</strong>.</p>
</li>
<li>
<p>Select the object you want to delete.</p>
</li>
<li>
<p>Click the <strong>Delete</strong> button.</p>
</li>
<li>
<p>Confirm that you really want to delete the object.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To export a set of objects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Objects</strong>.</p>
</li>
<li>
<p>Select the type of object you want to export. You can export a set of dashboards, searches, or visualizations.</p>
</li>
<li>
<p>Click the selection box for the objects you want to export, or click the <strong>Select All</strong> box.</p>
</li>
<li>
<p>Click <strong>Export</strong> to select a location to write the exported JSON.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To import a set of objects:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Go to <strong>Settings &gt; Objects</strong>.</p>
</li>
<li>
<p>Click <strong>Import</strong> to navigate to the JSON file representing the set of objects to import.</p>
</li>
<li>
<p>Click <strong>Open</strong> after selecting the JSON file.</p>
</li>
<li>
<p>If any objects in the set would overwrite objects already present in Kibi, confirm the overwrite.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Kibi-server-configuration">Kibi server configuration</h3>
<div class="paragraph">
<p>The Kibi server reads its configuration from the <code>config/kibi.yml</code> file at startup.
The default settings configure Kibi to run on <code>localhost:5606</code>. To change the host or port number, or connect to Elasticsearch running on a different machine,
you&#8217;ll need to update your <code>kibi.yml</code> file. You can also enable SSL and set a variety of other options.</p>
</div>
<div class="hdlist">
<div class="title">Kibana Configuration Settings</div>
<table>
<tr>
<td class="hdlist1">
<code>server.port:</code>
</td>
<td class="hdlist2">
<p><strong>Default: 5601</strong> Kibana is served by a back end server. This setting specifies the port to use.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.host:</code>
</td>
<td class="hdlist2">
<p><strong>Default: "0.0.0.0"</strong> This setting specifies the IP address of the back end server.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.basePath:</code>
</td>
<td class="hdlist2">
<p>Enables you to specify a path to mount Kibana at if you are running behind a proxy. This setting cannot
end in a slash (<code>/</code>).</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.maxPayloadBytes:</code>
</td>
<td class="hdlist2">
<p><strong>Default: 1048576</strong> The maximum payload size in bytes for incoming server requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.url:</code>
</td>
<td class="hdlist2">
<p><strong>Default: "http://localhost:9200"</strong> The URL of the Elasticsearch instance to use for all your
queries.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.preserveHost:</code>
</td>
<td class="hdlist2">
<p><strong>Default: true</strong> When this settings value is true Kibana uses the hostname specified in
the <code>server.host</code> setting. When the value of this setting is <code>false</code>, Kibana uses the hostname of the host that connects
to this Kibana instance.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>kibana.index:</code>
</td>
<td class="hdlist2">
<p><strong>Default: ".kibana"</strong> Kibana uses an index in Elasticsearch to store saved searches, visualizations and
dashboards. Kibana creates a new index if the index doesnt already exist.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>kibana.defaultAppId:</code>
</td>
<td class="hdlist2">
<p><strong>Default: "discover"</strong> The default application to load.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.username:</code> and <code>elasticsearch.password:</code>
</td>
<td class="hdlist2">
<p>If your Elasticsearch is protected with basic authentication,
these settings provide the username and password that the Kibana server uses to perform maintenance on the Kibana index at
startup. Your Kibana users still need to authenticate with Elasticsearch, which is proxied through the Kibana server.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.ssl.cert:</code> and <code>server.ssl.key:</code>
</td>
<td class="hdlist2">
<p>Paths to the PEM-format SSL certificate and SSL key files, respectively. These
files enable SSL for outgoing requests from the Kibana server to the browser.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.cert:</code> and <code>elasticsearch.ssl.key:</code>
</td>
<td class="hdlist2">
<p>Optional settings that provide the paths to the PEM-format SSL
certificate and key files. These files validate that your Elasticsearch backend uses the same key files.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.ca:</code>
</td>
<td class="hdlist2">
<p>Optional setting that enables you to specify a path to the PEM file for the certificate
authority for your Elasticsearch instance.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.verify:</code>
</td>
<td class="hdlist2">
<p><strong>Default: true</strong> To disregard the validity of SSL certificates, change this settings value
to <code>false</code>.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.pingTimeout:</code>
</td>
<td class="hdlist2">
<p><strong>Default: the value of the <code>elasticsearch.requestTimeout</code> setting</strong> Time in milliseconds to
wait for Elasticsearch to respond to pings.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.requestTimeout:</code>
</td>
<td class="hdlist2">
<p><strong>Default: 300000</strong> Time in milliseconds to wait for responses from the back end or
Elasticsearch. This value must be a positive integer.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.shardTimeout:</code>
</td>
<td class="hdlist2">
<p><strong>Default: 0</strong> Time in milliseconds for Elasticsearch to wait for responses from shards. Set
to 0 to disable.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.startupTimeout:</code>
</td>
<td class="hdlist2">
<p><strong>Default: 5000</strong> Time in milliseconds to wait for Elasticsearch at Kibana startup before
retrying.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>pid.file:</code>
</td>
<td class="hdlist2">
<p>Specifies the path where Kibana creates the process ID file.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.dest:</code>
</td>
<td class="hdlist2">
<p><strong>Default: <code>stdout</code></strong> Enables you specify a file where Kibana stores log output.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.silent:</code>
</td>
<td class="hdlist2">
<p><strong>Default: false</strong> Set the value of this setting to <code>true</code> to suppress all logging output.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.quiet:</code>
</td>
<td class="hdlist2">
<p><strong>Default: false</strong> Set the value of this setting to <code>true</code> to suppress all logging output other than
error messages.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.verbose</code>
</td>
<td class="hdlist2">
<p><strong>Default: false</strong> Set the value of this setting to <code>true</code> to log all events, including system usage
information and all requests.</p>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>kibi_core.default_dashboard_id</code>
</td>
<td class="hdlist2">
<p><strong>Default: not set</strong> The dashboard that is displayed when clicking on the Dashboard tab for the first time.</p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>External datasource configuration is documented in the <a href="#external-datasources">External datasources</a> chapter.</p>
</div>
<div class="paragraph">
<p>deprecated[0.3, The names of several Kibi server properties changed in the 0.3 release of Kibana. The previous names remain as functional aliases, but are now deprecated and will be removed in a future release of Kibi]</p>
</div>
<div class="hdlist">
<div class="title">Kibi Server Properties Changed in the 0.3 Release</div>
<table>
<tr>
<td class="hdlist1">
<code>server.port</code> added[0.3]
</td>
<td class="hdlist2">
<p>The port that the Kibana server runs on.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>port</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>5601</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.host</code> added[0.3]
</td>
<td class="hdlist2">
<p>The host to bind the Kibana server to.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>host</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>"0.0.0.0"</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.url</code> added[0.3]
</td>
<td class="hdlist2">
<p>The Elasticsearch instance where the indices you want to query reside.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>elasticsearch_url</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>"http://localhost:9200"</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.preserveHost</code> added[0.3]
</td>
<td class="hdlist2">
<p>By default, the host specified in the incoming request from the browser is specified as the host in the corresponding request Kibana sends to Elasticsearch. If you set this option to <code>false</code>, Kibana uses the host specified in <code>elasticsearch_url</code>.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>elasticsearch_preserve_host</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>true</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.cert</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the path to the SSL certificate for Elasticsearch instances that require a client certificate.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>kibana_elasticsearch_client_crt</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.key</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the path to the SSL key for Elasticsearch instances that require a client key.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>kibana_elasticsearch_client_key</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.password</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the password for Elasticsearch instances that use HTTP basic authentication. Kibana users still need to authenticate with Elasticsearch, which is proxied through the Kibana server.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>kibana_elasticsearch_password</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.username</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the username for Elasticsearch instances that use HTTP basic authentication. Kibana users still need to authenticate with Elasticsearch, which is proxied through the Kibana server.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>kibana_elasticsearch_username</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.pingTimeout</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the maximum wait time in milliseconds for ping responses by Elasticsearch.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>ping_timeout</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>1500</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.startupTimeout</code> added[0.3]
</td>
<td class="hdlist2">
<p>This parameter specifies the maximum wait time in milliseconds for Elasticsearch discovery at Kibana startup. Kibana repeats attempts to discover an Elasticsearch cluster after the specified time elapses.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>startup_timeout</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>5000</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>kibana.index</code> added[0.3]
</td>
<td class="hdlist2">
<p>The name of the index where saved searched, visualizations, and dashboards will be stored..</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>kibana_index</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>.kibana</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>kibana.defaultAppId</code> added[0.3]
</td>
<td class="hdlist2">
<p>The page that will be displayed when you launch Kibana: <code>discover</code>, <code>visualize</code>, <code>dashboard</code>, or <code>settings</code>.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>default_app_id</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>"discover"</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.silent</code> added[0.3]
</td>
<td class="hdlist2">
<p>Set this value to <code>true</code> to suppress all logging output.</p>
<div class="paragraph">
<p><strong>default</strong>: <code>false</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.quiet</code> added[0.3]
</td>
<td class="hdlist2">
<p>Set this value to <code>true</code> to suppress all logging output except for log messages tagged <code>error</code>, <code>fatal</code>, or Hapi.js errors.</p>
<div class="paragraph">
<p><strong>default</strong>: <code>false</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.verbose</code> added[0.3]
</td>
<td class="hdlist2">
<p>Set this value to <code>true</code> to log all events, including system usage information and all requests.</p>
<div class="paragraph">
<p><strong>default</strong>: <code>false</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.events</code> added[0.3]
</td>
<td class="hdlist2">
<p>You can specify a map of log types to output tags for this parameter to create a customized set of loggable events, as in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-json" data-lang="json">{
  log: ['info', 'warning', 'error', 'fatal'],
  response: '*',
  error: '*'
}</code></pre>
</div>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.requestTimeout</code> added[0.3]
</td>
<td class="hdlist2">
<p>How long to wait for responses from the Kibana backend or Elasticsearch, in milliseconds.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>request_timeout</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>500000</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.shardTimeout</code> added[0.3]
</td>
<td class="hdlist2">
<p>How long Elasticsearch should wait for responses from shards. Set to 0 to disable.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>shard_timeout</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>0</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.verify</code> added[0.3]
</td>
<td class="hdlist2">
<p>Indicates whether or not to validate the Elasticsearch SSL certificate. Set to false to disable SSL verification.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>verify_ssl</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>true</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>elasticsearch.ssl.ca</code>
</td>
<td class="hdlist2">
<p>An array of paths to the CA certificates for your Elasticsearch instance. Specify if
you are using a self-signed certificate so the certificate can be verified. Disable <code>elasticsearch.ssl.verify</code> otherwise.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>ca</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.ssl.key</code> added[0.3]
</td>
<td class="hdlist2">
<p>The path to your Kibana server&#8217;s key file. Must be set to encrypt communications between the browser and Kibana.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>ssl_key_file</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>server.ssl.cert</code> added[0.3]
</td>
<td class="hdlist2">
<p>The path to your Kibana server&#8217;s certificate file. Must be set to encrypt communications between the browser and Kibana.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>ssl_cert_file</code> deprecated[0.3]</p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>pid.file</code> added[0.3]
</td>
<td class="hdlist2">
<p>The location where you want to store the process ID file.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>pid_file</code> deprecated[0.3]</p>
</div>
<div class="paragraph">
<p><strong>default</strong>: <code>/var/run/kibana.pid</code></p>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
<code>logging.dest</code> added[0.3]
</td>
<td class="hdlist2">
<p>The location where you want to store the Kibana&#8217;s log output. If not specified, log output is written to standard output and not stored. Specifying a log file suppresses log writes to standard output.</p>
<div class="paragraph">
<p><strong>alias</strong>: <code>log_file</code> deprecated[0.3]</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="production">Using Kibi in a Production Environment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Please read the <a href="https://www.elastic.co/guide/en/kibana/4.4/production.html">Kibana in Production</a>
section in the Kibana manual for production best practices, especially
the <strong>Controlling access</strong> section.</p>
</div>
<div class="paragraph">
<p>Make sure to set the configuration file as readable only to the user running
the Kibi process as it may contain credentials in the database connection
strings.</p>
</div>
<div class="paragraph">
<p>We also recommend to create a database user without write privileges
as they are not required by the system.</p>
</div>
<div class="paragraph">
<p>To prevent data loss it is a good practice to restrict access to the
elasticsearch cluster. Below is a simple nginx configuration to do it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>events {
  worker_connections  1024;
}
http {
  upstream elasticsearch {
    server 127.0.0.1:9200;
  }
  server {
    listen 8080;
    auth_basic "Protected Elasticsearch";
    auth_basic_user_file passwords;
    location / {
      proxy_pass http://elasticsearch;
      proxy_redirect off;
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information about nginx configuration visit <a href="https://www.elastic.co/blog/playing-http-tricks-nginx">Playing HTTP Tricks with Nginx</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="releasenotes">Kibi Release Notes</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_kibi_0_3_2_release_notes">Kibi 0.3.2 Release Notes</h3>
<div class="ulist">
<ul>
<li>
<p>Various bug fixes and stability improvements.</p>
</li>
<li>
<p>New version of kibi_timeline_vis 0.1.2</p>
</li>
<li>
<p>Siren join plugin version upgraded to <a href="https://github.com/sirensolutions/siren-join/tree/2.2.0-1">2.2.0-1</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kibi_0_3_1_and_kibana_4_4_1_release_notes">Kibi 0.3.1 and Kibana 4.4.1 Release Notes</h3>
<div class="ulist">
<ul>
<li>
<p>Various bug fixes and stability improvements.</p>
</li>
<li>
<p>The 0.3.1 release of Kibi requires Elasticsearch 2.2.0.</p>
</li>
<li>
<p>Siren join plugin version upgraded to <a href="https://github.com/sirensolutions/siren-join/tree/2.2.0">2.2.0</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below are the issues relevant to Kibana.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Bump node.js to 0.12.10 from 0.12.9</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/6185">Issue 6185</a>:  Fixes a bug where the active HTTP spinner in the chrome bar is gone</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_kibi_0_3_and_kibana_4_4_release_notes">Kibi 0.3 and Kibana 4.4 Release Notes</h3>
<div class="ulist">
<ul>
<li>
<p>The 0.3 release of Kibi requires Elasticsearch 2.1.2.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Using event times to create index names is no longer supported as of this release. Current versions of Elasticsearch include sophisticated date parsing APIs that Kibana uses to determine date information, removing the need to specify dates in the index pattern name.</p>
</div>
<div class="paragraph">
<p>Below are the issues relevant to Kibana.</p>
</div>
<div class="paragraph">
<p>Enhancements</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://github.com/elastic/kibana/issues/1362">Issue 1362</a>: Color palette selector added.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/1553">Issue 1553</a>: Kibana can shorten URLs for shared or embedded items.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5733">Issue 5733</a>: Time-based index pattern expansion can be set at index pattern creation time.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5775">Issue 5775</a>: Adds a configuration option to change the maximum payload size sent to the server.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/4966">Issue 4966</a>: Logo is now in SVG format.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/3625">Issue 3625</a>: Downloaded visualizations now use the visualization name as the filename.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5279">Issue 5279</a>: Large strings are truncated with an ellipsis (&#8230;&#8203;).</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5241">Issue 5241</a>: Truncated visualization names are displayed in full as tooltips.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Bug Fixes</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5897">Issue 5897</a>: Embedding links no longer include navigation and search bars.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5896">Issue 5896</a>: Bookmarked URLs to saved filtered searches from a previous version of Kibana display correctly.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5744">Issue 5744</a>: Fixes bug that caused incorrect display of "No results found" in some cases.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5824">Issue 5824</a>: Corrects a fatal error when Kibana starts with node x86 on Windows x64 systems.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Plugin System Changes</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5226">Issue 5226</a>: Plugins are explicit when they start to route.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/pull/5725">Pull Request 5725</a>: Plugins can extend Chrome navigation.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/4720">Issue 4720</a>: Adds support for zip compression.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/pull/5704">Pull Request 5704</a>: Removes Github shortcuts from the plugin installer.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/issues/5661">Issue 5661</a>: Fixes the plugin optimization path.</p>
</li>
<li>
<p><a href="http://github.com/elastic/kibana/pull/5538">Pull Request 5538</a>: Apps can use empty export types.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="acknowledgements">Acknowledgements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Kibana is a trademark of Elasticsearch BV, registered in the U.S. and
in other countries.</p>
</div>
<div class="paragraph">
<p>Elasticsearch is a trademark of Elasticsearch BV, registered in the U.S. and
in other countries.</p>
</div>
<div class="paragraph">
<p>Logstash is a trademark of Elasticsearch BV, registered in the U.S. and in
other countries.</p>
</div>
<div class="paragraph">
<p>CrunchBase and CrunchBase Dataset are trademarks of AOL Inc, registered in the
U.S. and in other countries.</p>
</div>
<div class="paragraph">
<p>All the trademarks, registered trademarks and copyrighted terms in the
Kibi demo dataset are the property of their respective owners.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2016-04-05 15:50:16 CEST
</div>
</div>
</body>
</html>